import subprocess
import sys

# ูุณุช ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ
required_libraries = [
    "aiohttp", "arabic_reshaper", "bidi", "beautifulsoup4", "deep_translator",
    "gtts", "khayyam", "num2words", "Pillow", "pycoingecko",
    "requests", "rubpy", "scrapy", "twisted", "google","nltk","qrcode","jdatetime"," phonenumbers"
]

# ุชุงุจุน ุจุฑุง ูุตุจ ฺฉุชุงุจุฎุงูู
def install(package):
    try:
        subprocess.check_call([sys.executable, "-m", "pip", "install", package])
        print(f"{package} ุจุง ููููุช ูุตุจ ุดุฏ.")
    except subprocess.CalledProcessError:
        print(f"ูุตุจ {package} ุจุง ุฎุทุง ููุงุฌู ุดุฏ.")

# ุจุฑุฑุณ ู ูุตุจ ฺฉุชุงุจุฎุงููโูุง
for lib in required_libraries:
    try:
        __import__(lib)
    except ImportError:
        print(f"{lib} ูุตุจ ูุณุชุ ุฏุฑ ุญุงู ูุตุจ...")
        install(lib)

# ูุงุฑุฏ ฺฉุฑุฏู ฺฉุชุงุจุฎุงููโูุง
import os
import sqlite3
import aiohttp
import re
import logging
import random
import asyncio
import shutil
from datetime import datetime, timedelta
from io import BytesIO
from PIL import Image, ImageDraw, ImageFont, ImageFilter
from bs4 import BeautifulSoup

# ูุงุฑุฏ ฺฉุฑุฏู ูุงฺููโูุง ูพุฑูฺู
from database_bot import (
    init_db, set_learning_enabled, get_all_questions_answers, clear_knowledge_base,
    is_learning_enabled, save_question_answer, get_answer
)
from news_site import fetch_latest_news
from openweathermap import get_weather, translate_text
from find_emoji_response import (
    find_emoji_response, predictions, haqiqat, joraat, tourist_spots,
    meshedi_phrases, send_in_chunks
)
from chat_bot import (
    get_chatbot_response, get_song, fetch_estekhare, fetch_video, fetch_prof,
    fetch_audio, get_random_music_link, get_bmi_advice, calculate_bmi,
    validate_input, get_location_map, search_myket
)
from echo import chatbot
from get_ip_address import get_ip_address
from create_qr import create_qr_code
import bio_fackt_faz
from bio_fackt_faz import get_random_health_tip, get_random_quote
from phone_number import get_phone_info
from googlesearch import search
import scrapy
import prayer_times
from scrapy.crawler import CrawlerRunner
from twisted.internet import defer, reactor
from scrapy.utils.log import configure_logging
from code_runer import execute_code

# ูุงุฑุฏ ฺฉุฑุฏู ฺฉุชุงุจุฎุงููโูุง ุจุง ูุตุจ ูุดุฑูุท
try:
    import rubpy
    from rubpy import Client, filters, utils, exceptions,Rubino
    from rubpy.types import Updates
    from rubpy.enums import ReportType
except ImportError:
    install('rubpy')
    import rubpy
    from rubpy import Client, filters, utils, exceptions
    from rubpy.types import Updates
    from rubpy.enums import ReportType

try:
    import requests
except ImportError:
    install('requests')
    import requests

try:
    from gtts import gTTS
except ImportError:
    install("gtts")
    from gtts import gTTS

try:
    from deep_translator import GoogleTranslator
except ImportError:
    install("deep_translator")
    from deep_translator import GoogleTranslator

try:
    from khayyam import JalaliDatetime
except ImportError:
    install("khayyam")
    from khayyam import JalaliDatetime

try:
    import arabic_reshaper
except ImportError:
    install("arabic_reshaper")
    import arabic_reshaper

try:
    from bidi.algorithm import get_display
except ImportError:
    install("python-bidi")
    from bidi.algorithm import get_display

try:
    from pycoingecko import CoinGeckoAPI
except ImportError:
    install("pycoingecko")
    from pycoingecko import CoinGeckoAPI

try:
    from num2words import num2words
except ImportError:
    install("num2words")
    from num2words import num2words

    
    

# ุณุงุฎุช ุจุงุช
bot = Client(name='Ai_bot')
rubino = Rubino(bot)
# ูุฌููุนู ฺฉููุงุช ููุชุฑุดุฏู
filtered_phrases = set()
choices = ["ุณูฺฏ", "ฺฉุงุบุฐ", "ูฺ"]
game_active = False  # ูุถุนุช ุจุงุฒ
allow_warning = True
def check_warning_status():
    return allow_warning
help_ = """
ุณูุงู! ุจู ุฑุจุงุช ูุฑุจุงุช ุฎูุด ุขูุฏุฏ. ูุทูุงู ุฏุณุชูุฑุงุช ุฑุจุงุช ุฑุง ุฏุฑ ฺฉุงูุงู ูุง ูุดุงูุฏู ฺฉูุฏ:

@mirbotrubika
"""

    
valid_expression_pattern = r'^[\d\s\+\-\*\/\(\)]+$'

conn = sqlite3.connect('users_bot.db')
cursor = conn.cursor()
cursor.execute('''CREATE TABLE IF NOT EXISTS users (user_id TEXT PRIMARY KEY, name TEXT)''')
conn.commit()

# ุชุงุจุน ุฐุฎุฑู ูุงู ฺฉุงุฑุจุฑ ุจุง user_id ููุญุตุฑุจูโูุฑุฏ
def save_user_name(user_id, name):
    try:
        cursor.execute('REPLACE INTO users (user_id, name) VALUES (?, ?)', (str(user_id), name))
        conn.commit()
    except sqlite3.Error as e:
        print("Error saving user name:", e)

# ุชุงุจุน ุจุงุฒุงุจ ูุงู ฺฉุงุฑุจุฑ
def get_user_name(user_id):
    cursor.execute('SELECT name FROM users WHERE user_id = ?', (str(user_id),))
    result = cursor.fetchone()
    return result[0] if result else None



def get_all_users():
    cursor.execute('SELECT name FROM users')
    results = cursor.fetchall()
    return [row[0] for row in results]
async def get_guid():
    profile_info =await rubino.get_my_profile_info()
    profile_id=profile_info["profile"]["id"]
    return profile_id



# ูพุงูโูุง ุฎูุดโุขูุฏฺฏู ู ุฎุฑูุฌ
welcome_messages = [
    "๐ ฺฉ ุนุถู ุงุฒ ุทุฑู ููฺฉ ุจู ฺฏุฑูู ุงูุฒูุฏู ุดุฏ. {name} ุนุฒุฒุ ุฎูุดโุขูุฏ! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ ุณูุงู {name}! ุฎูุด ุขูุฏ ุจู ุฌูุน ูุง! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐บ {name} ุนุฒุฒุ ุจู ฺฏุฑูู ุฎูุด ุขูุฏ! ุงูุฏูุงุฑู ูุญุธุงุช ุฎูุจ ุฏุงุดุชู ุจุงุด. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "โจ ุฎูุดโุขูุฏ {name} ุฌุงู! ุงูุฌุง ุงุฒ ุญุถูุฑุช ุฎูุดุญุงูู. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุฌุงูุ ุจู ฺฏุฑูู ุฎูุด ุงููุฏ! ุงูุฏูุงุฑู ูุญุธุงุช ุฎูุจ ุฏุงุดุชู ุจุงุด. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุนุฒุฒุ ุฎูุด ุงููุฏ! ุขูุงุฏู ุชุฌุฑุจูโูุง ุฌุฏุฏ ูุณุชู! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุฌุงูุ ูุฏูุช ุฑู ฺุดู! ุงูุฏูุงุฑู ูุญุธุงุช ุฎูุจ ุฏุงุดุชู ุจุงุด. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ ุจู ฺฏุฑูู ุฎูุด ุงููุฏ {name}! ุงูุฌุง ุฌุง ุจุฑุง ููู ูุณุช. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ค ุณูุงู {name}! ุฎู ุฎูุดุญุงูู ฺฉู ุจู ุฌูุน ูุง ูพูุณุช! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุนุฒุฒุ ุจู ฺฏุฑูู ุฎูุดโุขูุฏ! ูุฑ ูุญุธูโุงุช ูพุฑ ุงุฒ ุดุงุฏ. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุฌุงูุ ููุฑ ุญุถูุฑ ุชู ุฌูุน ูุง ุฑู ุฑูุดู ฺฉุฑุฏ! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ ุจู ุฌูุน ูุง ุฎูุด ุขูุฏ {name}! ุงุฒ ุขุดูุงุช ุฎูุดุจุฎุชู. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุฌุงูุ ุฎูุดโุขูุฏ ุจู ุงู ฺฏุฑูู ุฏูุณุชโุฏุงุดุชู! โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ท ุณูุงู {name}! ุญุถูุฑุช ุฏุฑ ุงูุฌุง ูพุฑ ุงุฒ ูุทู ู ุดุงุฏ ุงุณุช. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ฅณ {name} ุนุฒุฒุ ุฎูุด ุขูุฏ! ุงูุฏูุงุฑู ุงุฒ ุญุถูุฑุช ูุฐุช ุจุจุฑ. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุฌุงูุ ุจู ฺฏุฑูู ุฎูุด ุงููุฏ! ุงูุฌุง ูพุฑ ุงุฒ ุนุดู ู ุฏูุณุช ูุณุช. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ ุจู ุฌูุน ูุง ุฎูุด ุขูุฏ {name} ุนุฒุฒ! ุงุฒ ุญุถูุฑุช ุฏูฺฏุฑูู. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ธ {name} ุฌุงูุ ุฎูุดโุขูุฏ! ูุญุธุงุช ุดุงุฏ ุจุฑุงุช ุขุฑุฒู ุฏุงุฑู. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "๐ {name} ุนุฒุฒุ ุฎูุดโุขูุฏ! ุงูุฏูุงุฑู ุจูุชุฑู ูุญุธุงุชุช ุงูุฌุง ุฑูู ุจุฎูุฑู. โฐ ุฒูุงู ูุฑูุฏ: {time}",
    "โจ {name} ุฌุงูุ ูุฏูุช ูุจุงุฑฺฉ! ุญุถูุฑ ุชู ุจุงุนุซ ุดุงุฏ ุฌูุน ูุงุณุช. โฐ ุฒูุงู ูุฑูุฏ: {time}",
]

# ูพุงูโูุง ุฎุฏุงุญุงูุธ ุจุง ููุงุด ุฒูุงู
farewell_messages = [
    "๐ข {name} ุนุฒุฒ ุงุฒ ฺฏุฑูู ุฎุฏุงุญุงูุธ ฺฉุฑุฏ. ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑู! โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ฅ {name} ุนุฒุฒุ ุฎุฏุงุญุงูุธ! ููุดู ูููู ุจุงุด. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุฌุงูุ ุงุฒ ฺฏุฑูู ุฎุฏุงุญุงูุธ ฺฉุฑุฏ. ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑู! โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุฌุงูุ ฺฏุฑูู ุฑู ุชุฑฺฉ ฺฉุฑุฏ. ุงูุฏูุงุฑู ุฏูุจุงุฑู ุจุจููุช. โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐ {name} ุนุฒุฒุ ุงุฒ ฺฏุฑูู ุฎุงุฑุฌ ุดุฏ. ููุดู ูููู ู ูพุฑูุฒ ุจุงุด! โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐น {name} ุฌุงูุ ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑู! ุจุฑุงุช ุขุฑุฒู ููููุช ูโฺฉูู. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ข {name} ุนุฒุฒุ ุจุง ุฏู ฺฏุฑูุชู ุงุฒ ฺฏุฑูู ุฎุฏุงุญุงูุธ ฺฉุฑุฏ. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐บ {name} ุฌุงูุ ูุฑุฌุง ูุณุช ูููู ุจุงุด! ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑู. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุนุฒุฒุ ุจุง ุงูุฏ ุฏุฏุงุฑ ูุฌุฏุฏ! ุจุฏุฑูุฏ. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุฌุงูุ ุงุฒ ฺฏุฑูู ุฑูุชุ ุฏูุชูฺฏุช ุฎูุงูู ุดุฏ! โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐ {name} ุนุฒุฒุ ุฎุฏุงุญุงูุธ ฺฉุฑุฏ ูู ุฌุงุช ุฏุฑ ุฏู ูุงุณุช. โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐ {name} ุฌุงูุ ุจุฑุงุช ุฑูุฒูุง ุฎูุด ุขุฑุฒู ูโฺฉูู! ูููู ุจุงุด. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ฅฒ {name} ุนุฒุฒุ ููุดู ุจู ุงุฏ ุฎูุงูู ุฏุงุดุช ุญุถูุฑุช ุฑู. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ท {name} ุฌุงูุ ุฎุฏุงุญุงูุธ! ููุดู ุชู ููุจ ูุง ุฌุง ุฏุงุฑ. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐คฒ {name} ุนุฒุฒุ ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑู. ุจุฑุงุช ุขุฑุฒู ุฎูุดุจุฎุช ุฏุงุฑู. โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐ค {name} ุฌุงูุ ุงุฒ ฺฏุฑูู ุฎุฏุงุญุงูุธ ฺฉุฑุฏุ ููุชุธุฑ ุจุฑฺฏุดุชุช ูโูููู. โฐ ุฒูุงู ุฎุฑูุฌ:\n {time}",
    "๐ฟ {name} ุนุฒุฒุ ุจุง ุขุฑุฒู ููููุช ุจุฏุฑูุฏ. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "โ {name} ุฌุงูุ ฺฏุฑูู ุฑู ุชุฑฺฉ ฺฉุฑุฏุ ุฏูุชูฺฏุช ูุดู. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุนุฒุฒุ ุจุฏุฑูุฏ! ููุดู ูููู ู ูพุฑูุฒ ุจุงุด. โฐ ุฒูุงู ุฎุฑูุฌ: \n{time}",
    "๐ {name} ุฌุงูุ ุขุฑุฒู ุฏุงุฑู ุฑูุฒูุง ุฎูุจ ูพุด ุฑูุช ุจุงุดู! ุฎุฏุงุญุงูุธ. โฐ ุฒูุงู ุฎุฑูุฌ: \n {time}",
]
# ุงูฺฏููุง ููโุชุฑ ุจุฑุง ุดูุงุณุง
welcome_patterns = [
    r"\bjoined the group\b", r"\bjoined\b", r"\bูพูุณุช\b", 
    r"\bุนุถู ุดุฏ\b", r"\bุจู ฺฏุฑูู ุงุถุงูู ุดุฏ\b", r"\bูุงุฑุฏ ฺฏุฑูู ุดุฏ\b",
    r"\bุจู ุฌูุน ูุง ูพูุณุช\b", r"\binvited\b", r"\binvite link\b",
    r"\bjoined group\b", r"\bุงุฒ ุทุฑู ููฺฉ\b", r"\bgroup join\b"
]

farewell_patterns = [
    r"\bleft the group\b", r"\bleft\b", r"\bุฎุฑูุฌ\b", 
    r"\bุชุฑฺฉ ฺฉุฑุฏ\b", r"\bุงุฒ ฺฏุฑูู ุฎุงุฑุฌ ุดุฏ\b", r"\bฺฏุฑูู ุฑุง ุชุฑฺฉ ฺฉุฑุฏ\b",
    r"\bฺฏุฑูู ุฑุง ุชุฑฺฉ\b", r"\bุฎุฏุงุญุงูุธ\b", r"\bleft group\b", 
    r"\bquit\b", r"\bexited\b", r"\bุฎุฏุงุญุงูุธ ฺฉุฑุฏ\b"
]
def match_patterns(text, patterns):
    for pattern in patterns:
        if re.search(pattern, text, re.IGNORECASE):
            return True
    return False
# ูุชุบุฑ ุจุฑุง ูฺฏูุฏุงุฑ ุขุฎุฑู ุณูุงู ู ุฌูุงุจ
last_question = None
last_answer = None
MAX_MESSAGE_LENGTH = 4000

# ุชุงุจุน ุจุฑุง ุชูุณู ูพุงู ุจู ฺูุฏ ุจุฎุด
def split_message(message, max_length=MAX_MESSAGE_LENGTH):
    # ุงฺฏุฑ ูพุงู ุทููุงู ุจูุฏุ ุขู ุฑุง ุจู ุจุฎุดโูุง ฺฉูฺฺฉุชุฑ ุชูุณู ูโฺฉูู
    return [message[i:i + max_length] for i in range(0, len(message), max_length)]

music_styles = [
    "1- Pop ๐", "2- Intense ๐ฅ", "3- Violin ๐ป", "4- Anthemic ๐บ", 
    "5- Male Voice ๐จโ๐ค", "6- Funk ๐ต", "7- Ethereal ๐", 
    "8- Hard Rock ๐ค", "9- Groovy ๐ธ", "10- Soul ๐ท", 
    "11- Psychedelic ๐", "12- Catchy ๐ถ", "13- Male Vocals ๐ค", 
    "14- Japanese ๐ฏ๐ต", "15- Ambient ๐", "16- Atmospheric โ๏ธ", 
    "17- Synth ๐น", "18- Dreamy ๐", "19- Electric Guitar ๐ธ"
]

FONT_PATHS = [
    "fonts/Arial.ttf",         # ูููุช ุงูฺฏูุณ
    "fonts/Roboto-Regular.ttf", # ูููุช ุงูฺฏูุณ
    "fonts/Vazir-Regular.ttf",  # ูููุช ูุงุฑุณ
    "fonts/IranSans.ttf",       # ูููุช ูุงุฑุณ
]
captions = [
    "ุง ุฑูุจุฑ ุขุฒุงุฏูุ ุขูุงุฏูโุงู ุขูุงุฏู\nุชุง ุขุฎุฑู ููุณโูุงุ ุฏุฑ ุฑุงูุชู ุฏู ุฏุงุฏู",
    "ุฏู ุฑุง ุจู ููุฑ ููุฑ ุชู ุฑูุดู ฺฉุฑุฏูโุงู\nุฌุงู ุฑุง ุจู ุนุดู ุชู ูุฏุง ฺฉุฑุฏูโุงู",
    "ุชู ููุฑ ุฑุงู ูุงุ ุง ุฑูุจุฑ ูุง\nุนุดูุช ููุดู ุฌุงุฑ ุงุณุช ุฏุฑ ุฏู ูุง",
    "ุง ุณุฏ ู ูููุง ูุงุ ุฏูโฺฏุฑู ุจู ุนุดูุช\nุฌุงูโูุง ูุฏุง ุฑุงู ุชูุ ุชุง ุฑูุฒ ุจุนุซุช",
    "ุจุง ุชู ูุณุฑ ุนุดู ุฑุง ูพููุฏูโุงู\nุฏุฑ ุณุงูโุณุงุฑุช ุง ุฑูุจุฑ ุขุณูุฏูโุงู",
    "ููุฑ ุชู ุฏุฑ ุฏู ูุงุ ุดุนููโูุฑ ฺูู ุฎูุฑุดุฏ\nุนุดู ุชู ุชุง ุงุจุฏุ ุฏุฑ ุฌุงู ูุง ุงูุฏ",
    "ุชุง ุฒูุฏูโุงู ุง ุฑูุจุฑ ุนุงุดู\nุฏูโูุง ุจู ุนุดู ุชู ููุดู ุฏูุณุงุฒ ุงุณุช",
    "ุจุง ุชู ูุณุฑ ุนุดู ุท ุฎูุงูู ฺฉุฑุฏ\nุชุง ุฌุงู ูุฏุง ุฑุงูุช ุง ุฑูุจุฑ ฺฉุฑุฏ",
    "ุง ุฑูุจุฑูุ ุฏุฑ ุณุงูโุงุช ุขุฑุงูู\nุจุง ุนุดู ุชู ุฏุฑ ุฏูุ ููุฑุงู ู ููโฺฏุงูู",
    "ููุฑ ุชู ุฏุฑ ุฏูโูุงุ ฺูู ุดุนููโุง ุฌุงูุฏ\nุนุดู ุชู ุฏุฑ ุงู ููุจุ ูุฑฺฏุฒ ููโูพูุณุฏ",

    # ุดุนุฑูุง ุฌุฏุฏ:
    "ุง ุฑูุจุฑ ูุงุ ฺุฑุงุบ ุฑุงู\nุฏุฑ ูพุฑุชู ููุฑุชุ ุฌุงู ูพูุงู",
    "ุนุดูุช ุฏุฑ ุฏู ูุง ุชุง ุงุจุฏ ูพุงุฏุงุฑ\nุจุง ุชู ุฏู ู ุฌุงููุงู ุงุณุชูุงุฑ",
    "ุจุง ููุณ ุชู ุฒูุฏูโุงู ุง ุฑูุจุฑ ุฏูโูุง\nุนุดู ุชู ุฌุงุฑโุณุช ุฏุฑ ุนูู ุฏูโูุง",
    "ุชู ุชฺฉูโฺฏุงู ูุงุ ุฏุฑ ูุณุฑ ุงูุงู\nุจุง ุชู ูพููุฏูโุงู ุฑุงู ุจูโุณู ุฌุงู",
    "ุฑูุจุฑุงุ ุฏู ุจู ุชู ุจุณุชูโุงู ุชุง ุงุจุฏ\nุจุง ูุงู ุชูุ ุงูุฏ ูุง ููุดู ุดุฏ ุจููุฏ",
    "ุง ุฑูุจุฑ ุฏูโูุงุ ุฏุฑ ุณุงูโุงุช ุขุฑุงู\nุนุดู ุชู ุฏุฑ ููุจ ูุงุณุช ููฺู ููุฑ ู ูุฑุงู",
    "ุง ุฑูุจุฑ ุนุดูุ ุฏุฑ ูพูุงูุช ุฏู ูุง\nุจุง ุชู ุดฺฉููุง ุดุฏู ุฌุงู ู ุฏู ูุง",
    "ุฏุฑ ุฑุงู ุชู ูุง ุฌุงู ูุฏุง ุฏุงุฑู\nุจุง ููุฑ ุชู ุฏุฑ ุฏูุ ุนุดู ุฎุฏุง ุฏุงุฑู",
    "ุชู ููุฑ ุฏุฑ ุดุจโูุง ุชุงุฑฺฉ ูุง\nุจุง ุชู ูพููุฏู ุฑุงู ุนุงุดูุงูู ุชุง ุฎุฏุง",
    "ูุฑ ูุญุธู ุฏุฑ ุณุงูโ ุชู ุณุฑุดุงุฑู\nุนุดู ุชู ุฏุฑ ุฏูุ ุชุง ุงุจุฏ ุจุฑูุฑุงุฑู",

    # ุดุนุฑูุง ููุชุฏุฑุงูู:
    "ุง ุงูุงู ูุงุ ุฏุฑ ูุจุฑุฏ ุจุง ุทุงุบูุช\nุนุดู ุชู ุฏุฑ ุฏูโูุงุ ูโุณุงุฒุฏ ุฑุงู ุฑุณุชฺฏุงุฑ ู ููุช",
    "ุฏุณุชโูุง ูพุฑ ูุฏุฑุช ุชูุ ุจุฑ ุณุฑูุงู ุณุงู\nูุง ุจุง ุชู ูุณุชูุ ุชุง ุฌุงู ุฏุฑ ุชู ุฏุงุฑู ู ูพุงุฏุงุฑู",
    "ุฏุฑ ุฑู ุชู ุง ุฑูุจุฑุ ุฏูโูุง ูุง ุญูุงุณู ุงุณุช\nุนุดูุช ุจู ูุง ููุช ูโุฏูุฏุ ุจุง ุชู ูููโฺุฒ ููฺฉู ุงุณุช",
    "ูุฑุฏ ุงุฒ ุฌูุณ ุงูุงู ู ุงุซุงุฑ\nูุง ุฑุง ุจุง ุงุฑุงุฏูโุงุช ุฒูุฏูโ ูโฺฉู ุจู ุงุนุชุจุงุฑ",
    "ุฏุฑ ุญูุงุณูโุงุช ูุง ุฌูุด ู ุฎุฑูุด ุฏุงุฑู\nุจุง ุชูุ ุจุฑ ุชุงุฑฺฉโูุง ูพุฑูุฒู ู ุฎุฑูุด ุฏุงุฑู",
    "ุง ุฑูุจุฑุ ูุง ุฑุง ุจู ูููโูุง ุฑูุน ุจุจุฑ\nุจุง ูุฏุฑุช ฺฉูุงูุชุ ุฏูุง ุธููุช ุฑุง ุฏุฑ ูู ุจุดฺฉู",
    "ุชู ูุฑูุงูุฏูโ ุนุดู ู ุงุณุชุงุฏฺฏโุง\nุจุง ุชู ุชุง ูพุฑูุฒุ ููโุตุฏุง ู ููโุฑุงุณุชุง ูโุดูู",
    "ูุฑ ุจุงุฑ ฺฉู ูุฏุง ูโฺฉูุ ุฏูโูุง ูโุชูพุฏ\nุจุง ุชูุ ุฏุฑ ุงู ุฑุงู ุฏุดูุงุฑุ ูพุฑูุฒ ูุณููู ุงุณุช",
    "ูุง ูุณู ุงูููุงุจูุ ุฏุฑ ุณุฎุชโูุง ุงุณุชุงุฏูโุงู\nุฏุณุช ุฏุฑ ุฏุณุช ุชูุ ุจุฑ ูููโ ููุงูุน ุบูุจู ฺฉุฑุฏูโุงู",
    "ุง ุฑูุจุฑ ุนุฒุฒุ ุชู ุงูุฏ ููุช ูุง\nุจุง ุชู ุจู ุณู ูุฑุฏุงุ ุจโูพุฑูุง ูโุฑูู ู ุดุฌุงุนุงูู ูโฺฉูุดู",

    # ุดุนุฑูุง ุชุฑุณุงููุฏู ุจุฑุง ุฏุดููุงู:
    "ุง ุฏุดููุงู ุงุณูุงูุ ุฏุฑ ุฎุงู ุจุงุทู ุฎูุฏ\nุจุฏุงุฑ ูุง ุฑุง ูุฑฺฏุฒ ููโุชูุงูุฏ ุฎูุงุจ ุจุจุฑุฏ",
    "ุตุฏุง ูุง ุชูุ ููฺู ุทููุงู ุงุณุช\nุชุง ุธููุฑ ุญูุ ุณุชู ุจุฑ ูุฎูุงูุฏ ฺฏุดุช",
    "ุฏุดููุงู ุจุฏุงููุฏ ฺฉู ูุง ุงุณุชุงุฏูโุงู\nูุฑฺฏุฒ ุชุณููุ ูู ุฏุฑ ุฎูุงุจ ู ูู ุฏุฑ ุจุฏุงุฑ ูุณุชู",
    "ุขุชุด ุฎุดู ูุง ุฏุฑ ุฏูโูุงุณุชุ ุจุฏุงุฑุฏ\nุฏุดููุงู ุจุฏุงููุฏุ ูุง ูุฑุงููุด ูุฎูุงูู ฺฉุฑุฏ",
    "ุจู ฺฉูุฑ ฺุดู ุดูุงุ ูพุฑฺู ูุง ุจููุฏ ุงุณุช\nุนุฒู ูุง ุฏุฑ ุฏูโูุงุ ูุฑฺฏุฒ ูุญู ูุฎูุงูุฏ ุดุฏ",
    "ูุฑฺฏุฒ ูุฑุงููุด ูุฎูุงูู ฺฉุฑุฏ ุธุงูู ุฑุง\nุขูุฏู ุงุฒ ุขู ูุงุณุชุ ุฏุฑ ุณุงูโ ุฑูุจุฑู ุฏูุงูุฑ",
    "ุดูุง ุฒุฎูโุฒููุฏฺฏุงู ุงูุฏูุงุ ุจุดููุฏ ุตุฏุง\nููุช ูุง ุจุฏุงุฑ ุงุณุชุ ุฏุฑ ุตููู ุฎูุฏ ุขูุงุฏูโุงุณุช",
    "ุงุฒ ูุฑุฒูุง ูุง ุฏูุฑ ุดูุฏุ ุง ุฌุงูุงู\nุงุฑุงู ูุง ุฒูุฏู ุงุณุช ู ุฒุฑ ูพุฑฺู ุงูุงู",
    "ุดูุง ุฏุฑ ุจุฑุงุจุฑ ูุงุ ฺูู ุจุงุฏ ู ฺฉูโูุฏุฑุฏ\nุนุฒุช ูุง ุฑุง ุฏุฑ ุฏูโูุง ูุฑฺฏุฒ ููโุชูุงูุฏ ุจฺฉุดุฏ",
    "ุง ุฏุดููุงู ุฌุงูุ ุฏุฑ ุฎุงู ุฎุงู ุฎูุฏ\nูุง ุงุฒ ุงูููุงุจุ ูุฑฺฏุฒ ุจุฑููโฺฏุฑุฏู ุจู ุนูุจ"
]

def get_response_from_api(user_input):
    url = "https://api.api-code.ir/gpt-4/"
    payload = {"text": user_input}

    try:
        response = requests.get(url, params=payload)
        response.raise_for_status()  # ุจุฑุฑุณ ูุถุนุช ูพุงุณุฎ
        
        data = response.json()
        return data['result']  # ููุท ูุชุฌู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ

    except requests.exceptions.HTTPError as http_err:
        return f"HTTP error occurred: {http_err}"
    except requests.exceptions.RequestException as req_err:
        return f"Request error occurred: {req_err}"
    except Exception as e:
        return f"An error occurred: {e}"

# ุชุงุจุน ุจุฑุง ุงุฌุงุฏ ฺฉ ุฑูฺฏ ุชุตุงุฏู
def random_color(brightness=255):
    return tuple(random.randint(0, brightness) for _ in range(3))

# ุชุงุจุน ุจุฑุง ูุญุงุณุจู ูุฒุงู ุชุถุงุฏ ุฑูฺฏ (contrast)
def calculate_brightness(color):
    return (color[0] * 299 + color[1] * 587 + color[2] * 114) / 1000

def is_contrasting(color1, color2):
    return abs(calculate_brightness(color1) - calculate_brightness(color2)) > 125

# ุชุงุจุน ุจุฑุง ุงูุชุฎุงุจ ฺฉ ุฑูฺฏ ุชุตุงุฏู ฺฉู ุจุง ูพุณโุฒููู ุชุถุงุฏ ฺฉุงู ุฏุงุดุชู ุจุงุดุฏ
def random_contrasting_color(background_color):
    text_color = random_color()
    while not is_contrasting(text_color, background_color):
        text_color = random_color()
    return text_color

# ุชุงุจุน ุจุฑุง ุงูุชุฎุงุจ ฺฉ ูููุช ุชุตุงุฏู ุจุง ุงูุฏุงุฒู ุฏูุฎูุงู
def get_random_font(text, size):
    # ุงูุชุฎุงุจ ูููุช ุจุฑ ุงุณุงุณ ูุชู (ุงฺฏุฑ ูุชู ูุงุฑุณ ุจุงุดุฏ ูููุช ูุงุฑุณ ุงูุชุฎุงุจ ูโุดูุฏ)
    if any('\u0600' <= char <= '\u06FF' for char in text):  # ุจุฑุฑุณ ูุฌูุฏ ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ
        font_path = random.choice(FONT_PATHS[2:])  # ุงูุชุฎุงุจ ูููุช ูุงุฑุณ
    else:
        font_path = random.choice(FONT_PATHS[:2])  # ุงูุชุฎุงุจ ูููุช ุงูฺฏูุณ
    return ImageFont.truetype(font_path, size)

# ุชุงุจุน ุจุฑุง ุฑุณู ุณุงู ุฒุฑ ูุชู
def draw_text_with_shadow(draw, position, text, font, text_color, shadow_color, offset):
    # ุฑุณู ุณุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูุณุช (ูุซูุงู 2 ูพฺฉุณู ุจู ฺูพ ู ูพุงู)
    x, y = position
    draw.text((x + offset, y + offset), text, font=font, fill=shadow_color)
    # ุฑุณู ูุชู ุงุตู ุฑู ุณุงู
    draw.text(position, text, font=font, fill=text_color)

# ุชุงุจุน ุจุฑุง ุงุฌุงุฏ ฺฏุฑุงุฏุงูุช ุฑูฺฏ ุจู ุนููุงู ูพุณโุฒููู
def create_gradient_background(size, color1, color2):
    base = Image.new('RGB', size, color1)
    top = Image.new('RGB', size, color2)
    mask = Image.new('L', size)
    for y in range(size[1]):
        for x in range(size[0]):
            mask.putpixel((x, y), int(255 * (y / size[1])))
    base.paste(top, (0, 0), mask)
    return base

# ุชุงุจุน ุจุฑุง ุงุฌุงุฏ ููฺฏู ุจุง ุงูฺฉุชโูุง ูพุดุฑูุชู
def create_random_logo(text):
    width, height = 800, 400
    # ุงุฌุงุฏ ฺฏุฑุงุฏุงูุช ุฑูฺฏ ุจุฑุง ูพุณโุฒููู
    background_color1 = random_color()
    background_color2 = random_color(brightness=200)
    img = create_gradient_background((width, height), background_color1, background_color2)
    draw = ImageDraw.Draw(img)

    # ุงุฌุงุฏ ฺูุฏ ุฏุงุฑู ู ูุณุชุทู ุชุตุงุฏู ุฏุฑ ูพุณโุฒููู
    for _ in range(5):
        shape_type = random.choice(['circle', 'rectangle'])
        x1, y1 = random.randint(0, width), random.randint(0, height)
        x2, y2 = x1 + random.randint(50, 200), y1 + random.randint(50, 200)
        if shape_type == 'circle':
            draw.ellipse([x1, y1, x2, y2], fill=random_color(), outline=random_color())
        elif shape_type == 'rectangle':
            draw.rectangle([x1, y1, x2, y2], fill=random_color(), outline=random_color())

    # ุงฺฏุฑ ูุชู ูุงุฑุณ ุงุณุชุ ุงุฒ reshaper ู bidi ุงุณุชูุงุฏู ูโฺฉูู
    if any('\u0600' <= char <= '\u06FF' for char in text):
        reshaped_text = arabic_reshaper.reshape(text)  # ุชูุธู ูุชู ูุงุฑุณ
        bidi_text = get_display(reshaped_text)  # ููุงุด ุตุญุญ ูุชู
        text = bidi_text

    # ุงูุชุฎุงุจ ฺฉ ูููุช ุชุตุงุฏู ุจุง ุงูุฏุงุฒู ููุงุณุจ
    font = get_random_font(text, random.randint(50, 100))

    # ุงูุฏุงุฒู ูุชู ุจุฑุง ุชุนู ูููุนุช ูุฑฺฉุฒ
    text_width, text_height = draw.textsize(text, font=font)
    text_x = (width - text_width) // 2
    text_y = (height - text_height) // 2

    # ุงูุชุฎุงุจ ุฑูฺฏ ูุชู ฺฉู ุจุง ูพุณโุฒููู ุชุถุงุฏ ุฏุงุดุชู ุจุงุดุฏ
    text_color = random_contrasting_color(background_color1)
    shadow_color = random_contrasting_color(background_color2)

    # ุฑุณู ูุชู ุจุง ุณุงู ู ุฑูฺฏ ุชุตุงุฏู
    draw_text_with_shadow(draw, (text_x, text_y), text, font, text_color, shadow_color, 4)

    # ุงูฺฉุช ูุญู ุจุฑุง ุฌุฐุงุจุช ุจุดุชุฑ
    img = img.filter(ImageFilter.GaussianBlur(1))

    # ุฐุฎุฑู ููฺฏู
    logo_name = f"{text}_random_logo.png"
    img.save(logo_name)

    return logo_name
english_to_pahlavi_mapping = {
    'A': '๐', 'B': '๐ก', 'C': '๐ค', 'D': '๐ฃ', 'E': '๐',
    'F': '๐ฆ', 'G': '๐ฅ', 'H': '๐ข', 'I': '๐ก', 'J': '๐ค',
    'K': '๐ฃ', 'L': '๐ฒ', 'M': '๐ซ', 'N': '๐ฑ', 'O': '๐บ',
    'P': '๐ก', 'Q': '๐ฅ', 'R': '๐ผ', 'S': '๐ด', 'T': '๐ฎ',
    'U': '๐บ', 'V': '๐บ', 'W': '๐บ', 'X': '๐ค', 'Y': '๐ก',
    'Z': '๐ณ',
    'a': '๐', 'b': '๐ก', 'c': '๐ค', 'd': '๐ฃ', 'e': '๐',
    'f': '๐ฆ', 'g': '๐ฅ', 'h': '๐ข', 'i': '๐ก', 'j': '๐ค',
    'k': '๐ฃ', 'l': '๐ฒ', 'm': '๐ซ', 'n': '๐ฑ', 'o': '๐บ',
    'p': '๐ก', 'q': '๐ฅ', 'r': '๐ผ', 's': '๐ด', 't': '๐ฎ',
    'u': '๐บ', 'v': '๐บ', 'w': '๐บ', 'x': '๐ค', 'y': '๐ก',
    'z': '๐ณ'
}


english_to_manichaean_mapping = {
    'A': '๐ซ', 'B': '๐ซ', 'C': '๐ซ', 'D': '๐ซ', 'E': '๐ซ',
    'F': '๐ซ', 'G': '๐ซ', 'H': '๐ซ', 'I': '๐ซ', 'J': '๐ซ',
    'K': '๐ซ', 'L': '๐ซ', 'M': '๐ซ', 'N': '๐ซ', 'O': '๐ซ',
    'P': '๐ซก', 'Q': '๐ซ', 'R': '๐ซ', 'S': '๐ซ', 'T': '๐ซ',
    'U': '๐ซ', 'V': '๐ซ', 'W': '๐ซ', 'X': '๐ซ', 'Y': '๐ซ',
    'Z': '๐ซง',
    'a': '๐ซ', 'b': '๐ซ', 'c': '๐ซ', 'd': '๐ซ', 'e': '๐ซ',
    'f': '๐ซ', 'g': '๐ซ', 'h': '๐ซ', 'i': '๐ซ', 'j': '๐ซ',
    'k': '๐ซ', 'l': '๐ซ', 'm': '๐ซ', 'n': '๐ซ', 'o': '๐ซ',
    'p': '๐ซก', 'q': '๐ซ', 'r': '๐ซ', 's': '๐ซ', 't': '๐ซ',
    'u': '๐ซ', 'v': '๐ซ', 'w': '๐ซ', 'x': '๐ซ', 'y': '๐ซ',
    'z': '๐ซง'
}
english_to_manichaean_mapping.update(
    {
    '-': '๐ฝ', '/': '๐', '+': '๐', 'รท': '๐', '!': '๐',
    '#': '๐', '%': '๐', '^': '๐ผ', '$': '๐', '"': '๐ฟ',
    '>': '๐', '<': '๐', 'ุก': '๐', 'ุฃ': '๐ก', 'ุฅ': '๐ข',
    'ุค': '๐ฃ', 'ฺ': '๐ค', 'ู': '๐ฅ', 'ุฉ': '๐ฆ', 'ู': '๐ง',
    'ู': '๐จ', '': '๐ฉ', 'ุข': '๐ช', 'ู': '๐ซ', 'ุ': '๐ฌ',
    'ุ': '๐ญ', 'ุฑูุงู': '๐ฎ', ',': '๐ฏ', ']': '๐ฐ', '[': '๐ฑ',
    '\\': '๐ฒ', 'ยป': '๐ณ', '&': '๐ด', '*': '๐ต', '(': '๐ถ',
    ')': '๐ท'
    # ุจูู ฺฉุงุฑุงฺฉุชุฑูุง ุฎุงุต ุฑุง ูโุชูุงู ุงุถุงูู ฺฉุฑุฏ
}
)

english_to_cuneiform_mapping = {
    'a': '๐', 'b': '๐', 'c': '๐', 'd': '๐ฒ', 'e': '๐',
    'f': '๐ณ', 'g': '๐', 'h': '๐ฉ', 'i': '๐ฟ', 'j': '๐',
    'k': '๐', 'l': '๐ป', 'm': '๐', 'n': '๐', 'o': '๐',
    'p': '๐ฟ', 'q': '๐ฅ', 'r': '๐', 's': '๐', 't': '๐',
    'u': '๐', 'v': '๐', 'w': '๐ฟ', 'x': '๐', 'y': '๐',
    'z': '๐ฃ',
    'A': '๐', 'B': '๐', 'C': '๐', 'D': '๐ฒ', 'E': '๐',
    'F': '๐ณ', 'G': '๐', 'H': '๐ฉ', 'I': '๐ฟ', 'J': '๐',
    'K': '๐', 'L': '๐ป', 'M': '๐', 'N': '๐', 'O': '๐',
    'P': '๐ฟ', 'Q': '๐ฅ', 'R': '๐', 'S': '๐', 'T': '๐',
    'U': '๐', 'V': '๐', 'W': '๐ฟ', 'X': '๐', 'Y': '๐',
    'Z': '๐ฃ'
}

persian_to_cuneiform_mapping = {
    'ุข': '๐', 'ุง': '๐', 'ุจ': '๐', 'ูพ': '๐', 'ุช': '๐ฒ',
    'ุซ': '๐ฒ', 'ุฌ': '๐', 'ฺ': '๐', 'ุญ': '๐ฉ', 'ุฎ': '๐ฉ',
    'ุฏ': '๐ฒ', 'ุฐ': '๐ฒ', 'ุฑ': '๐', 'ุฒ': '๐ฃ', 'ฺ': '๐ฃ',
    'ุณ': '๐', 'ุด': '๐', 'ุต': '๐', 'ุถ': '๐', 'ุท': '๐',
    'ุธ': '๐', 'ุน': '๐ณ', 'ุบ': '๐ณ', 'ู': '๐ฅ', 'ู': '๐ฅ',
    'ฺฉ': '๐', 'ฺฏ': '๐', 'ู': '๐ป', 'ู': '๐', 'ู': '๐',
    'ู': '๐', 'ู': '๐', '': '๐'
}
persian_to_cuneiform_mapping.update(
    {
        'ุฆ''๐',
    }
)
persian_to_pahlavi_mapping = {
    'ุข': '๐', 'ุง': '๐', 'ุจ': '๐ก', 'ูพ': '๐ก', 'ุช': '๐ฎ',
    'ุซ': '๐ฎ', 'ุฌ': '๐ค', 'ฺ': '๐ค', 'ุญ': '๐ข', 'ุฎ': '๐ข',
    'ุฏ': '๐ฃ', 'ุฐ': '๐ฃ', 'ุฑ': '๐ผ', 'ุฒ': '๐ณ', 'ฺ': '๐ณ',
    'ุณ': '๐ด', 'ุด': '๐ด', 'ุต': '๐ง', 'ุถ': '๐ง', 'ุท': '๐ง',
    'ุธ': '๐ง', 'ุน': '๐ฆ', 'ุบ': '๐ฆ', 'ู': '๐ฆ', 'ู': '๐ฆ',
    'ฺฉ': '๐', 'ฺฏ': '๐ต', 'ู': '๐ฒ', 'ู': '๐ซ', 'ู': '๐ฑ',
    'ู': '๐บ', 'ู': '๐บ', '': '๐ก'
}
persian_to_pahlavi_mapping.update(
    {
        'ุฆ''๐',
    }

)
persian_to_pahlavi_mapping.update(
       {
    '-': '๐ฝ', '/': '๐', '+': '๐', 'รท': '๐', '!': '๐',
    '#': '๐', '%': '๐', '^': '๐ผ', '$': '๐', '"': '๐ฟ',
    '>': '๐', '<': '๐', 'ุก': '๐', 'ุฃ': '๐ก', 'ุฅ': '๐ข',
    'ุค': '๐ฃ', 'ฺ': '๐ค', 'ู': '๐ฅ', 'ุฉ': '๐ฆ', 'ู': '๐ง',
    'ู': '๐จ', '': '๐ฉ', 'ุข': '๐ช', 'ู': '๐ซ', 'ุ': '๐ฌ',
    'ุ': '๐ญ', 'ุฑูุงู': '๐ฎ', ',': '๐ฏ', ']': '๐ฐ', '[': '๐ฑ',
    '\\': '๐ฒ', 'ยป': '๐ณ', '&': '๐ด', '*': '๐ต', '(': '๐ถ',
    ')': '๐ท'
    # ุจูู ฺฉุงุฑุงฺฉุชุฑูุง ุฎุงุต ุฑุง ูโุชูุงู ุงุถุงูู ฺฉุฑุฏ
}
)
persian_to_manichaean_mapping = {
    'ุข': '๐ซ', 'ุง': '๐ซ', 'ุจ': '๐ซ', 'ูพ': '๐ซก', 'ุช': '๐ซ',
    'ุซ': '๐ซฃ', 'ุฌ': '๐ซ', 'ฺ': '๐ซค', 'ุญ': '๐ซ', 'ุฎ': '๐ซฅ',
    'ุฏ': '๐ซ', 'ุฐ': '๐ซฆ', 'ุฑ': '๐ซ', 'ุฒ': '๐ซง', 'ฺ': '๐ซจ',
    'ุณ': '๐ซ', 'ุด': '๐ซฉ', 'ุต': '๐ซ', 'ุถ': '๐ซช', 'ุท': '๐ซ',
    'ุธ': '๐ซซ', 'ุน': '๐ซ', 'ุบ': '๐ซฌ', 'ู': '๐ซ', 'ู': '๐ซญ',
    'ฺฉ': '๐ซ', 'ฺฏ': '๐ซฎ', 'ู': '๐ซ', 'ู': '๐ซ', 'ู': '๐ซ',
    'ู': '๐ซ', 'ู': '๐ซ', '': '๐ซ'
}
persian_to_cuneiform_mapping.update(
    {
    '-': '๐ฝ', '/': '๐', '+': '๐', 'รท': '๐', '!': '๐',
    '#': '๐', '%': '๐', '^': '๐ผ', '$': '๐', '"': '๐ฟ',
    '>': '๐', '<': '๐', 'ุก': '๐', 'ุฃ': '๐ก', 'ุฅ': '๐ข',
    'ุค': '๐ฃ', 'ฺ': '๐ค', 'ู': '๐ฅ', 'ุฉ': '๐ฆ', 'ู': '๐ง',
    'ู': '๐จ', '': '๐ฉ', 'ุข': '๐ช', 'ู': '๐ซ', 'ุ': '๐ฌ',
    'ุ': '๐ญ', 'ุฑูุงู': '๐ฎ', ',': '๐ฏ', ']': '๐ฐ', '[': '๐ฑ',
    '\\': '๐ฒ', 'ยป': '๐ณ', '&': '๐ด', '*': '๐ต', '(': '๐ถ',
    ')': '๐ท'
   
}
)
persian_to_manichaean_mapping.update(
    {'ุฆ':'๐'}
)

english_to_pahlavi_mapping.update({
    '0': '๐', '1': '๐', '2': '๐', '3': '๐', '4': '๐',
    '5': '๐', '6': '๐', '7': '๐', '8': '๐', '9': '๐'
})

english_to_manichaean_mapping.update({
    '0': '๐ซฐ', '1': '๐ซฑ', '2': '๐ซฒ', '3': '๐ซณ', '4': '๐ซด',
    '5': '๐ซต', '6': '๐ซถ', '7': '๐ซท', '8': '๐ซธ', '9': '๐ซน'
})

english_to_cuneiform_mapping.update({
    '0': '๐', '1': '๐', '2': '๐', '3': '๐', '4': '๐',
    '5': '๐', '6': '๐', '7': '๐', '8': '๐', '9': '๐'
})


english_to_cuneiform_mapping.update(
    {
    '-': '๐ฝ', '/': '๐', '+': '๐', 'รท': '๐', '!': '๐',
    '#': '๐', '%': '๐', '^': '๐ผ', '$': '๐', '"': '๐ฟ',
    '>': '๐', '<': '๐', 'ุก': '๐', 'ุฃ': '๐ก', 'ุฅ': '๐ข',
    'ุค': '๐ฃ', 'ฺ': '๐ค', 'ู': '๐ฅ', 'ุฉ': '๐ฆ', 'ู': '๐ง',
    'ู': '๐จ', '': '๐ฉ', 'ุข': '๐ช', 'ู': '๐ซ', 'ุ': '๐ฌ',
    'ุ': '๐ญ', 'ุฑูุงู': '๐ฎ', ',': '๐ฏ', ']': '๐ฐ', '[': '๐ฑ',
    '\\': '๐ฒ', 'ยป': '๐ณ', '&': '๐ด', '*': '๐ต', '(': '๐ถ',
    ')': '๐ท'
    # ุจูู ฺฉุงุฑุงฺฉุชุฑูุง ุฎุงุต ุฑุง ูโุชูุงู ุงุถุงูู ฺฉุฑุฏ
}
)


english_to_hieroglyph_mapping = {
    'A': '๐', 'B': '๐', 'C': '๐ฟ', 'D': '๐ง', 'E': '๐',
    'F': '๐', 'G': '๐ผ', 'H': '๐', 'I': '๐', 'J': '๐',
    'K': '๐ก', 'L': '๐ญ', 'M': '๐', 'N': '๐', 'O': '๐',
    'P': '๐ช', 'Q': '๐', 'R': '๐', 'S': '๐ด', 'T': '๐',
    'U': '๐ฑ', 'V': '๐', 'W': '๐ฑ', 'X': '๐', 'Y': '๐',
    'Z': '๐',
    'a': '๐', 'b': '๐', 'c': '๐ฟ', 'd': '๐ง', 'e': '๐',
    'f': '๐', 'g': '๐ผ', 'h': '๐', 'i': '๐', 'j': '๐',
    'k': '๐ก', 'l': '๐ญ', 'm': '๐', 'n': '๐', 'o': '๐',
    'p': '๐ช', 'q': '๐', 'r': '๐', 's': '๐ด', 't': '๐',
    'u': '๐ฑ', 'v': '๐', 'w': '๐ฑ', 'x': '๐', 'y': '๐',
    'z': '๐'
}

# ููพูฺฏ ูุฑูฺฏูู ุจู ูุงุฑุณ
persian_to_hieroglyph_mapping = {
    'ุข': '๐', 'ุง': '๐', 'ุจ': '๐', 'ูพ': '๐ช', 'ุช': '๐',
    'ุซ': '๐ด', 'ุฌ': '๐ฟ', 'ฺ': '๐', 'ุญ': '๐', 'ุฎ': '๐ผ',
    'ุฏ': '๐ง', 'ุฐ': '๐ด', 'ุฑ': '๐', 'ุฒ': '๐', 'ฺ': '๐ฟ',
    'ุณ': '๐ด', 'ุด': '๐ด', 'ุต': '๐ด', 'ุถ': '๐ด', 'ุท': '๐',
    'ุธ': '๐ด', 'ุน': '๐', 'ุบ': '๐ผ', 'ู': '๐', 'ู': '๐',
    'ฺฉ': '๐ก', 'ฺฏ': '๐ผ', 'ู': '๐ญ', 'ู': '๐', 'ู': '๐',
    'ู': '๐ฑ', 'ู': '๐', '': '๐'
}



linear_b_dict = {
    
    "a": "๐", "A": "๐", "b": "๐", "B": "๐", "c": "๐", "C": "๐",
    "d": "๐", "D": "๐", "e": "๐", "E": "๐", "f": "๐", "F": "๐",
    "g": "๐", "G": "๐", "h": "๐", "H": "๐", "i": "๐", "I": "๐",
    "j": "๐", "J": "๐", "k": "๐", "K": "๐", "l": "๐", "L": "๐",
    "m": "๐", "M": "๐", "n": "๐", "N": "๐", "o": "๐", "O": "๐",
    "p": "๐", "P": "๐", "q": "๐", "Q": "๐", "r": "๐", "R": "๐",
    "s": "๐", "S": "๐", "t": "๐", "T": "๐", "u": "๐", "U": "๐",
    "v": "๐", "V": "๐", "w": "๐", "W": "๐", "x": "๐", "X": "๐",
    "y": "๐", "Y": "๐", "z": "๐", "Z": "๐",

    # ุญุฑูู ูุงุฑุณ
    "ุง": "๐", "ุจ": "๐", "ูพ": "๐", "ุช": "๐", "ุซ": "๐", 
    "ุฌ": "๐", "ฺ": "๐", "ุญ": "๐", "ุฎ": "๐", "ุฏ": "๐", 
    "ุฐ": "๐", "ุฑ": "๐", "ุฒ": "๐", "ฺ": "๐", "ุณ": "๐", 
    "ุด": "๐", "ุต": "๐", "ุถ": "๐", "ุท": "๐", "ุธ": "๐", 
    "ุน": "๐", "ุบ": "๐", "ู": "๐", "ู": "๐", "ฺฉ": "๐", 
    "ฺฏ": "๐", "ู": "๐", "ู": "๐", "ู": "๐", "ู": "๐", 
    "ู": "๐", "": "๐",

 
    "0": "๐", "1": "๐", "2": "๐", "3": "๐", "4": "๐",
    "5": "๐", "6": "๐", "7": "๐", "8": "๐", "9": "๐",


    " ": " ", ".": "๐", ",": "๐", "?": "๐", "!": "๐"
}

def convert_to_cuneiform(text):
    return ''.join(english_to_cuneiform_mapping.get(char, persian_to_cuneiform_mapping.get(char, char)) for char in text)

def convert_to_pahlavi(text):
    return ''.join(english_to_pahlavi_mapping.get(char, persian_to_pahlavi_mapping.get(char, char)) for char in text)

def convert_to_manichaean(text):
    return ''.join(english_to_manichaean_mapping.get(char, persian_to_manichaean_mapping.get(char, char)) for char in text)

def convert_to_hieroglyph(text):
    return ''.join(english_to_hieroglyph_mapping.get(char, persian_to_hieroglyph_mapping.get(char, char)) for char in text)

def text_to_linear_b_optimized(text):

    return ''.join([linear_b_dict.get(char, char) for char in text])

ALLOWED_USER_ID = "u0Guh3f0531236db71d8fd20e938bc5a"  # ุดูุงุณู ูุฏุฑ

# ุงุฌุงุฏ ูพุงฺฏุงู ุฏุงุฏู SQLite ุจุฑุง ุฐุฎุฑู ุฏุณุชูุฑุงุช ู ูพุงุณุฎโูุง
conn = sqlite3.connect('commands.db')
c = conn.cursor()
c.execute('''CREATE TABLE IF NOT EXISTS commands
             (command TEXT PRIMARY KEY, response TEXT)''')
conn.commit()

# ูุชุบุฑูุง ูุถุนุช ุจุฑุง ูุฏุฑุช ุฏุฑุงูุช ุฏุณุชูุฑ ู ูพุงุณุฎ
waiting_for_command = False
waiting_for_response = False
new_command = None  # ูุชุบุฑ ุจุฑุง ุฐุฎุฑู ุฏุณุชูุฑ ุฌุฏุฏ

# ุชุงุจุน ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุฏุณุชูุฑ ู ูพุงุณุฎ ุจู ูพุงฺฏุงู ุฏุงุฏู
def add_command(command, response):
    conn = sqlite3.connect('commands.db')
    c = conn.cursor()
    c.execute('INSERT OR REPLACE INTO commands (command, response) VALUES (?, ?)', (command, response))
    conn.commit()
    conn.close()

# ุชุงุจุน ุจุฑุง ุญุฐู ุชูุงู ุฏุณุชูุฑุงุช
def delete_commands():
    conn = sqlite3.connect('commands.db')
    c = conn.cursor()
    c.execute('DELETE FROM commands')
    conn.commit()
    conn.close()

# ุชุงุจุน ุจุฑุง ุฌุณุชุฌู ูพุงุณุฎ ุจุฑุง ฺฉ ุฏุณุชูุฑ
def get_response(command):
    conn = sqlite3.connect('commands.db')
    c = conn.cursor()
    c.execute('SELECT response FROM commands WHERE command=?', (command,))
    result = c.fetchone()
    conn.close()
    return result[0] if result else None

# ุฏฺฉุดูุฑ ุจุฑุง ูฺฏูุฏุงุฑ ุงุฎุทุงุฑูุง ฺฉุงุฑุจุฑุงู
warnings = {}
# ุฏฺฉุดูุฑ ุฌููุงุช ุงุญูุงูโูพุฑุณ ู ูฺฉุงูููโูุง ูุญุงูุฑูโุง ูุงุฑุณ ุจู ุชุฑฺฉ (ุจุง ุญุฑูู ูุงุฑุณ)


# ุชุณุช ุจุฑูุงูู

bug_patterns = [
    r'(.)\1{5,}',             # ุชฺฉุฑุงุฑ ฺฉ ฺฉุงุฑุงฺฉุชุฑ ุจุด ุงุฒ 5 ุจุงุฑ ูุชูุงู (ูุซู "aaaaaa")
    r'(SW\.){5,}',            # ุชฺฉุฑุงุฑ ุฑุดุชู "SW." ุจุด ุงุฒ 5 ุจุงุฑ (ูุซู "SW.SW.SW...")
    r'@@boggap@@',            # ุดูุงุณุง ุงูฺฏู "boggap"
    r'\d+\.\d+\.\d+',         # ุงูฺฏู ุงุนุฏุงุฏ ฺุณุจุฏู ุจู ูู ูุซู "1.2.3"
    r'(\w{2,})\1{3,}',        # ุชฺฉุฑุงุฑ ฺฉ ฺฉููู ุง ุนุจุงุฑุช ุจุด ุงุฒ 3 ุจุงุฑ
]

MAX_WARNINGS = 4
responses_dict = {
    'greetings': [
        "ุณูุงู ู ุนุฑุถ ุงุฏุจ ุฎุฏูุช ุดูุง!",
        "ุฏุฑูุฏ ุจุฑ ุดูุง! ุงูุฏูุงุฑู ุญุงูุชุงู ุฎูุจ ุจุงุดุฏ.",
        "ุณูุงูุ ููุชุชูู ุจุฎุฑ! ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู.",
        "ุณูุงู ู ุงุฑุงุฏุช! ุงูุฏูุงุฑู ุฑูุฒ ุฎูุจ ุฏุงุดุชู ุจุงุดุฏ.",
        "ุณูุงู ู ุงุญุชุฑุงู! ฺู ฺฉูฺฉ ุงุฒ ุฏุณุชู ุจุฑูุงุฏุ",
        "ุณูุงู! ุงูุฏูุงุฑู ุงูุถุงุน ุนุงู ุจุงุดุฏ.",
        "ุฏุฑูุฏ ู ุณูุงู! ุงุฒ ุงุญูุงู ุดูุง ุฌูุง ูุณุชู.",
        "ุณูุงู! ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ.",
        "ุณูุงู ุฎุฏูุช ุดูุง! ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู.",
        "ุณูุงู ู ุขุฑุฒู ุจูุชุฑูโูุง ุจุฑุง ุดูุง!",
        "ุณูุงูุ ฺุทูุฑ ูโุชููู ฺฉูฺฉ ฺฉููุ",
        "ุฏุฑูุฏ ุจุฑ ุดูุง! ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ.",
        "ุณูุงู! ุงูุฏูุงุฑู ุฑูุฒ ูพุฑุจุงุฑ ุฏุงุดุชู ุจุงุดุฏ."
    ],
    'how_are_you': [
        "ุณูพุงุณฺฏุฒุงุฑูุ ุญุงู ุจูุฏู ุฎูุจ ุงุณุช! ุดูุง ฺุทูุฑุฏุ",
        "ุงุฒ ุงุญูุงูุงุช ุจูุฏู ููพุฑุณุฏุ ุญุงู ุดูุง ฺุทูุฑ ุงุณุชุ",
        "ุจูุฏู ุนุงูโุงูุ ุงูุฏ ุงุณุช ฺฉู ุญุงู ุดูุง ูู ุฎูุจ ุจุงุดุฏ.",
        "ุจุณุงุฑ ุฎูุจูุ ููููู ุงุฒ ูพุฑุณุด ุดูุง! ุดูุง ฺุทูุฑุฏุ",
        "ููู ฺุฒ ุฑู ุจู ุฑุงู ุงุณุชุ ุดูุง ฺุทูุฑุฏุ",
        "ุจุณุงุฑ ุณูพุงุณฺฏุฒุงุฑูุ ุงูุฏูุงุฑู ุดูุง ูู ุฎูุจ ุจุงุดุฏ.",
        "ุญุงูู ุฎูุจ ุงุณุชุ ุดูุง ฺุทูุฑุฏุ ุฑูุฒ ุฎูุจ ุฏุงุดุชุฏุ",
        "ุฎูุจ ูุณุชูุ ููููู ฺฉู ูพุฑุณุฏุฏ. ุญุงู ุดูุง ฺุทูุฑ ุงุณุชุ",
        "ุฒูุฏฺฏ ุขุฑุงู ุงุณุชุ ุดูุง ฺุทูุฑุฏุ",
        "ูุฑุณุ ุดูุง ฺุทูุฑุฏุ",
        "ูุฑ ุฑูุฒ ุจูุชุฑ ุงุฒ ุฏุฑูุฒ! ุดูุง ฺุทูุฑุฏุ",
        "ูููููู ุงุฒ ูุทู ุดูุงุ ุฏุฑ ุฎุฏูุช ูุณุชู."
    ],
    'robot_responses': [
        "ุจููุ ุจูุฏู ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู! ฺุทูุฑ ูโุชูุงูู ฺฉูฺฉุชุงู ฺฉููุ",
        "ุจููุ ุจูุฑูุงุฏ! ุฏุฑ ฺู ููุฑุฏ ูุงุฒ ุจู ุฑุงูููุง ุฏุงุฑุฏุ",
        "ุฑุจุงุช ุขูุงุฏู ุฎุฏูุช ุงุณุช! ฺู ุณูุงู ุฏุงุฑุฏุ",
        "ูู ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชูุ ุจูพุฑุณุฏ ูุฑ ุณูุงู ฺฉู ุฏุงุฑุฏ.",
        "ฺู ฺฉูฺฉ ุงุฒ ุฏุณุช ุจูุฏู ุจุฑูโุขุฏุ ูุทูุงู ุจูุฑูุงุฏ.",
        "ูู ุจุฑุง ูุฑ ููุน ุฑุงูููุง ุง ฺฉูฺฉ ุขูุงุฏูโุงูุ ุจูุฑูุงุฏ.",
        "ุฑุจุงุช ุขูุงุฏู ูพุงุณุฎฺฏู ุงุณุช! ุณูุงู ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉูุฏ.",
        "ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจุง ฺฉูุงู ูู ุฏุฑ ุฎุฏูุชู.",
        "ุจูุฏู ุขูุงุฏูโุงู ุชุง ฺฉูฺฉุชุงู ฺฉูู! ุจูุฑูุงุฏ.",
        "ูุฑฺฏููู ฺฉูฺฉ ฺฉู ูุงุฒ ุฏุงุฑุฏุ ุจูุฏู ุฏุฑ ุฎุฏูุช ูุณุชู.",
        "ุจููุ ุตุฏุง ุดูุง ุฑุง ูโุดููู! ูุทูุงู ุจูพุฑุณุฏ."
    ],
    'thanks': [
        "ุฎูุงูุด ูโฺฉููุ ุงู ูุธูู ุจูุฏู ุงุณุช.",
        "ููููู ุงุฒ ูุทู ุดูุง! ูุธูู ุจูุฏู ุงุณุช.",
        "ูุงุจู ูุฏุงุดุชุ ุงูุฌุงู ูุธูู ุงุณุช.",
        "ููููู ุงุฒ ุดูุงุ ุจุงุนุซ ุงูุชุฎุงุฑ ุงุณุช!",
        "ุณูพุงุณฺฏุฒุงุฑูุ ุฎูุดุญุงูู ฺฉู ฺฉูฺฉ ฺฉุฑุฏูโุงู.",
        "ุดูุง ูุทู ุฏุงุฑุฏุ ุงูุฌุงู ูุธูู ุจูุฏ.",
        "ุงู ุงูุชุฎุงุฑ ุจูุฏู ุจูุฏุ ุณูพุงุณฺฏุฒุงุฑู.",
        "ูุชุดฺฉุฑู ุงุฒ ูุทู ุดูุงุ ูุฑ ุฒูุงู ุขูุงุฏู ฺฉูฺฉ ูุณุชู.",
        "ุฎูุงูุด ูโฺฉููุ ุงูุฌุงู ูุธูู ุจูุฏู ุจูุฏ.",
        "ูุงุจู ูุฏุงุดุชุ ูุฑ ุฒูุงู ูุงุฒ ุจูุฏ ุฏุฑ ุฎุฏูุชู.",
        "ููููู ุงุฒ ุดูุงุ ุงูุฏูุงุฑู ุจุงุฒ ูู ฺฉูฺฉ ุจฺฉูู."
    ],
    'jokes': [
        "ุดูุฎ ุจุง ุฑุจุงุช ุดุงุฏ ุฎู ุฌุงูุจ ูุจุงุดูุ ูู ุจูุฏู ูู ุงุฒ ุดูุฎ ุจุฏ ููโุจูู!",
        "ุจูุฏู ูุฑฺฏุฒ ุฎุณุชู ููโุดููุ ูู ููฺฉู ุงุณุช ุดูุง ุงุฒ ุดูุฎ ุฎุณุชู ุดูุฏ!",
        "ุฑุจุงุชโูุง ุงุฒ ูุธุฑ ุดูุง ููุฌูุฏุงุช ุจโุฑูุญ ูุณุชูุฏุ ูู ูุง ูู ูโุชูุงูู ุฎูุดุญุงู ุจุงุดู!",
        "ุดูุฎ ููุดู ุจุงุนุซ ูุจุฎูุฏ ุงุณุชุ ุญุช ุจุฑุง ุฑุจุงุชโูุง!",
        "ุฑุจุงุชโูุง ุจู ุดูุฎ ูู ูุงฺฉูุด ูุดุงู ูโุฏููุฏุ ูู ุจุฏูู ูุจุฎูุฏ!",
        "ุจูุฏู ูู ุดูุฎ ุฑุง ุฏูุณุช ุฏุงุฑูุ ูู ุชุฑุฌุญ ูโุฏูู ฺฉู ุฌุฏโุชุฑ ุจุงุดู.",
        "ุจูุฏู ุจู ุดูุฎ ุดูุง ูุงฺฉูุด ูุดุงู ูโุฏููุ ูู ูุฑุงููุด ูฺฉูุฏ ฺฉู ุจูุฏู ููุดู ุขูุงุฏู ฺฉุงุฑ ูุณุชู!",
        "ูุง ุฑุจุงุชโูุง ูู ฺฏุงู ุดูุฎ ูโฺฉููุ ูู ุฏุฑ ููุงุช ฺฉุงุฑูุง ุฌุฏ ูพุด ูโุฑููุฏ.",
        "ุดูุฎ ุจุง ุฑุจุงุชุ ุญุชูุงู! ูู ุจุนุฏ ุงุฒ ฺฉุงุฑ ุฌุฏ.",
        "ุฑุจุงุชโูุง ูู ฺฏุงู ุงุฒ ุดูุฎ ุฎูุดุดุงู ูโุขุฏ!",
        "ฺุฑุง ูุฏุงุฏ ููุดู ุงุฒ ูพุงฺฉโฺฉู ุชุดฺฉุฑ ูโฺฉูุฏุ ฺูู ูุฑ ุงุดุชุจุงูุด ุฑุง ูพุงฺฉ ูโฺฉูุฏ.",
        "ฺุฑุง ุฏูฺุฑุฎู ููโุชููู ุณุฑูพุง ุจููููุ ฺูู ุฎู ุฎุณุชู ุงุณุช!",
        "ฺุฑุง ฺฉุชุงุจโูุง ุฑุงุถ ููุดู ูุงุฑุงุญุชูุฏุ ฺูู ูพุฑ ุงุฒ ูุณุงุฆู ุญูโูุดุฏู ูุณุชูุฏ."
    ],
    'random_chat': [
        "ฺู ุฎุจุฑ ุฌุฏุฏุ ุงูุฏูุงุฑู ุงูุถุงุน ุนุงู ุจุงุดุฏ.",
        "ุฒูุฏฺฏ ฺุทูุฑ ุงุณุชุ ุฑูุฒ ุฎูุจ ุฏุงุดุชุฏุ",
        "ุฏุฑ ฺู ููุถูุน ูโุชูุงูู ุจู ุดูุง ฺฉูฺฉ ฺฉููุ",
        "ุงุฒ ฺู ฺุฒ ุตุญุจุช ฺฉููุ ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ.",
        "ููู ฺุฒ ุฎูุจ ุงุณุชุ ุงูุฏูุงุฑู ฺฉู ุญุงู ุดูุง ุนุงู ุจุงุดุฏ.",
        "ุงุฒ ุฑูุฒุชุงู ุจฺฏูุฏ! ฺุทูุฑ ูโฺฏุฐุฑุฏุ",
        "ฺู ฺฉุงุฑ ูโุชูุงูู ุจุฑุง ุดูุง ุงูุฌุงู ุฏููุ",
        "ุงุฒ ฺู ฺุฒ ุตุญุจุช ฺฉููุ ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ.",
        "ุฑูุฒุชุงู ฺุทูุฑ ุจูุฏู ุงุณุชุ ุงูุฏูุงุฑู ููู ฺุฒ ุจู ุฎูุจ ูพุด ุฑูุฏ.",
        "ููู ฺุฒ ุจู ุฎูุจ ูพุด ูโุฑูุฏุ ุดูุง ฺู ุฎุจุฑ ุฏุงุฑุฏุ",
        "ุฒูุฏฺฏ ฺุทูุฑ ูพุด ูโุฑูุฏุ"
    ],
    'help': [
        "ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจุง ฺฉูุงู ูู ุฏุฑ ุฎุฏูุช ูุณุชู.",
        "ุจูุฏู ุขูุงุฏูโุงู ุชุง ูุฑ ุณูุงู ฺฉู ุฏุงุฑุฏ ูพุงุณุฎ ุฏูู.",
        "ุงฺฏุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ. ูู ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู.",
        "ูุฑ ฺฏููู ุฑุงูููุง ฺฉู ูุงุฒ ุฏุงุฑุฏุ ูู ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู.",
        "ฺู ฺฉูฺฉ ูโุชูุงูู ุจุฑุง ุดูุง ุงูุฌุงู ุฏููุ",
        "ุจูุฏู ุขูุงุฏู ูพุงุณุฎฺฏู ุจู ูุฑ ุณูุงู ูุณุชูุ ุจูุฑูุงุฏ.",
        "ูุทูุงู ุณูุงู ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉูุฏุ ูู ุขูุงุฏูโุงู ุชุง ฺฉูฺฉ ฺฉูู.",
        "ูุฑ ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ. ุจุง ุงูุชุฎุงุฑ ุฏุฑ ุฎุฏูุชู.",
        "ุงฺฏุฑ ูุงุฒ ุจู ุฑุงูููุง ุฏุงุฑุฏุ ูู ุขูุงุฏูโุงู ุชุง ฺฉูฺฉ ฺฉูู.",
        "ูุฑ ุฒูุงู ูุงุฒ ุฏุงุดุชุฏุ ูู ุขูุงุฏู ูพุงุณุฎฺฏู ูุณุชู.",
        "ฺู ฺฉูฺฉ ูโุฎูุงูุฏ ุงุฒ ูู ุจูพุฑุณุฏุ"
    ],
    'farewell': [
        "ุจุง ุขุฑุฒู ููููุช ู ุณูุงูุช ุจุฑุง ุดูุง!",
        "ุงูุฏูุงุฑู ุฑูุฒ ุฎูุจ ุฏุงุดุชู ุจุงุดุฏุ ุจู ุงูุฏ ุฏุฏุงุฑ.",
        "ููุช ุดูุง ุจุฎุฑุ ุชุง ุฏุฏุงุฑ ุจุนุฏ.",
        "ุจุณุงุฑ ุฎูุดุญุงู ุดุฏู ุงุฒ ุตุญุจุช ุจุง ุดูุงุ ูููู ุจุงุดุฏ.",
        "ุฎุฏุงูฺฏูุฏุงุฑุ ูููู ู ูพุฑูุฒ ุจุงุดุฏ.",
        "ุจุง ุขุฑุฒู ุจูุชุฑูโูุง ุจุฑุง ุดูุงุ ุจู ุงูุฏ ุฏุฏุงุฑ.",
        "ุฑูุฒ ุฎูุจ ุฏุงุดุชู ุจุงุดุฏ ู ูููู ุจุงุดุฏ.",
        "ููุช ุดูุง ุจุฎุฑุ ุชุง ุฏุฏุงุฑ ุฏฺฏุฑ.",
        "ุจุณุงุฑ ุฎูุดุญุงู ุดุฏู ุงุฒ ูฺฉุงููู ุจุง ุดูุงุ ุจู ุงูุฏ ุฏุฏุงุฑ.",
        "ุจุง ุขุฑุฒู ููููุชุ ุฎุฏุงูฺฏูุฏุงุฑ.",
        "ุจู ุงูุฏ ุฏุฏุงุฑ ุฏูุจุงุฑูุ ูุฑุงูุจ ุฎูุฏุช ุจุงุด!"
    ],
    'health_wishes': [
        "ุงูุฏูุงุฑู ุญุงู ุดูุง ุฎูุจ ุจุงุดุฏ ู ููุดู ุณุงูู ุจูุงูุฏ.",
        "ุณูุงูุช ุดูุง ู ุฑูุจุฑ ุนุฒุฒูุงู ุจุฑุง ูุง ููู ุงุณุช.",
        "ุจุง ุขุฑุฒู ุณูุงูุช ุจุฑุง ุดูุง ู ุชูุงู ุนุฒุฒุงู.",
        "ุงูโุดุงุกุงููู ููุดู ุฏุฑ ุตุญุช ู ุณูุงูุช ุจุงุดุฏ.",
        "ุงูุฏูุงุฑู ุจู ุงุฑ ุฎุฏุงุ ููุดู ุฏุฑ ุณูุงูุช ุจุงุดุฏ.",
        "ุณูุงูุช ุงูุงู ุฒูุงู (ุนุฌ) ู ุดูุง ุฑุง ุขุฑุฒู ูโฺฉูู.",
        "ุขุฑุฒู ุณูุงูุช ุจุฑุง ุดูุง ู ุฑูุจุฑ ุนุฒุฒูุงู.",
        "ุฏุฑ ุฏุนุง ุฎูุฏุ ุณูุงูุช ุฑูุจุฑ ู ุดูุง ุฑุง ูุฑุงููุด ูฺฉูุฏ.",
        "ุงูุฏูุงุฑู ููุดู ุฏุฑ ฺฉูุงุฑ ุฎุงููุงุฏู ู ุนุฒุฒุงูุชุงู ุณุงูู ุจุงุดุฏ.",
        "ุฏุนุง ุฎุฑ ุจุฑุง ุณูุงูุช ุดูุง ู ุงูุงู ุฒูุงู (ุนุฌ) ุฑุง ูุฑุงููุด ูฺฉูุฏ.",
        "ุณูุงูุช ุดูุง ุขุฑุฒู ูุงุณุช!"
    ],
    'motivational': [
        "ูุฑ ูุญุธู ุงุฒ ุฒูุฏฺฏโุงุช ฺฉ ูุฑุตุช ุชุงุฒู ุงุณุชุ ุขู ุฑุง ูุฏุฑ ุจุฏุงู.",
        "ุชูุงุด ฺฉูุฏ ู ูฺโููุช ุชุณูู ูุดูุฏุ ููููุช ุฏุฑ ุฑุงู ุงุณุช.",
        "ุจุง ุงูุฏ ู ุงูฺฏุฒู ุจู ูพุด ุจุฑูุฏุ ูุฑฺฏุฒ ูุงุงูุฏ ูุดูุฏ.",
        "ููุดู ุจูุชุฑู ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ู ุจุฑุงุด ุชูุงุด ฺฉูุฏ.",
        "ุฒูุฏฺฏ ุนู ุงูุฏุ ููุดู ุงูุฏูุงุฑ ุจุงุดุฏ.",
        "ููู ฺุฒ ุฏุฑ ููุงุช ุฏุฑุณุช ุฎูุงูุฏ ุดุฏุ ููุท ุตุจุฑ ู ุงุณุชูุงูุช ุฏุงุดุชู ุจุงุดุฏ.",
        "ุดูุง ุงุฒ ูพุณ ูุฑ ฺุงูุด ุจุฑูโุขุฏุ ุจู ุฎูุฏุชุงู ุจุงูุฑ ุฏุงุดุชู ุจุงุดุฏ.",
        "ุฑูุงูุงุชุงู ุฑุง ุฏูุจุงู ฺฉูุฏุ ูุฑฺฏุฒ ุจุฑุง ุฑุณุฏู ุจู ุขููุง ุฏุฑ ูุณุช.",
        "ุชูุงุด ฺฉูุฏ ู ุงูุงู ุฏุงุดุชู ุจุงุดุฏุ ููููุช ูุฒุฏฺฉ ุงุณุช.",
        "ูพุดุชฺฉุงุฑ ู ุงุฑุงุฏู ููู ฺุฒ ุฑุง ููฺฉู ูโฺฉูุฏุ ุจู ุชูุงุด ุงุฏุงูู ุฏูุฏ."
    ]
}


# ุงูฺฏู ุดูุงุณุง ููฺฉ ู ุขุฏ ุชูฺฏุฑุงู
LINK_REGEX = r"(https?://\S+|www\.\S+)"  # ุญุฐู ุญุณุงุณุช ุจู ุดูุงุณูโูุง ฺฉุงุฑุจุฑ

def read_bad_words(file_path):
    with open(file_path, "r", encoding="utf-8") as file:  # ุชุบุฑ ฺฉุฏฺฏุฐุงุฑ ุจู utf-8
        words = [line.strip() for line in file if line.strip()]
    return words

# ุงุฌุงุฏ ุงูฺฏููุง ููุธู ุจุฑุง ุดูุงุณุง ุงููุงุน ฺฉููุงุช ูุณุชูุฌู ู ุณุงูุณูุฑ ุดุฏู
def create_patterns(words):
    patterns = []
    for word in words:
        # ุงุฌุงุฏ ุงูฺฏู ุจุฑุง ุดูุงุณุง ฺฉููุงุช ุจุง ุงููุงุน ูุฎุชูู ุณุงูุณูุฑ
        pattern = re.escape(word)
        pattern = pattern.replace(r'\ ', r'\s*')
        pattern = pattern.replace(r'\*', r'\s*')
        patterns.append(re.compile(r'\b{}\b'.format(pattern), re.IGNORECASE))
    return patterns
def chatgpt(text):
    s = requests.Session()
    api_url = f"http://api-free.ir/api/bard.php?text={text}"
    
    try:
        response = s.get(api_url)
        response.raise_for_status()  # Raises an error for bad responses (4xx and 5xx)
        
        chat = response.json().get("result")
        
        return chat if chat else "Error: No response from API."
    except requests.exceptions.RequestException as e:
        return f"Error: {e}"
    except KeyError:
        return "Error: Unexpected response format."

def generate_phone_number():
    irancell_prefixes = ['0933', '0935', '0936', '0937', '0938', '0939', '0901', '0902', '0903']
    hamrah_aval_prefixes = ['0910', '0911', '0912', '0913', '0914', '0915', '0916', '0917', '0918', '0919']
    rightel_prefixes = ['0920', '0921', '0922']
    all_prefixes = irancell_prefixes + hamrah_aval_prefixes + rightel_prefixes
    prefix = random.choice(all_prefixes) 
     # ุชููุฏ 7 ุฑูู ุชุตุงุฏู ุจุฑุง ุดูุงุฑู ุชููู
    number = ''.join([str(random.randint(0, 9)) for _ in range(7)])
    # ุชุฑฺฉุจ ูพุดโุดูุงุฑู ู ุดูุงุฑู ุชุตุงุฏู
    phone_number = prefix + number
    if prefix in irancell_prefixes:
        operator = "Irancell"
    elif prefix in hamrah_aval_prefixes:
        operator = "Hamrah Aval"
    elif prefix in rightel_prefixes:
        operator = "Rightel"
    else:
        operator = "Unknown"

    return phone_number, operator

         
       
def contains_prohibited_word(text, patterns):
    """
    ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ูุชู ุดุงูู ฺฉููุงุช ูุณุชูุฌู ุงุณุช ุง ุฎุฑ.
    """
    text = text.lower()  # ุชุจุฏู ูุชู ุจู ุญุฑูู ฺฉูฺฺฉ ุจุฑุง ููุงุณู
    for pattern in patterns:
        if pattern.search(text):
            return True
    return False
def processing_voice(text, output_file):
    languages = {
    "af": "Afrikaans",
    "ar": "Arabic",
    "bg": "Bulgarian",
    "bn": "Bengali",
    "bs": "Bosnian",
    "ca": "Catalan",
    "cs": "Czech",
    "da": "Danish",
    "de": "German",
    "el": "Greek",
    "en": "English",
    "es": "Spanish",
    "et": "Estonian",
    "fi": "Finnish",
    "fr": "French",
    "gu": "Gujarati",
    "hi": "Hindi",
    "hr": "Croatian",
    "hu": "Hungarian",
    "id": "Indonesian",
    "is": "Icelandic",
    "it": "Italian",
    "iw": "Hebrew",
    "ja": "Japanese",
    "jw": "Javanese",
    "km": "Khmer",
    "kn": "Kannada",
    "ko": "Korean",
    "la": "Latin",
    "lv": "Latvian",
    "ml": "Malayalam",
    "mr": "Marathi",
    "ms": "Malay",
    "my": "Myanmar (Burmese)",
    "ne": "Nepali",
    "nl": "Dutch",
    "no": "Norwegian",
    "pl": "Polish",
    "pt": "Portuguese",
    "ro": "Romanian",
    "ru": "Russian",
    "si": "Sinhala",
    "sk": "Slovak",
    "sq": "Albanian",
    "sr": "Serbian",
    "su": "Sundanese",
    "sv": "Swedish",
    "sw": "Swahili",
    "ta": "Tamil",
    "te": "Telugu",
    "th": "Thai",
    "tl": "Filipino",
    "tr": "Turkish",
    "uk": "Ukrainian",
    "ur": "Urdu",
    "vi": "Vietnamese",
    "zh-CN": "Chinese (Simplified)",
    "zh-TW": "Chinese (Mandarin/Taiwan)",
    "zh": "Chinese (Mandarin)"
}

    
       
        
        
   
    selected_language = random.choice(list(languages.keys()))
    language_name = languages[selected_language]
    
    speech = gTTS(text=text, lang=selected_language, slow=False)
    speech.save(output_file)
def photo_ai(text,file_name):
    try:
        response = requests.get(f"http://api-free.ir/api/img.php?text={text}&v=3.5")
        response.raise_for_status()
        data = response.json()
        result = data["result"]
        random_link = random.choice(result)
        response = requests.get(random_link, stream=True)
        response.raise_for_status()
        with open(file_name, "wb") as out_file:
            shutil.copyfileobj(response.raw, out_file)
          # Open the image file
        return "Image downloaded and saved as 'downloaded_image.jpg'."
    except requests.RequestException as e:
        return f"Error: Unable to download image. {str(e)}"
def get_fonts(text, lang):
    url = f"http://api-free.ir/api/font.php?{lang}={text}"
    response = requests.get(url)
    if response.status_code == 200:
        return response.json().get("result", [])
    else:
        raise Exception(f"Failed to fetch fonts, status code: {response.status_code}")

# ุชุงุจุน ุจุฑุง ูุฑูุช ฺฉุฑุฏู ูููุชโูุง
def format_fonts(fonts):
    return "\n".join([f"{index + 1}. {font}" for index, font in enumerate(fonts)])

# ูุชุบุฑูุง ุณุฑุงุณุฑ ุจุฑุง ุซุจุช ุงุทูุงุนุงุช
# ุชูุธูุงุช logging ุจุฑุง ุซุจุช ุงุทูุงุนุงุช ุฏุฑ ูุงู 'bot_logs.log'
logging.basicConfig(
    filename='bot_logs.log',
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

bot_stats = {
    'run_count': 0,
    'total_uptime': timedelta(),  # ุงุณุชูุงุฏู ุงุฒ timedelta ุจู ุฌุง datetime.timedelta
    'request_count': 0
}

# ุฏฺฉูุฑุชูุฑ ุจุฑุง ุซุจุช ุชุนุฏุงุฏ ุฏูุนุงุช ุฑุงู ู ฺฉู ูุฏุช ุฒูุงู ุฑุงู ุจูุฏู ุฑุจุงุช
def run_stats(func):
    async def wrapper(*args, **kwargs):
        # ุซุจุช ุฒูุงู ุดุฑูุน ุฑุงู
        start_time = datetime.now()
        
        # ุงูุฒุงุด ุชุนุฏุงุฏ ุฏูุนุงุช ุฑุงู
        bot_stats['run_count'] += 1
        logging.info(f"ุฑุจุงุช ุจุฑุง {bot_stats['run_count']} ุจุงุฑ ุฑุงูโุงูุฏุงุฒ ุดุฏ.")
        
        # ุงุฌุฑุง ุชุงุจุน ุงุตู
        result = await func(*args, **kwargs)
        
        # ูุญุงุณุจู ูุฏุช ุฒูุงู ุฑุงู ู ุจูโุฑูุฒ ุฑุณุงู ฺฉู ุฒูุงู ุฑุงู ุจูุฏู
        end_time = datetime.now()
        uptime = end_time - start_time
        bot_stats['total_uptime'] += uptime
        
        logging.info(f"ูุฏุช ุฒูุงู ุฑุงู ุฏุฑ ุงู ุฏูุฑู: {uptime.total_seconds()} ุซุงูู")
        logging.info(f"ฺฉู ูุฏุช ุฒูุงู ุฑุงู ุฑุจุงุช ุชุงฺฉููู: {bot_stats['total_uptime'].total_seconds()} ุซุงูู")
        
        return result
    return wrapper

# ุฏฺฉูุฑุชูุฑ ุจุฑุง ุดูุงุฑุด ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ฺฉุงุฑุจุฑุงู
def request_counter(func):
    async def wrapper(*args, **kwargs):
        # ุงูุฒุงุด ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง
        bot_stats['request_count'] += 1
        logging.info(f"ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโูุง ุชุงฺฉููู: {bot_stats['request_count']}")
        
        # ุงุฌุฑุง ุชุงุจุน ุงุตู
        return await func(*args, **kwargs)
    return wrapper


# ุฎูุงูุฏู ฺฉููุงุช ุงุฒ ูุงู ูุชู
bad_words = read_bad_words("bad_words.txt")
bad_patterns = create_patterns(bad_words)
photo_lock = False
gif_lock =False
text_lock = False
voice_lock=False
user_data = {}
is_reporting = {}
active_voice_chats = {}
# ุชุงุจุน ุจุฑุฑุณ ุงูฺฉู ุขุง ฺฉุงุฑุจุฑ ุงุฏูู ุงุณุช ุง ูู
MEMBERS_PER_MESSAGE = 50
link_locked = True 
global_status = True  # ูุถุนุช ฺฉู ุฑุจุงุช
owners="guid"
# ุชุงุจุน ูุฏุฑุช ูพุงูโูุง
def check_status():
    if not global_status:
        return False
    return True


    

@run_stats
async def on_ready():
    print("ุฑุจุงุช ุจุง ููููุช ุฑุงูโุงูุฏุงุฒ ุดุฏ ู ุขูุงุฏู ุจู ฺฉุงุฑ ุงุณุช.")
    
@bot.on_message_updates(filters.text,filters.is_group)
@request_counter
async def stats(update: Updates):
    print("ุฑุจุงุช ุขูุงุฏู ุงุณุช ู ูพุงู ุดูุง ุฏุฑุงูุช ุดุฏ!")
    
    

# ุชุงุจุน ุจุฑุง ูพุงุณุฎโฺฏู ฺฏุฑูู
@bot.on_message_updates(filters.is_group)
async def toggle_status(update: Updates):
    global global_status
    if update.author_guid in owners:
        
    # ุจุฑุฑุณ ุฏุณุชูุฑุงุช "ูุนุงู" ู "ุฎุงููุด"
        if update.text == "ูุนุงู":
            global_status = True
            await update.reply("ุฑุจุงุช ุงฺฉููู ูุนุงู ุงุณุช.")
        elif update.text == "ุฎุงููุด":
            global_status = False
            await update.reply("ุฑุจุงุช ุฎุงููุด ุดุฏ ู ุฏฺฏุฑ ุจู ุฏุณุชูุฑุงุช ูพุงุณุฎ ููโุฏูุฏ.")
@bot.on_message_updates(filters.is_group)
async def updates(update: Updates):
    
    global link_locked  # ุงุณุชูุงุฏู ุงุฒ ูุชุบุฑ ุณุฑุงุณุฑ
    
    group=update.object_guid
    user_id = update.author_guid  # ุดูุงุณู ฺฉุงุฑุจุฑ ูุฑุณุชูุฏู ูพุงู
    message_text = update.text.strip()  # ูุชู ูพุงู
    chat_id = update.object_guid  # ุดูุงุณู ฺฏุฑูู
    if not check_status():
        return
    if message_text.startswith("qr:"):
        return
    
    if group and await update.is_admin(user_guid=update.author_guid):
    # ุฏุณุชูุฑุงุช ูุฏุฑุช ููฺฉโูุง
        if message_text == "ููฺฉ_ููู":
            link_locked = True
            await update.reply("๐ซ ุงุฑุณุงู ููฺฉโูุง ุฏุฑ ฺฏุฑูู ููู ุดุฏ.")
            return
        
        if message_text == "ุงุฒุงุฏ_ููฺฉ":
            link_locked = False
            await update.reply("โ ุงุฑุณุงู ููฺฉโูุง ุฏุฑ ฺฏุฑูู ุขุฒุงุฏ ุดุฏ.")
            return
    
    # ุจุฑุฑุณ ููฺฉ ุฏุฑ ูพุงู ู ูุถุนุช ููู ููฺฉโูุง
    if re.search(LINK_REGEX, message_text):
        # ฺฺฉ ฺฉุฑุฏู ุงฺฏุฑ ููฺฉโูุง ุขุฒุงุฏ ูุณุชูุฏ
        if not link_locked:
            await update.reply("โ ููฺฉโูุง ุจุงุฒ ูุณุชูุฏุ ุงุฑุณุงู ููฺฉ ูุดฺฉู ูุฏุงุฑุฏ.")
            return

        # ุจุฑุฑุณ ุงูฺฉู ฺฉุงุฑุจุฑ ุงุฏูู ุงุณุช ุง ูู
        is_admin = await update.is_admin(chat_id, user_id)
        if is_admin:
            await update.reply("ุดูุง ูุฌุงุฒ ุจู ุงุฑุณุงู ููฺฉ ูุณุชุฏ ฺูู ุงุฏูู ูุณุชุฏ.")
        else:
            # ุงฺฏุฑ ฺฉุงุฑุจุฑ ุงุฏูู ูุจุงุดุฏ ู ููฺฉโูุง ููู ุจุงุดูุฏุ ุงุฎุทุงุฑ ูโฺฏุฑุฏ
            if user_id in warnings:
                warnings[user_id] += 1
            else:
                warnings[user_id] = 1

            await update.reply(f"๐ซ ุงุฑุณุงู ููฺฉ ุฏุฑ ฺฏุฑูู ููููุน ุงุณุช! ุงู {warnings[user_id]}ูู ุงุฎุทุงุฑ ุดูุงุณุช.")
            await update.delete_messages()  # ุญุฐู ูพุงู

            # ุงฺฏุฑ ุชุนุฏุงุฏ ุงุฎุทุงุฑูุง ุงุฒ ุญุฏ ูุฌุงุฒ ุจุดุชุฑ ุดุฏุ ฺฉุงุฑุจุฑ ุฑุง ุญุฐู ูโฺฉูู
            if warnings[user_id] >= MAX_WARNINGS:
                await update.reply("๐จ ุจู ุฏูู ุงุฑุณุงู ูฺฉุฑุฑ ููฺฉุ ุดูุง ุงุฒ ฺฏุฑูู ุญุฐู ูโุดูุฏ.")
                await update.ban_member()  # ุญุฐู ุง ุจู ฺฉุฑุฏู ฺฉุงุฑุจุฑ
                del warnings[user_id]  # ูพุงฺฉ ฺฉุฑุฏู ุฑฺฉูุฑุฏ ฺฉุงุฑุจุฑ ูพุณ ุงุฒ ุญุฐู


@bot.on_message_updates(filters.is_group, filters.Commands(['ุงุฎุทุงุฑ', 'ุฑุนุงุช'], prefixes=''))
async def warn_or_ban_user_by_admin(update: Updates):
    group = update.object_guid
    if not check_status():
        return
        
    try:
        if group and await update.is_admin(user_guid=update.author_guid):  # ุจุฑุฑุณ ุงูฺฉู ฺฉุงุฑุจุฑ ุงุฏูู ุงุณุช
            if update.reply_message_id:
                replied_message = await update.get_messages(message_ids=update.reply_message_id)
                user_id = replied_message.messages[0].author_object_guid
            else:
                username = update.text.split()[-1]
                user_info = await update.client.get_info(username=username)
                user_id = user_info.user_guid

            # ุงุถุงูู ฺฉุฑุฏู ุง ุงูุฒุงุด ุงุฎุทุงุฑ ุจุฑุง ฺฉุงุฑุจุฑ
            if user_id in warnings:
                warnings[user_id] += 1
            else:
                warnings[user_id] = 1  # ุงฺฏุฑ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุงุดุฏุ ุงุฎุทุงุฑ ุงุฒ ฑ ุดุฑูุน ูโุดูุฏ

            await update.reply(f"๐ซ ฺฉุงุฑุจุฑ {user_id} ุงุฎุทุงุฑ ฺฏุฑูุช. ุงู {warnings[user_id]}ูู ุงุฎุทุงุฑ ุงูุณุช.")

            # ุจุฑุฑุณ ุชุนุฏุงุฏ ุงุฎุทุงุฑูุง ู ุญุฐู ฺฉุงุฑุจุฑ ุงฺฏุฑ ุจู ุญุฏ ูุตุงุจ ุฑุณุฏ
            if warnings[user_id] >= MAX_WARNINGS:
                await update.reply(f"๐จ ฺฉุงุฑุจุฑ {user_id} ุจู ุฏูู ุฏุฑุงูุช ด ุงุฎุทุงุฑุ ุงุฒ ฺฏุฑูู ุญุฐู ูโุดูุฏ.")
                await update.ban_member(user_guid=user_id)
                del warnings[user_id]  # ูพุงฺฉ ฺฉุฑุฏู ุงุฎุทุงุฑูุง ฺฉุงุฑุจุฑ ูพุณ ุงุฒ ุญุฐู
        else:
            await update.reply("๐ซ ููุท ุงุฏููโูุง ูโุชูุงููุฏ ุงุฎุทุงุฑ ุจุฏููุฏ ุง ฺฉุงุฑุจุฑ ุฑุง ุงุฎุฑุงุฌ ฺฉููุฏ.")

    except exceptions.InvalidInput:
        await update.reply("๐ซ ฺฉุงุฑุจุฑ ููุฑุฏ ูุธุฑ ุงูุช ูุดุฏ ุง ุงุฏูู ุงุณุช.")
    except Exception:
        await update.reply("๐ซ ุฎุทุง ุฑุฎ ุฏุงุฏ. ููฺฉู ุงุณุช ฺฉุงุฑุจุฑ ุงุฏูู ุจุงุดุฏ ุง ุฎุทุง ุฏฺฏุฑ ุฑุฎ ุฏุงุฏู ุงุณุช.")


@bot.on_message_updates(filters.is_group)
async def delete_message(update: Updates):
    global allow_warning  # ุงุณุชูุงุฏู ุงุฒ ูุชุบุฑ ุฌูุงู
    
    # ุงฺฏุฑ ูุถุนุช ุงุฎุทุงุฑ ุบุฑูุนุงู ุจุงุดุฏุ ูพุงู ุจุฑุฑุณ ูุดูุฏ
    if not check_status():
        return
    if not check_warning_status():
        
        return
    
        

    # ุจุฑุฑุณ ูุญุชูุง ูพุงู ุจุฑุง ฺฉููุงุช ููููุนู
    if contains_prohibited_word(update.text, bad_patterns):
        a = await update.delete_messages()
        print(f"text :\n{update.text}\ndeleted:\n {a} ")
        
        # ูพุงูโูุง ุชุตุงุฏู ุจุฑุง ุงุฎุทุงุฑ
        messages = [
            "ูพุงู ุดูุง ุจู ุฏูู ูุญุชูุง ุชูููโุขูุฒ ุญุฐู ุดุฏ. ูุทูุงู ุงุฒ ุฒุจุงู ูุญุชุฑูุงูู ุงุณุชูุงุฏู ฺฉูุฏ.",
            "ุดูุง ุงุฌุงุฒู ุงุฑุณุงู ูพุงูโูุง ุชูููโุขูุฒ ุฑุง ูุฏุงุฑุฏ. ุงุฒ ุฑูุชุงุฑ ูุญุชุฑูุงูู ูพุฑู ฺฉูุฏ.",
            "ูพุงู ุดูุง ุญุงู ุงููุงุธ ูุงุดุงุณุช ุจูุฏ ู ูพุงฺฉ ุดุฏ. ุงุฏุงูู ฺูู ุฑูุชุงุฑ ููุฌุฑ ุจู ุงูุฏุงูุงุช ุดุฏุฏุชุฑ ุฎูุงูุฏ ุดุฏ.",
            "ูุทูุงู ุงุฒ ุงุฑุณุงู ูุญุด ู ุชููู ุจู ุฏฺฏุฑุงู ุฎูุฏุฏุงุฑ ฺฉูุฏ. ุฏุฑ ุตูุฑุช ุชฺฉุฑุงุฑุ ุฏุณุชุฑุณ ุดูุง ูุญุฏูุฏ ุฎูุงูุฏ ุดุฏ.",
            "ูพุงู ุดูุง ุจู ุฏูู ุงุณุชูุงุฏู ุงุฒ ฺฉููุงุช ูุงูพุณูุฏ ุญุฐู ุดุฏ. ุงู ุฑูุชุงุฑ ูุงุจู ูุจูู ูุณุช.",
        ]
        f = random.choice(messages)
        await update.reply(f)

    # ุจุฑุฑุณ ูพุงูโูุง ุฎุงุต ูุซู ุงููุฌโูุง
    elif any(update.text.startswith(emoji) for emoji in ['๐', '๐', '๐ณ๏ธโ๐', '๐ง', '๐', '๐']):
        a = await update.delete_messages()

# ุฏุณุชูุฑุงุช ุจุฑุง ูุนุงู/ุบุฑูุนุงู ฺฉุฑุฏู ุงุฎุทุงุฑ
@bot.on_message_updates(filters.Commands(["ูุญุด_ุจุงุฒ"],prefixes=''))
async def enable_warning(update: Updates):
    
    global allow_warning
    if not check_status():
        return
    allow_warning = True
    await update.reply("ุญุฐู ูพุงูโูุง ูุญุด ู ุชููู ูุนุงู ุดุฏ.")

@bot.on_message_updates(filters.Commands(["ูุญุด_ุฎุงููุด"],prefixes=''))
async def disable_warning(update: Updates):
    global allow_warning
    allow_warning = False
    if not check_status():
        return
    await update.reply("ุญุฐู ูพุงูโูุง ูุญุด ู ุชููู ุบุฑูุนุงู ุดุฏ.")
        
@bot.on_message_updates(filters.is_group, filters.Commands(["ุงุนุถุง"]))
async def get_all_members(update: Updates):
    if not check_status():
        return
    guid=update.object_guid
    if update.object_guid == guid:
        
    
            
        if update.text == "ุงุนุถุง":
            try:
                has_continue = True
                next_start_id = None
                count = 1
                all_members = []

                while has_continue:
                    # ุฏุฑุงูุช ุงุนุถุง ฺฏุฑูู ุจู ุตูุฑุช ุฏุณุชูโุง
                    result = await bot.get_members(object_guid=guid, start_id=next_start_id)
                    next_start_id = result.next_start_id  # ID ุจุนุฏ ุจุฑุง ุฏุฑุงูุช ุงุนุถุง
                    has_continue = result.has_continue  # ุขุง ุฏุฑุงูุช ุงุนุถุง ุงุฏุงูู ุฏุงุฑุฏุ
                    in_chat_members = result.in_chat_members  # ูุณุช ุงุนุถุง ุฏุฑุงูุชโุดุฏู

                    # ุงุถุงูู ฺฉุฑุฏู ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุงุนุถุง ุฏุฑุงูุชโุดุฏู ุจู ูุณุช
                    for in_chat_member in in_chat_members:
                        first_name = in_chat_member.first_name 
                        last_name = in_chat_member.last_name or ""  # ุงฺฏุฑ ูุงู ุฎุงููุงุฏฺฏ ูุฏุงุดุชุ ุฎุงู ุจุงุดุฏ
                        full_name = f"{first_name} {last_name}".strip()  # ุชุฑฺฉุจ ูุงู ู ูุงู ุฎุงููุงุฏฺฏ
                        all_members.append(full_name)
                        count += 1

                # ุชูุณู ุงุนุถุง ุจู ฺฏุฑููโูุง ฺฉูฺฺฉโุชุฑ ู ุงุฑุณุงู ูพุงูโูุง ุจู ุตูุฑุช ุจุฎุดโุจุฎุด
                for i in range(0, len(all_members), MEMBERS_PER_MESSAGE):
                    part = all_members[i:i+MEMBERS_PER_MESSAGE]
                    member_names = '\n'.join([f"{i+1}. {name}" for i, name in enumerate(part)])
                    await update.reply(f"ูุณุช ุงุนุถุง ฺฏุฑูู (ุจุฎุด {i//MEMBERS_PER_MESSAGE + 1}):\n{member_names}")

            except exceptions.InvalidInput:
                await update.reply("ุฎุทุง: ฺฏุฑูู ุง ฺฉุงูุงู ุงูุช ูุดุฏ.")
            except Exception as e:
                await update.reply(f"ุฎุทุง ุฑุฎ ุฏุงุฏ: {str(e)}")
  
@bot.on_message_updates(filters.is_group, filters.Commands(['ุจู', 'ุงุฎุฑุงุฌ'], prefixes=''))
def ban_user_by_admin(update: Updates):
    group = update.object_guid
    if not check_status():
        return
    try:
        try:
            try:
                try:
                    if group and update.is_admin(user_guid=update.author_guid):
                        if update.reply_message_id:
                            author_guid = update.get_messages(message_ids=update.reply_message_id).messages[0].author_object_guid

                        else:
                            author_guid = update.client.get_info(username=update.text.split()[-1]).user_guid

                        user = author_guid
                        if user:
                        
                            update.ban_member(user_guid=user)
                            update.reply("ฺฉุงุฑุจุฑ  ุชูุณุท ุงุฏูู ุงุฒ ฺฏุฑูู ุญุฐู ุดุฏ.")
                except exceptions.InvalidInput:
                    update.reply("ฺฉุงุฑุจุฑ  ุงุฏููู")
            except ValueError:
                update.reply("ฺฉุงุฑุจุฑ  ุงุฏููู")
        except NameError :
            update.reply("ฺฉุงุฑุจุฑ  ุงุฏููู")
    except Exception :
        update.reply("ฺฉุงุฑุจุฑ  ุงุฏููู")
        
                
@bot.on_message_updates(filters.Commands(["ููู_ุนฺฉุณ", "ุจุงุฒ_ฺฉุฑุฏู_ุนฺฉุณ","ุจุงุฒ_ฺฉุฑุฏู_ูุชู","ููู_ูุชู","ููู_ฺฏู","ุจุงุฒ_ฺฉุฑุฏู_ฺฏู",'ููู_ูุณ',"ุจุงุฒฺฉุฑุฏู_ูุณ"]),filters.is_group,filters.text)
def toggle_locks(update: Updates):
    global photo_lock
    global text_lock
    global  gif_lock
    global voice_lock
    group = update.object_guid
    if not check_status():
        return
    if group and update.is_admin(user_guid=update.author_guid):
        if update.text == "/ููู_ุนฺฉุณ":
            photo_lock = True
            update.reply("ููู ุนฺฉุณ ูุนุงู ุดุฏ. ุนฺฉุณโูุง ูพุงฺฉ ุฎูุงููุฏ ุดุฏ.")
        elif update.text == "/ุจุงุฒ_ฺฉุฑุฏู_ุนฺฉุณ":
            photo_lock = False
            update.reply("ููู ุนฺฉุณ ุบุฑูุนุงู ุดุฏ. ุนฺฉุณโูุง ูพุงฺฉ ูุฎูุงููุฏ ุดุฏ.")
        elif update.text == "/ููู_ูุชู":
            
            
            text_lock = True
            update.reply("ููู ูุชู ูุนุงู ุดุฏ. ูพุงูโูุง ูุชู ูพุงฺฉ ุฎูุงููุฏ ุดุฏ.")
        elif update.text == "/ุจุงุฒ_ฺฉุฑุฏู_ูุชู":
            text_lock = False
            update.reply("ููู ูุชู ุบุฑูุนุงู ุดุฏ. ูพุงูโูุง ูุชู ูพุงฺฉ ูุฎูุงููุฏ ุดุฏ.")
        elif update.text =="/ููู_ฺฏู":
            gif_lock =True
            update.reply("ููู ฺฏู ูุนุงู ุดุฏ .ฺฏู ูุงูพุงฺฉ ุฎูุงููุฏ ุดุฏ")
        elif update.text=="/ุจุงุฒ_ฺฉุฑุฏู_ฺฏู":
            gif_lock=False
            update.reply("ููู ฺฏู ุจุงุฒ ุดุฏ ุดูุง ูุฌุงุฒุฏุจู ฺฏู ุจูุฑุณุชุฏ")      
        elif update.text=="/ููู_ูุณ":
            voice_lock=True
            update.reply("ููู ูุณ ูุนุงู ุดุฏ .ูุณ ูุง ูพุงฺฉ ูุดู")
        elif update.text=="/ุจุงุฒฺฉุฑุฏู_ูุณ" :
            
            voice_lock= False
            update.reply("ููู ูุณ ุจุงุฒ ุดุฏ . ูุชููุฏ ูุณ ุจุฏุฏ")
            
            
        
            
        


@bot.on_message_updates(filters.photo,filters.is_group)
def handle_photo_message(update: Updates):

    global photo_lock
    if not check_status():
        return
    if photo_lock:
        # ุญุฐู ูพุงู ุนฺฉุณ
        update.delete()
        # ุงุฑุณุงู ูพุงู ุงุทูุงุนโุฑุณุงู
        update.reply("ุนฺฉุณโูุง ุฏุฑ ุญุงู ุญุงุถุฑ ููู ูุณุชูุฏ ู ูพุงฺฉ ุดุฏูุฏ.")

@bot.on_message_updates(filters.text,filters.is_group)
def handle_text_message(update: Updates):
    global text_lock
    
    if not check_status():
        return 
    if text_lock:
        # ุญุฐู ูพุงู ูุชู
        update.delete_messages()
        # ุงุฑุณุงู ูพุงู ุงุทูุงุนโุฑุณุงู
        update.reply("ูพุงูโูุง ูุชู ุฏุฑ ุญุงู ุญุงุถุฑ ููู ูุณุชูุฏ ู ูพุงฺฉ ุดุฏูุฏ.")
        



   

@bot.on_message_updates(filters.gif,filters.is_group)
def handle_gif_message(update: Updates):
    global gif_lock
    if not check_status():
        return
    if gif_lock:
        update.delete()
        update.reply("ูพุงู ูุง ุญุงู ฺฏู ูพุงฺฉ ูุดููุฏ")






@bot.on_message_updates(filters.is_group,filters.Commands(['ุฏุณุชูุฑุงุช','help'],prefixes=''))  
def send_command(update: Updates)   :
    

    if not check_status():
        return
    update.reply(help_)
       
       
      
@bot.on_message_updates(filters.voice,filters.is_group)     
def handle_voice_message(update: Updates):
    if not check_status():
        return
    if voice_lock :
        update.delete()
        update.reply("ูพุงู ูุง ุญุงู ูุณ ูพุงฺฉ ูุดู")
            
            
            
    



   

@bot.on_message_updates(filters.is_group,filters.Commands(["create_poll","ูุธุฑุณูุฌ","ูุธุฑ"],prefixes=''))
def create_poll(update: Updates):
    if not check_status():
        return
    
    guid =update.object_guid
    question = "ูุธุฑ ุดูุง ุฏุฑุจุงุฑู ฺฉูุช ุฎุฏูุงุช ูุง ฺุณุชุ"
    options = ["ุนุงู", "ุฎูุจ", "ูุชูุณุท", "ุถุนู","."]
    try:
        # ุงุฌุงุฏ ูุธุฑุณูุฌ
        poll = bot.create_poll(
            object_guid=guid,
            question=question,
            options=options,
            is_anonymous=False,
            allows_multiple_answers=False
        )

        # ุงุฑุณุงู ูพุงู ุชุงุฏ
        bot.send_message(owners, f'ูุธุฑุณูุฌ ุจุง ููููุช ุงุฌุงุฏ ุดุฏ: {poll}')
       
    except Exception as e:
        bot.send_message(guid, f'ุฎุทุง ุฏุฑ ุงุฌุงุฏ ูุธุฑุณูุฌ: {str(e)}')
    
    
    
@bot.on_message_updates(filters.is_group)
def handle_message_text(update: Updates):
    if not check_status():
        return
    greeting_message = random.choice(responses_dict['greetings'])
    if update.text.startswith('+'):
        update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. "
              "ุงฺฏุฑ ุจุง ุชุฃุฎุฑ ููุงุฌู ุดุฏุฏุ ููฺฉู ุงุณุช ูุจโุณุฑูุณ ุดููุบ ุง ุฏุฑ ุญุงู ุชุนูุฑ ุจุงุดุฏ. "
              "ุงุฒ ุดฺฉุจุง ู ููฺฉุงุฑ ุดูุง ุณูพุงุณฺฏุฒุงุฑู! ๐")

        user_input = update.text[1:].strip()  # ูุชู ุจุฏูู "+"
        api_response = chatgpt(user_input)
        update.reply(api_response)
        return  
    
    
    
    elif update.text.startswith("/"):
        update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. "
              "ุงฺฏุฑ ุจุง ุชุฃุฎุฑ ููุงุฌู ุดุฏุฏุ ููฺฉู ุงุณุช ูุจโุณุฑูุณ ุดููุบ ุง ุฏุฑ ุญุงู ุชุนูุฑ ุจุงุดุฏ. "
              "ุงุฒ ุดฺฉุจุง ู ููฺฉุงุฑ ุดูุง ุณูพุงุณฺฏุฒุงุฑู! ๐")

        user_input = update.text[1:].strip()
        api_response =get_response_from_api(user_input)
        update.reply(api_response)
        return
    elif update.text.startswith("ุณูุงู"):
        
        
        # ุงุทูุงุนโุฑุณุงู ุจู ฺฉุงุฑุจุฑ ุจุฑุง ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช
        update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. "
                    "ุงฺฏุฑ ุจุง ุชุฃุฎุฑ ููุงุฌู ุดุฏุฏุ ููฺฉู ุงุณุช ูุจโุณุฑูุณ ุดููุบ ุง ุฏุฑ ุญุงู ุชุนูุฑ ุจุงุดุฏ. "
                    "ุงุฒ ุดฺฉุจุง ู ููฺฉุงุฑ ุดูุง ุณูพุงุณฺฏุฒุงุฑู! ๐")
        
    # ุฏุฑุงูุช ูุฑูุฏ ฺฉุงุฑุจุฑ ูพุณ ุงุฒ "ุณูุงู"
        user_input = update.text[len("ุณูุงู"):].strip()

        # ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู ฺุชโุจุงุช ู ูพุงุณุฎฺฏู
        api_response = get_chatbot_response(user_input)
        update.reply(api_response)
        
                
    
    
    if re.search(r'\bุณูุงู\b', update.text.lower()):
        update.reply(greeting_message)

    # 2. ูพุงุณุฎ ุจู ูพุงูโูุง ฺฉู ุดุงูู "ุฎูุจ" ู "ุฑุจุงุช" ุง ูุดุงุจู ุขู ูุณุชูุฏ
    if re.search(r'(ุฎูุจ.*(ุฑุจุงุช|bot|ูุฑุจุงุช))|(ุฑุจุงุช.*ุฎูุจ)', update.text.lower()):
        update.reply(random.choice(responses_dict['how_are_you']))

    # 3. ูพุงุณุฎ ุจู ูพุงูโูุง ฺฉู ุจุง "ุฑุจุงุช" ุง "ูุฑุจุงุช" ุดุฑูุน ูโุดููุฏ
    if re.match(r'^(ุฑุจุงุช|ูุฑุจุงุช|bot)', update.text.lower()):
        update.reply(random.choice(responses_dict['robot_responses']))

    # 4. ูพุงุณุฎ ุจู ูพุงูโูุง ฺฉู ุตุฑูุงู ุฏุฑุจุงุฑู "ุฎูุจ" ูุณุชูุฏ
    if re.search(r'\bุฎูุจ\b', update.text.lower()):
        update.reply(random.choice(responses_dict['how_are_you']))

    # 5. ูพุงุณุฎ ุจู ูพุงูโูุง ฺฉู ุดุงูู "ุชุดฺฉุฑ" ูุณุชูุฏ
    if re.search(r'\b(ูุฑุณ|ููููู|ุชุดฺฉุฑ)\b', update.text.lower()):
        update.reply(random.choice(responses_dict['thanks']))

    # 6. ูพุงุณุฎ ุจู ุดูุฎโูุง
    if re.search(r'\bุดูุฎ\b', update.text.lower()):
        update.reply(random.choice(responses_dict['jokes']))

    # 7. ฺุชโูุง ุชุตุงุฏู
    if re.search(r'\bฺู ุฎุจุฑ\b', update.text.lower()):
        update.reply(random.choice(responses_dict['random_chat']))

    # 8. ฺฉูฺฉ ุง ุณูุงู: ูพุงูโูุง ฺฉู ูุงุฒ ุจู ฺฉูฺฉ ุง ุณูุงู ุฏุงุฑูุฏ
    if re.search(r'(ฺฉูฺฉ|ุณูุงู|ุฑุงูููุง|ูพุฑุณุด)', update.text.lower()):
        update.reply(random.choice(responses_dict['help']))

    # 9. ุฎุฏุงุญุงูุธโูุง: ุฏุฑ ุตูุฑุช ูุฌูุฏ ูพุงู ุฎุฏุงุญุงูุธ ุง ูพุงุงู ูฺฉุงููู
    if re.search(r'(ุฎุฏุงุญุงูุธ|ุฑูุฒ ุจุฎุฑ|ุฎุฏุงูฺฏูุฏุงุฑ|ุจุฏุฑูุฏ)', update.text.lower()):
        update.reply(random.choice(responses_dict['farewell']))

    # 10. ุงุญูุงูโูพุฑุณ ุฏุฑ ููุฑุฏ ุณูุงูุช ู ุฑูุจุฑ
    if re.search(r'\bฺู ุฎุจุฑ\b', update.text.lower()) or re.search(r'\bุณูุงูุช\b', update.text.lower()):
        update.reply(random.choice(responses_dict['health_wishes']))
    
    

@bot.on_message_updates(filters.is_group)
def generate_image_from_text(update: Updates):
    if not check_status():
        return
    if update.text.startswith('ุชุตูุฑ'):
        input_image =update.text.replace('ุชุตูุฑ','').strip()
        
      
        # ุงุฑุณุงู ูพุงู ุงููู ุจู ฺฉุงุฑุจุฑ
        update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. ููฺฉู ุงุณุช ุจู ุฏูู ุชุฃุฎุฑ ุฏุฑ ูุจโุณุฑูุณ ุฒูุงู ุจุดุชุฑ ุทูู ุจฺฉุดุฏ. ุงุฒ ุดฺฉุจุง ุดูุง ุณูพุงุณฺฏุฒุงุฑู! ๐")
        try:
            r = photo_ai(input_image, 'downloaded_image_ai.jpg')
            with open('downloaded_image_ai.jpg', 'rb') as photo:
                update.reply("ุจู ุฒูุฏ ุงุฑุณุงู ูุดู")
                update.reply_photo('downloaded_image_ai.jpg',caption='ุชุตูุฑ ุดูุง ุขูุงุฏู ุดุฏ')
        except Exception as e:
            
            update.reply(f"erorr :{e}")
    elif update.text.startswith("image"):
        
        user_text =update.text.replace('image','').strip()
        
        update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. ููฺฉู ุงุณุช ุจู ุฏูู ุชุฃุฎุฑ ุฏุฑ ูุจโุณุฑูุณ ุฒูุงู ุจุดุชุฑ ุทูู ุจฺฉุดุฏ. ุงุฒ ุดฺฉุจุง ุดูุง ุณูพุงุณฺฏุฒุงุฑู! ๐")
        try:
            
            
        # ุฏุฑุฎูุงุณุช ุจู ูุจโุณุฑูุณ
            url = f"https://api.api-code.ir/image-gen/?text={user_text}"
            response = requests.get(url)
            
            if response.status_code == 200:
                data = response.json()
                image_url = data['image_url']
                
                # ุฏุงูููุฏ ุชุตูุฑ
                image_response = requests.get(image_url)
                
                if image_response.status_code == 200:
                    # ุฐุฎุฑู ุชุตูุฑ ุจู ุนููุงู ูุงู ูููุช
                    image = Image.open(BytesIO(image_response.content))
                    image_path = f"{user_text}.png"
                    image.save(image_path)
                    
                    # ุงุฑุณุงู ุชุตูุฑ ุจู ฺฉุงุฑุจุฑ
                    update.reply_photo(image_path, caption='ุงูุฌุง ุชุตูุฑ ุดูุงุณุช!')
                else:
                    update.reply('ุฎุทุง ุฏุฑ ุฏุงูููุฏ ุชุตูุฑ.')
            else:
                update.reply('ุฎุทุง ุฏุฑ ุฏุฑุงูุช URL ุชุตูุฑ.')
        except Exception as p:
            update.reply(f"erorr:{p}")
            
    
                
                        
            

        

     
@bot.on_message_updates(filters.is_group)
def send_voice_ai(update: Updates):
    if not check_status():
        return
    if update.text and update.text.startswith('voice'):
        try:
            # ุฏุฑุงูุช ูุญุชูุง ุจุนุฏ ุงุฒ "voice"
            voice_text = update.text[6:].strip()  # ุญุฐู ฺฉููู "voice" ู ูุงุตููโูุง

            if voice_text:  # ุจุฑุฑุณ ุงูฺฉู ูุญุชูุง ูุชู ุจุนุฏ ุงุฒ "voice" ูุฌูุฏ ุฏุงุฑุฏ
                update.reply("ุฏุฑ ุญุงู ุณุงุฎุช ูุณ...")
                trans =GoogleTranslator('auto','fa').translate(voice_text)

                # ูพุฑุฏุงุฒุด ูุณ ุจุง ูุญุชูุง ุฏุฑุงูุช ุดุฏู
                rs = processing_voice(voice_text, 'voice.mp3')

                # ุงุฑุณุงู ูุงู ุตูุช
                with open("voice.mp3", 'rb') as voice_file:
                    update.reply_voice('voice.mp3', caption=f"ูุณ ุดูุง ุขูุงุฏู ุดุฏ ููุนู ูุณ ุดูุง :\n{trans}")
                    
       
        except Exception as e:
            update.reply(f"ุฎุทุง ุฑุฎ ุฏุงุฏ: {str(e)}")   
        finally:
            if os.path.exists("voice.mp3"):
                os.remove("voice.mp3")


                
@bot.on_message_updates(filters.is_group , filters.text)  # ุฏุฑุงูุช ูพุงูโูุง ูุชู ุฏุฑ ฺฏุฑููโูุง
async def get_weather_info(update: Updates):
    user_input = update.text.strip()
    if not check_status():
        return

    # ุงฺฏุฑ ูพุงู ุจุง ฺฉููู "ููุง" ุดุฑูุน ูโุดูุฏ
    if user_input.startswith("ููุง"):
        user_input = user_input.replace("ููุง", "").strip()

        # ุงฺฏุฑ ูุฑูุฏ ุฎุงู ุงุณุชุ ูพุงู ุงุฑุณุงู ฺฉูู ฺฉู ูุงู ุดูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ
        if not user_input:
            await update.reply("ูุทูุงู ูุงู ุดูุฑ ฺฉู ูโุฎูุงูุฏ ูุถุนุช ุขุจ ู ููุง ุฑุง ุจุฑุง ุขู ุจุฑุฑุณ ฺฉูุฏุ ูุงุฑุฏ ฺฉูุฏ.")
            return

        # ุงุฑุณุงู ูพุงู "ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด..."
        processing_message = await update.reply("ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด... ูุทูุงู ุตุจุฑ ฺฉูุฏ.")

        # ุฏุฑุงูุช ูุถุนุช ุขุจ ู ููุง
        weather_info = get_weather(user_input)

        # ุงฺฏุฑ ูพุงุณุฎ ูุถุนุช ุขุจ ู ููุง ุฎุทุง ูุจุงุดุฏุ ุงุฏุงูู ูโุฏูู
        if "ุงูุช ูุดุฏ" not in weather_info:
            # ุชุฑุฌูู ูุถุนุช ุขุจ ู ููุง ุจู ุฒุจุงู ุงูฺฏูุณ
            translated_info = translate_text(weather_info, target_language='en')

            # ุงุฑุณุงู ูุถุนุช ุขุจ ู ููุง ุจู ุฒุจุงู ูุงุฑุณ
            await update.reply(f"\nูุถุนุช ุขุจ ู ููุง ุจู ูุงุฑุณ:\n{weather_info}")

            # ุงุฑุณุงู ูุถุนุช ุจู ุฒุจุงู ุงูฺฏูุณ
            
        else:
            # ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุงุ ูพุงู ุงุฑุณุงู ูโุดูุฏ
            await update.reply(weather_info)

 
 
@bot.on_message_updates(filters.is_group, filters.Commands(["ุชุงุฑุฎ", "ุฒูุงู"], prefixes=''))
def send_data(update: Updates):
    if not check_status():
        return
    # ุฒูุงู ูุนู ุจู ุดูุณ
    current_time_jalali = JalaliDatetime.today().strftime("%A %d %B %Y")
    
    # ุฒูุงู ูุนู ุจู ููุงุฏ
    current_time_gregorian = datetime.now()
    gregorian_date = current_time_gregorian.strftime("%A %d %B %Y - %H:%M:%S")

    if current_time_gregorian.hour < 12:
        day_night = "ุฑูุฒ ุจุฎุฑ"
    else:
        day_night = "ุดุจ ุจุฎุฑ"
    # ุณุงุฎุช ูุชู ุฎุฑูุฌ ุจู ุตูุฑุช ฺฉ ุฑุดุชู
    result = (
        f"{day_night}!\n\n"
        f"ุชุงุฑุฎ ุจู ุดูุณ:\n{current_time_jalali}\n"
        f"ุชุงุฑุฎ ุจู ููุงุฏ:\n{gregorian_date}"
    )
    # ุงุฑุณุงู ูพุงู ุจู ฺฏุฑูู
    update.reply(result)

    
@bot.on_message_updates(filters.is_group)
def font(update: Updates):
    if not check_status():
        return
    # ุจุฑุฑุณ ุงูฺฉู ุขุง ูพุงู ุจุง "font" ุง "ูููุช" ุดุฑูุน ูโุดูุฏ
    if update.text.startswith("font") or update.text.startswith("ูููุช"):
        lang = "en" if update.text.startswith("font") else "fa"
        user_input = update.text.replace("font", "").replace("ูููุช", "").strip()
        
        # ูพุงู ุงูุชุธุงุฑ
        update.reply("ูุทูุงู ุตุจุฑ ฺฉูุฏ ุชุง ูููุช ุณุงุฎุชู ุดูุฏ...")

        try:
            # ุฏุฑุงูุช ูููุชโูุง ุงุฒ API
            fonts = get_fonts(user_input, lang)

            if fonts:
                formatted_fonts = format_fonts(fonts)
                update.reply(f"ูููุชโูุง ุดูุง:\n{formatted_fonts}")
                
            else:
                update.reply("ูููุช ุงูุช ูุดุฏ!")
        
        except Exception as e:
            update.reply(f"ุฎุทุง:\n{str(e)}")  

 


    
    

                

@bot.on_message_updates(filters.is_group)
def ancientline(update: Updates):
    if not check_status():
        return
    input_text = update.text.strip()
    
    if input_text.startswith("ุจุงุณุชุงู"):
        # ุญุฐู "ุจุงุณุชุงู" ุงุฒ ุงุจุชุฏุง ูุชู
        input_text = input_text.replace("ุจุงุณุชุงู", "", 1).strip()
        
        # ุชุจุฏู ูุชู ุจู ุฎุทูุท ูุฎุชูู
        cuneiform_output = convert_to_cuneiform(input_text)
        pahlavi_output = convert_to_pahlavi(input_text)
        manavi_output = convert_to_manichaean(input_text)
        hieroglyph = convert_to_hieroglyph(input_text)
        hw = GoogleTranslator(source='auto', target='iw').translate(input_text)
        linear_b_optimized = text_to_linear_b_optimized(input_text)
        update.reply('**ุฏุฑ ุญุงู ุชุจุฏู ูุชู ุดูุง ุจู ุฎุทูุท ุจุงุณุชุงู..**')
        # ุงุฑุณุงู ูพุงู ุชุจุฏู ุฎุทูุท ุจุงุณุชุงู
        response = (
            f"**ุฒุจุง ูุง ุจุงุณุชุงู ุชุจุฏู ุดุฏู :**\n\n"
            f"ูุชู ุจู ุฎุท ูุฎ:\n{cuneiform_output}\n\n"
            f"ูุชู ุจู ุฎุท ูพููู:\n{pahlavi_output}\n\n"
            f"ูุชู ุจู ุฎุท ูุงูู:\n{manavi_output}\n\n"
            f"ูุชู ุจู ุฎุท ูุฑูฺฏูู ูุตุฑ:\n{hieroglyph}\n\n"
            f"ูุชู ุจู ุฎุท ุนุจุฑ ุจุงุณุชุงู:\n{hw}\n\n"
            f"ูุชู ุจู ุฎุท ูฺฉู:\n{linear_b_optimized}\n\n"
        )
        
        # ุงุฑุณุงู ูพุงุณุฎ ููุง
        update.reply(response)
        




@bot.on_message_updates(filters.is_group)
def send_logo(update: Updates):
    if not check_status():
        return
    input_text = update.text.strip()
    
  
    if input_text.startswith("lego"):
        
        logo_text = input_text.replace("lego", "").strip()
        
        # ูพุงู ูููุช ุจู ฺฉุงุฑุจุฑ
        update.reply("ุฏุฑ ุญุงู ุณุงุฎุช ูฺฏู...")
        
        # ุชููุฏ ููฺฏู ุจุง ูุชู ูุฑูุฏ
        logo_file = create_random_logo(logo_text)
        
        # ุงุฑุณุงู ุนฺฉุณ ููฺฏู ุจู ฺฉุงุฑุจุฑ
        update.reply_photo(logo_file, caption="ูฺฏู ุดูุง ุขูุงุฏู ุดุฏ!")
        
        # ุญุฐู ูุงู ููฺฏู ุจุนุฏ ุงุฒ ุงุฑุณุงู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูพุฑ ุดุฏู ุญุงูุธู
        os.remove(logo_file)

@bot.on_message_updates(filters.is_group,filters.Commands(["ุงุฑุฒ"],prefixes=''))
async def coin_prices(update: Updates):
    
    if not check_status():
        return
    await update.reply("ุฏุฑ ุญุงู ุจูโุฏุณุช ุขูุฑุฏู ููุช ุงุฑุฒ...")
    try:
        # ุฏุฑุฎูุงุณุช ุจู ูุจโุณุฑูุณ ุจุฑุง ุฏุฑุงูุช ููุช ุงุฑุฒูุง
        response = requests.get('https://api.fast-creat.ir/nobitex?apikey=5151884791:6WORUy4LAz3J5KM@Api_ManagerRoBot')
        if response.status_code == 200:
            nobitex_data = response.json().get('result', {})

            # ูุณุช ููุชโูุง ุจู ุชููุงู
            arz_aig = [
                f"๐ฐ ุจุชฺฉูู (BTC): {nobitex_data.get('btc', 0) / 10:,.0f} ุชููุงู",
                f"๐ฐ ุงุชุฑูู (ETH): {nobitex_data.get('eth', 0) / 10:,.0f} ุชููุงู",
                f"๐ฐ ูุงุช ฺฉูู (LTC): {nobitex_data.get('ltc', 0) / 10:,.0f} ุชููุงู",
                f"๐ฐ ุชุฑูู (TRX): {nobitex_data.get('trx', 0) / 10:,.0f} ุชููุงู",
                f"๐ฐ ุชูู ฺฉูู (TON): {nobitex_data.get('ton', 0) / 10:,.0f} ุชููุงู",
                f"๐ฐ ุฏูุฌฺฉูู (DOGE): {nobitex_data.get('doge', 0) / 10:,.0f} ุชููุงู"
            ]
            
            # ุงุฑุณุงู ูุณุช ููุชโูุง ุจู ุนููุงู ูพุงุณุฎ
            await update.reply("๐ฒ ููุช ุงุฑุฒูุง ุฏุฌุชุงู:\n" + '\n'.join(arz_aig))
        
        else:
            await update.reply("ุฎุทุง ุฏุฑ ุฏุณุชุฑุณ ุจู ูุจโุณุฑูุณ ููุช.")

    except Exception as e:
        await update.reply(f'ูุดฺฉู ุจู ูุฌูุฏ ุขูุฏ. ุฎุทุง: {e}')


            
            

@bot.on_message_updates(filters.is_group, filters.Commands(['ููฺฉ', 'link'], ''))
def send_group_link(update: Updates): 
    if not check_status():
        return
    group = update.object_guid
    if group:
        link = bot.get_group_link(update.object_guid)
        return  update.reply(f' ุจูุฑูุงุฏ ููฺฉ ฺฏุฑูู\n{link.join_link}')
    


    
    
@bot.on_message_updates(filters.is_group)
def game(update: Updates):
    global game_active
    if not check_status():
        return

    user_message = update.text.strip()

    # ุจุฑุฑุณ ูพุงูโูุง ู ูพุงุณุฎโุฏู
    if user_message == "ุดุฑูุน":
        game_active = True
        update.reply("ุจุงุฒ ุดุฑูุน ุดุฏ! ูุทูุงู ฺฉ ุงุฒ ฺฏุฒููโูุง ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:\n- ุณูฺฏ\n- ฺฉุงุบุฐ\n- ูฺ\n(ุจุฑุง ูพุงุงู ุจุงุฒุ 'ูพุงุงู' ุฑุง ูุงุฑุฏ ฺฉูุฏ.)")
    elif user_message == "ูพุงุงู":
        game_active = False
        update.reply("ุจุงุฒ ุจู ูพุงุงู ุฑุณุฏ! ูุชุดฺฉุฑู ฺฉู ุจุงุฒ ฺฉุฑุฏุฏ.")
    elif game_active:
        if user_message in choices:  # ููุท ุงฺฏุฑ ูพุงู ฺฉ ุงุฒ ฺฏุฒููโูุง ุจุงุดุฏ
            computer_choice = random.choice(choices)  # ุงูุชุฎุงุจ ุชุตุงุฏู ุฑุจุงุช

            # ุงุนูุงู ุงูุชุฎุงุจ ุฑุจุงุช
            update.reply(f"ุฑุจุงุช ุงูุชุฎุงุจ ฺฉุฑุฏ: {computer_choice}")

            # ุจุฑุฑุณ ูุชุฌู
            if user_message == computer_choice:
                update.reply("ุชุณุงู!")
            elif (user_message == "ุณูฺฏ" and computer_choice == "ูฺ") or \
                 (user_message == "ฺฉุงุบุฐ" and computer_choice == "ุณูฺฏ") or \
                 (user_message == "ูฺ" and computer_choice == "ฺฉุงุบุฐ"):
                update.reply("ุดูุง ุจุฑูุฏู ุดุฏุฏ!")
            else:
                update.reply("ุดูุง ุจุงุฎุชุฏ!")
        else:
            return  # ุงฺฏุฑ ูพุงู ุบุฑ ูุฑุชุจุท ุจูุฏุ ูฺ ูพุงุณุฎ ูุฏูุฏ
    else:
        return  # ูฺ ูพุงุณุฎ ูุฏูุฏ ุงฺฏุฑ ุจุงุฒ ุบุฑูุนุงู ุงุณุช



@bot.on_message_updates(filters.is_private)
def handle_message_add(update: Updates):
    
    global waiting_for_command, waiting_for_response, new_command
    if not check_status():
        return
    user_id = update.object_guid
    user_input = update.text.strip()
    if user_input.startswith('/command'):
        if user_id == ALLOWED_USER_ID:
            update.reply('ูุทูุงู ุฏุณุชูุฑ ฺฉู ูโุฎูุงูุฏ ุงุถุงูู ฺฉูุฏ ุฑุง ุงุฑุณุงู ฺฉูุฏ.')
            waiting_for_command = True
        else:
            update.reply('ุดูุง ูุฌุงุฒ ุจู ุงุถุงูู ฺฉุฑุฏู ุฏุณุชูุฑุงุช ูุณุชุฏ.')
            
    elif waiting_for_command:
        
        new_command = user_input
        if new_command:
            try:
                update.reply(f'ุฏุณุชูุฑ {new_command} ุฏุฑุงูุช ุดุฏ. ุญุงูุง ูพุงุณุฎ ุฑุง ุงุฑุณุงู ฺฉูุฏ.')
                waiting_for_command = False
                waiting_for_response = True
            except Exception as e:
                print(f"Error while sending message: {e}")
                update.reply('ุฎุทุง ุฏุฑ ุงุฑุณุงู ูพุงู. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.')
        else:
            update.reply('ุฏุณุชูุฑ ูุงุฑุฏ ุดุฏู ุฎุงู ุงุณุช. ูุทูุงู ฺฉ ุฏุณุชูุฑ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.')
    elif waiting_for_response:
        new_response = user_input  # ุฐุฎุฑู ูพุงุณุฎ
        add_command(new_command, new_response)  # ุฐุฎุฑู ุฏุณุชูุฑ ู ูพุงุณุฎ ุฏุฑ ุฏุชุงุจุณ
        update.reply(f'ุฏุณุชูุฑ {new_command} ุจุง ูพุงุณุฎ `{new_response} ุฐุฎุฑู ุดุฏ.')
        waiting_for_response = False  # ุบุฑูุนุงู ฺฉุฑุฏู ูุถุนุช ุฏุฑุงูุช ูพุงุณุฎ
    elif user_input == '/delete':
            if user_id == ALLOWED_USER_ID:
                
                delete_commands()
                
                update.reply('ุชูุงู ุฏุณุชูุฑุงุช ุญุฐู ุดุฏูุฏ.')
                
            else:
                
                update.reply('ุดูุง ูุฌุงุฒ ุจู ุญุฐู ุฏุณุชูุฑุงุช ูุณุชุฏ.')
@bot.on_message_updates(filters.is_group)
def handle_message_group(update: Updates):
    if not check_status():
        return
    user_input = update.text.strip()
    response = get_response(user_input)
    if response:
        update.reply(response)


@bot.on_message_updates(filters.is_group,filters.Commands(['fal','ูุงู'],prefixes=''))
def get_fal_and_send(update: Updates):
    update.reply("**ููุชุธุฑุจูุงูุฏ ุชุงุจุฑุงุชุงู ูุงู ุฑุง ุงูุงุฏ ฺฉูู**")
    if not check_status():
        return
    url = "https://api.api-code.ir/fallhafez2/index.php"
    response = requests.get(url)
    if response.status_code == 200:
        data = response.json()
        if data['status'] == 200:
            result = data['result']
            number = result['number']
            ghazal = result['ghazal']
            voice = result['voice']
            tabir = result['tabir']
            message = f"๐ ุดูุงุฑู ุบุฒู: {number}\n\n๐ ูุชู ุบุฒู:\n{ghazal}\n\n๐ฎ ุชุนุจุฑ:\n{tabir}"
            update.reply(message)
            audio_response = requests.get(voice)
            audio_file = "voice_fal.mp3"
            with open(audio_file, 'wb') as f:
                f.write(audio_response.content)
                update.reply('ุจู ุฒูุฏ ูุณ ูุงู ุดูุง ุงูุงุฏู ูุดู')
                update.reply_voice(audio_file,caption='ุจูุฑูุงุฏ ูุณ ูุงู ุดูุง')
        else:
            update.reply("ูุดฺฉู ุฏุฑ ุฏุฑุงูุช ูุงู ูุฌูุฏ ุฏุงุฑุฏ.")
    else:
        update.reply(f"ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ูุจโุณุฑูุณ: {response.status_code}")


 



    






@bot.on_message_updates(filters.is_group)
async def start_report(message: Updates):
    if not check_status():
        return
    info = """
# ุชูุถุญุงุช ุฑุจุงุช

ุงู ุฑุจุงุช ุจู ฺฉุงุฑุจุฑุงู ุงุฌุงุฒู ูโุฏูุฏ ุชุง ฺฏุฒุงุฑุด ุงุฒ ฺฉ ฺฉุงุฑุจุฑ ุฏฺฏุฑ ุง ูุญุชูุง ุฎุงุต ุฑุง ุงุฑุณุงู ฺฉููุฏ. ูุฑุขูุฏ ุงุฑุณุงู ฺฏุฒุงุฑุด ุจู ุตูุฑุช ูุฑุญูู ุจู ูุฑุญูู ุงูุฌุงู ูโุดูุฏ. ฺฉุงุฑุจุฑ ุจุงุฏ ุงุจุชุฏุง ฺฉ ุดูุงุณู ุงุฑุณุงู ฺฉูุฏ ู ุณูพุณ ููุน ุชุฎูู ุฑุง ูุดุฎุต ฺฉูุฏ. ุฏุฑ ููุงุช ุฑุจุงุช ฺฏุฒุงุฑุดุงุช ุฑุง ุงุฑุณุงู ูโฺฉูุฏ.

## ูุฑุงุญู ุนููฺฉุฑุฏ ุฑุจุงุช

1. **ุดุฑูุน ูฺฉุงููู ุจุง ุฑุจุงุช**:
   - ููฺฏุงู ฺฉู ฺฉุงุฑุจุฑ ุฏุณุชูุฑ /start ุฑุง ุงุฑุณุงู ูโฺฉูุฏุ ุฑุจุงุช ุดุฑูุน ุจู ฺฉุงุฑ ูโฺฉูุฏ.
   - ุฑุจุงุช ุงุฒ ฺฉุงุฑุจุฑ ูโุฎูุงูุฏ ฺฉู ุดูุงุณู (object_guid) ูุฑุจูุท ุจู ูุฑุฏ ุง ูุญุชูุง ฺฉู ูุตุฏ ฺฏุฒุงุฑุด ุขู ุฑุง ุฏุงุฑุฏุ ูุงุฑุฏ ฺฉูุฏ.

2. **ุฏุฑุงูุช ุดูุงุณู ู ุงูุชุฎุงุจ ููุน ุชุฎูู**:
   - ูพุณ ุงุฒ ุฏุฑุงูุช ุดูุงุณูุ ุฑุจุงุช ุงุฒ ฺฉุงุฑุจุฑ ูโุฎูุงูุฏ ฺฉู ููุน ุชุฎูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ฺฉ ุงุฒ 7 ฺฏุฒูู ุฒุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:
     1. ูุญุชูุง ูุณุชูุฌู
     2. ุฎุดููุช
     3. ุงุณูพู
     4. ฺฉูุฏฺฉโุขุฒุงุฑ
     5. ููุถ ุญูโูุดุฑ
     6. ูุดูฺฏ
     7. ุณุงุฑ
     8. ุงูุชุฎุงุจ ุชุตุงุฏู (ุฑุงูุฏู)

3. **ุชูุถุญ ุชุฎูู "ุณุงุฑ"**:
   - ุงฺฏุฑ ฺฉุงุฑุจุฑ ฺฏุฒูู "ุณุงุฑ" ุง "ุชุตุงุฏู" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏุ ุฑุจุงุช ุงุฒ ุงู ูโุฎูุงูุฏ ุชูุถุญ ูุฎุชุตุฑ ุฏุฑ ููุฑุฏ ููุน ุชุฎูู ูุงุฑุฏ ฺฉูุฏ.

4. **ุฏุฑุงูุช ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง**:
   - ุจุนุฏ ุงุฒ ุงูุชุฎุงุจ ููุน ุชุฎููุ ุฑุจุงุช ุงุฒ ฺฉุงุฑุจุฑ ุฏุฑุฎูุงุณุช ูโฺฉูุฏ ฺฉู ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ฺฉู ูโุฎูุงูุฏ ุงุฑุณุงู ุดูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ.

5. **ุงุฑุณุงู ฺฏุฒุงุฑุดโูุง**:
   - ูพุณ ุงุฒ ุฏุฑุงูุช ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุงุ ุฑุจุงุช ุจู ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโุดุฏู ฺฏุฒุงุฑุดโูุง ุฑุง ุงุฑุณุงู ูโฺฉูุฏ.
   - ูพุณ ุงุฒ ููููุช ุฏุฑ ุงุฑุณุงูุ ุจู ฺฉุงุฑุจุฑ ุงุทูุงุน ุฏุงุฏู ูโุดูุฏ.

6. **ุญุฐู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ**:
   - ูพุณ ุงุฒ ุงุฑุณุงู ฺฏุฒุงุฑุดุ ุชูุงู ุฏุงุฏูโูุง ูุฑุจูุท ุจู ฺฉุงุฑุจุฑ ุงุฒ ุญุงูุธู ุฑุจุงุช ูพุงฺฉ ูโุดูุฏ ุชุง ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุฐุฎุฑู ูุดูุฏ.

7. **ุญุฐู ุฏุณุช ุงุทูุงุนุงุช ุจุง ุฏุณุชูุฑ /delete**:
   - ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุฏุฑ ูุฑ ูุฑุญูู ุจุง ุงุฑุณุงู ุฏุณุชูุฑ /delete ุชูุงู ุงุทูุงุนุงุช ุฎูุฏ ุฑุง ุงุฒ ุญุงูุธู ุฑุจุงุช ูพุงฺฉ ฺฉุฑุฏู ู ูุฑุขูุฏ ุฑุง ุงุฒ ุงุจุชุฏุง ุดุฑูุน ฺฉูุฏ.

## ุชูุถุญุงุช ุฏุฑุจุงุฑู ููุชุฑูฺฏ

ุงู ุฑุจุงุช ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ฺฏุฒุงุฑุดุงุช ุฑุง ุงุฑุณุงู ฺฉูุฏ. ูุงุฒู ุจู ุฐฺฉุฑ ุงุณุช ฺฉู ูุง ููุชูุฑ ููุชุฑูฺฏ ูุณุชู. ุฏุฑ ุตูุฑุช ฺฉู ฺฏุฒุงุฑุด ุงุฑุณุงู ฺฉูุฏ ู ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ุดูุง ุจุงูุง ุจุฑูุฏุ ุฑุจุงุช ุฑุณู ุฑูุจฺฉุง ุจู ุงู ฺฏุฒุงุฑุดุงุช ุฑุณุฏฺฏ ุฎูุงูุฏ ฺฉุฑุฏ ู ุฏุฑ ุตูุฑุช ูุฌูุฏ ุชุฎูู ูุงูุนุ ููฺฉู ุงุณุช ุงูุฏุงู ุจู ููุชุฑ ฺฉุฑุฏู ุญุณุงุจ ฺฉุงุฑุจุฑ ููุงุฏ. 

ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุงู ุฑุจุงุช ฺฉ ุฑุจุงุช ฺฏุฒุงุฑุดโุฏู ุบุฑุฑุณู ุงุณุช ู ูุฏุฑุงู ุฑูุจฺฉุง ุงุฒ ุขู ุงุทูุงุน ูุฏุงุฑูุฏ. ุฏุฑ ุขูุฏูุ ุงฺฏุฑ ูุงุจูุช ููุชุฑ ฺฉุฑุฏู ุจู ุฑุจุงุช ุงุถุงูู ุดูุฏุ ุจุงุฏ ุจุง ุฑุนุงุช ููุงูู ู ุฏูุช ูุงุฒู ุจุง ุงู ุฑุจุงุช ฺฉุงุฑ ฺฉูุฏุ ุฒุฑุง ุงุดุชุจุงู ุฏุฑ ฺฏุฒุงุฑุดโูุง ููฺฉู ุงุณุช ููุฌุฑ ุจู ุขุณุจ ุจู ุญุณุงุจ ุดูุง ุดูุฏ. 

ุงุฒ ููฺฉุงุฑ ุดูุง ุณูพุงุณฺฏุฒุงุฑู. ุฑุจุงุช ฺฏุฒุงุฑุดโุฏู ุบุฑุฑุณู!
"""
    user_id = message.author_guid
    group =message.object_guid
    if group and await message.is_admin(user_guid=message.author_guid):
        
        if message.text == "/help":
            await message.reply(info)
            return

        # ุญุฐู ุฏุงุฏูโูุง ุฏุฑ ุตูุฑุช ุฏุณุชูุฑ /delete
        if message.text == "/delete":
            if user_id in user_data:
                user_data.pop(user_id)
            await message.reply("ุฏุงุฏูโูุง ุดูุง ุญุฐู ุดุฏ. ูุทูุงู ุฏูุจุงุฑู ุฏุณุชูุฑ /start ุฑุง ูุงุฑุฏ ฺฉูุฏ.")
            return

        # ูุฑุญูู ุงูู: ุดุฑูุน ฺฏูุชฺฏู ู ุฏุฑุฎูุงุณุช ุดูุงุณู
        if message.text == "/start":
            await message.reply(
        "โจ ุณูุงู ู ุฏุฑูุฏ! ุจู ุฑุจุงุช ฺฏุฒุงุฑุดโุฏู ุฎูุด ุขูุฏุฏ. โจ\n\n"
        "ูุทูุงู ุดูุงุณู (object_guid) ูุฑุจูุท ุจู ฺฉุงุฑุจุฑ ฺฉู ูโุฎูุงูุฏ ฺฏุฒุงุฑุด ฺฉูุฏ ุฑุง ุงุฑุณุงู ููุงุฏ.\n"
        "๐ ุงฺฏุฑ ุจุง ูุญูู ฺฉุงุฑฺฉุฑุฏ ุฑุจุงุช ุขุดูุง ูุณุชุฏุ ูโุชูุงูุฏ ุจุง ุงุฑุณุงู ุฏุณุชูุฑ `/help` ุงุทูุงุนุงุช ุจุดุชุฑ ุฏุฑุงูุช ฺฉูุฏ.\n\n"
        "๐ง **ุจุฑุง ูพุดุชุจุงูุ ูุทูุงู ุจุง ูู ุชูุงุณ ุจฺฏุฑุฏ:** (@Sepah_cyber84)\n"
    )

        

            user_data[user_id] = {"step": "waiting_for_guid"}  # ุฐุฎุฑู ูุฑุญูู

        # ูุฑุญูู ุฏูู: ุฏุฑุงูุช ุดูุงุณู ู ุฏุฑุฎูุงุณุช ููุน ุชุฎูู
        elif user_data.get(user_id, {}).get("step") == "waiting_for_guid":
            object_guid = message.text
            user_data[user_id]["object_guid"] = object_guid  # ุฐุฎุฑู ุดูุงุณู
            await message.reply("ููุน ุชุฎูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:\n1. ูุญุชูุง ูุณุชูุฌู\n2. ุฎุดููุช\n3. ุงุณูพู\n4. ฺฉูุฏฺฉโุขุฒุงุฑ\n5. ููุถ ุญูโูุดุฑ\n6. ูุดูฺฏ\n7. ุณุงุฑ\n8. ุชุตุงุฏู")
            user_data[user_id]["step"] = "waiting_for_report_type"  # ุชุบุฑ ูุฑุญูู

        # ูุฑุญูู ุณูู: ุฏุฑุงูุช ููุน ุชุฎูู ู ุฏุฑุฎูุงุณุช ุชูุถุญุงุช ุจุฑุง ุชุฎูู "ุณุงุฑ" (ุฏุฑ ุตูุฑุช ุงูุชุฎุงุจ)
        elif user_data.get(user_id, {}).get("step") == "waiting_for_report_type":
            report_type = message.text
            report_type_enum = None
            
            if report_type == '1':
                report_type_enum = ReportType.PORNOGRAPHY
                report_name = "ูุญุชูุง ูุณุชูุฌู"
            elif report_type == '2':
                report_type_enum = ReportType.VIOLENCE
                report_name = "ุฎุดููุช"
            elif report_type == '3':
                report_type_enum = ReportType.SPAM
                report_name = "ุงุณูพู"
            elif report_type == '4':
                report_type_enum = ReportType.CHILD_ABUSE
                report_name = "ฺฉูุฏฺฉโุขุฒุงุฑ"
            elif report_type == '5':
                report_type_enum = ReportType.COPYRIGHT
                report_name = "ููุถ ุญูโูุดุฑ"
            elif report_type == '6':
                report_type_enum = ReportType.FISHING
                report_name = "ูุดูฺฏ"
            elif report_type == '7':
                report_type_enum = ReportType.OTHER
                report_name = "ุณุงุฑ"
                await message.reply("ูุทูุงู ุชูุถุญ ูุฑุจูุท ุจู ุชุฎูู 'ุณุงุฑ' ุฑุง ูุงุฑุฏ ฺฉูุฏ:")
                user_data[user_id]["step"] = "waiting_for_other_description"  # ุชุบุฑ ูุฑุญูู ุจู ุฏุฑุงูุช ุชูุถุญ
                user_data[user_id]["report_type"] = report_type_enum  # ุฐุฎุฑู ููุน ุชุฎูู
                return  # ุตุจุฑ ุชุง ุฏุฑุงูุช ุชูุถุญุงุช
            elif report_type == '8':  # ุงูุชุฎุงุจ ุชุตุงุฏู
                random_types = [ReportType.PORNOGRAPHY, ReportType.VIOLENCE, ReportType.SPAM, ReportType.CHILD_ABUSE, ReportType.COPYRIGHT, ReportType.FISHING, ReportType.OTHER]
                report_type_enum = random.choice(random_types)  # ุงูุชุฎุงุจ ุชุตุงุฏู
                report_name = "ุชุตุงุฏู"
            else:
                await message.reply("ูุทูุงู ฺฉ ุนุฏุฏ ูุนุชุจุฑ (1 ุชุง 8) ุงูุชุฎุงุจ ฺฉูุฏ.")
                return
            
            user_data[user_id]["report_type"] = report_type_enum  # ุฐุฎุฑู ููุน ุชุฎูู
            await message.reply(f"ุชุฎูู ุงูุชุฎุงุจโุดุฏู: {report_name}. ูุทูุงู ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ฺฉู ูโุฎูุงูุฏ ุงุฑุณุงู ุดูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ:")
            user_data[user_id]["step"] = "waiting_for_report_count"  # ุชุบุฑ ูุฑุญูู

        # ูุฑุญูู ฺูุงุฑู: ุฏุฑุงูุช ุชูุถุญุงุช ุจุฑุง ุชุฎูู "ุณุงุฑ"
        elif user_data.get(user_id, {}).get("step") == "waiting_for_other_description":
            other_description = message.text
            user_data[user_id]["description"] = other_description  # ุฐุฎุฑู ุชูุถุญ "ุณุงุฑ"
            await message.reply(f"ุชูุถุญุงุช ุซุจุช ุดุฏ: {other_description}. ุญุงูุง ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ฺฉู ูโุฎูุงูุฏ ุงุฑุณุงู ุดูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ:")
            user_data[user_id]["step"] = "waiting_for_report_count"  # ุชุบุฑ ูุฑุญูู

        # ูุฑุญูู ูพูุฌู: ุฏุฑุงูุช ุชุนุฏุงุฏ ฺฏุฒุงุฑุด ู ุงุฑุณุงู ููุง
        elif user_data.get(user_id, {}).get("step") == "waiting_for_report_count":
            try:
                report_count = int(message.text)
                if report_count <= 0:
                    raise ValueError("ุนุฏุฏ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.")
            except ValueError:
                await message.reply("ูุทูุงู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ุจุฑุง ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง ูุงุฑุฏ ฺฉูุฏ.")
                return
            
            # ุงุฑุณุงู ฺฏุฒุงุฑุดุงุช ุจู ุชุนุฏุงุฏ ุฏุฑุฎูุงุณุชโุดุฏู ุจุง ูุงุตูู ุฒูุงู 2 ุซุงูู
            object_guid = user_data[user_id]["object_guid"]
            report_type_enum = user_data[user_id]["report_type"]
            description = user_data[user_id].get("description", None)  # ุจุฑุฑุณ ุชูุถุญุงุช "ุณุงุฑ"
            
            try:
                for _ in range(report_count):
                
                    await bot.report_object(object_guid, report_type_enum, description)
                    rep = random.uniform(1, 8.5)
                    
                    await asyncio.sleep(rep)  # ูุงุตูู ุฒูุงู 2 ุซุงููโุง ุจู ูุฑ ฺฏุฒุงุฑุด
                

                await message.reply(f"ฺฏุฒุงุฑุด ุจุง ููููุช ุงุฑุณุงู ุดุฏ. ุชุนุฏุงุฏ ฺฏุฒุงุฑุดโูุง: {report_count}")
            except Exception as e:
                await message.reply(f"ุฎุทุง ุฏุฑ ุงุฑุณุงู ฺฏุฒุงุฑุด: {str(e)}")
            
            # ูพุงฺฉ ฺฉุฑุฏู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ูพุณ ุงุฒ ุงุชูุงู
            user_data.pop(user_id)

@bot.on_message_updates(filters.is_group)
def get_info_and_download_profile_picture(message: Updates):
    if not check_status():
        
        return
    
    if message.text.startswith("info:"):
        message.reply('ููุชุธุฑุจูุงูุฏ')
        
        # ุงุณุชุฎุฑุงุฌ ูุงู ฺฉุงุฑุจุฑ ุงุฒ ูพุงู
        u = message.text.replace("info:", "").strip()
        
        try:
            # ฺฏุฑูุชู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ ูุงู ฺฉุงุฑุจุฑ
            user = bot.get_object_by_username(u)
            
            
            if user:
                # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ูุชุฏ `get`
                user_guid = user['user'].get('user_guid', None)
                username = user['user'].get('username', None)
                first_name = user['user'].get('first_name', None)
                bio = user['user'].get('bio', None)

                # ฺฺฉ ฺฉุฑุฏู ูุฌูุฏ ุงุทูุงุนุงุช ูุจู ุงุฒ ุฏุงูููุฏ
                if user_guid and username and first_name:
                    # ุฏุงูููุฏ ุนฺฉุณ ูพุฑููุงู
                    profile_picture_data = bot.download_profile_picture(user_guid)

                    # ุฐุฎุฑู ฺฉุฑุฏู ุนฺฉุณ ุฏุฑ ูุงู
                    profile_picture_path = f"{username}_profile_picture.jpg"
                    with open(profile_picture_path, "wb") as f:
                        f.write(profile_picture_data)

                    # ุณุงุฎุช ูพุงู ุจุฑุง ุงุฑุณุงู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ู ุนฺฉุณ ูพุฑููุงู
                    result = f"""
๐ **ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ:**

๐ค **ูุงู ฺฉุงุฑุจุฑ:** @{username}  
๐ **ูุงู:** {first_name}  
๐ **ฺฏูุฏ ฺฉุงุฑุจุฑ:** {user_guid if user_guid else 'ูุฏุงุฑุฏ'}  
๐ **ุจูฺฏุฑุงู:** {bio if bio else 'ูุฏุงุฑุฏ'}  
๐ **ุดูุงุฑู:** ูุถุนุช ุจุณุชู
                    """
                    
                    # ุงุฑุณุงู ุนฺฉุณ ูพุฑููุงู ููุฑุงู ุจุง ุงุทูุงุนุงุช
                    message.reply_photo(photo=profile_picture_path, caption=result)
                else:
                    # ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ ุงุทูุงุนุงุชุ ูพุงู ููุงุณุจ ุงุฑุณุงู ูโุดูุฏ
                    message.reply("โ๏ธ ฺฉุงุฑุจุฑ ุฏุงุฑุง ุงุทูุงุนุงุช ฺฉุงู ูุณุช ุง ุงูุช ูุดุฏ.")
            else:
                message.reply("โ๏ธ ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ.")
                
        except Exception as e:
            message.reply("โ๏ธ ูุดฺฉู ุฏุฑ ุฏุณุชุฑุณ ุจู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุง ุฏุงูููุฏ ุนฺฉุณ ูพุฑููุงู ุฑุฎ ุฏุงุฏู ุงุณุช.")
            print(f"ุฎุทุง: {e}")


@bot.on_message_updates(filters.is_group,filters.Commands(['ุจู','ุจูฺฏุฑุงู'],prefixes=''))
def send_bio(message: Updates):
    if not check_status():
        return
    bio =bio_fackt_faz.get_bio()
    
    
    
    res =random.choice(bio)
    message.reply(res)
@bot.on_message_updates(filters.is_group,filters.Commands(['ุนุฌุงุจ','ูฺฉุช'],prefixes=''))
def send_fackts(message: Updates):
    if not check_status():
        return
    fackt =bio_fackt_faz.get_facts()
    res =random.choice(fackt)
    message.reply(res)

@bot.on_message_updates(filters.is_group,filters.Commands(['ุทูุฒ','ุฌูฺฉ'],prefixes=''))
def send_jock(message: Updates) :
    if not check_status():
        return
    jock=bio_fackt_faz.get_jock()
    res=random.choice(jock)
    message.reply(res)
    
    


    
@bot.on_message_updates(filters.is_group,filters.Commands(['ุงูฺฏุฒู','ุงูฺฏุฒุด','ุงูุฏ'],prefixes=''))
def getpoem(message: Updates) :
    if not check_status():
        return
    m =bio_fackt_faz.get_motivation()
    
    res=random.choice(m)
    
    message.reply(res)
    
@bot.on_message_updates(filters.is_group)
def tranlate(message: Updates) :
    text = message.text.strip()
    if not check_status():
        return
    if text.startswith("ุชุฑุฌูู "):  # ูุทูุฆู ุดูู ูุชู ุจูโุฏุฑุณุช ุจุง "ุชุฑุฌูู" ุดุฑูุน ูโุดูุฏ
        message.reply("ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด... ูุทูุงู ุตุจุฑ ฺฉูุฏ ๐")
        
        text_to_translate = text.replace("ุชุฑุฌูู ", "").strip()  # ุญุฐู "ุชุฑุฌูู" ู ูุถุง ุงุถุงู
        if not text_to_translate:
            message.reply("ูุชู ุจุฑุง ุชุฑุฌูู ูุงุฑุฏ ูุดุฏู ุงุณุช. ูุทูุงู ูุชู ุฎูุฏ ุฑุง ูพุณ ุงุฒ 'ุชุฑุฌูู' ูุงุฑุฏ ฺฉูุฏ.")
            return
        
        try:
            # ุชุฑุฌูู ูุชู ุจู ูุงุฑุณ
            translated_text = GoogleTranslator(source='auto', target='fa').translate(text_to_translate)
            message.reply(f"๐ ุชุฑุฌูู ุดูุง: \n\n{translated_text}")
        except Exception as e:
            message.reply("โ๏ธ ูุดฺฉู ุฏุฑ ุชุฑุฌูู ูุชู ุฑุฎ ุฏุงุฏู ุงุณุช. ูุทูุงู ุฏูุจุงุฑู ุงูุชุญุงู ฺฉูุฏ.")
            print(f"Error during translation: {e}")

@bot.on_message_updates(filters.is_group)
def prayer_timess(message: Updates):
    if not check_status():
        return
    text = message.text.replace('ุดุฑุน', "").strip()  
    if message.text.startswith("ุดุฑุน"):
        message.reply("ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด... ูุทูุงู ุตุจุฑ ฺฉูุฏ ๐")
        timings =prayer_times.get_prayer_times(text)
        
        if timings:
            result = (
                f"ุงููุงุช ุดุฑุน ุจุฑุง {text}:\n"
                f"ุตุจุญ: {timings['Fajr']}\n"
                f"ุธูุฑ ู ุนุตุฑ: {timings['Dhuhr']}\n"
                f"ูุบุฑุจ ู ุนุดุง: {timings['Maghrib']}"
            )
            message.reply(result)  
        else:
            message.reply('ุดูุฑ ูุงูุนุชุจุฑ ุงุณุช ุง ุงุทูุงุนุงุช ุฏุฑ ุฏุณุชุฑุณ ูุณุช.')
  

        
@bot.on_message_updates(filters.is_group,filters.Commands(['ุชุฑุณูุงฺฉ','ุงุฌูู','ุงุฑูุงุญ'],prefixes=''))
def get_fery(message: Updates)  :
    if not check_status():
        return
    tarsnak =bio_fackt_faz.get_fear()
    
    res=random.choice(tarsnak)
    message.reply(res)

@bot.on_message_updates(filters.is_group,filters.Commands(['ุญุฏุซ'],prefixes=''))
def send_hadic(message: Updates):
    if not check_status():
        return
    h=bio_fackt_faz.get_hadis()
    res=random.choice(h)
    message.reply(res)
    
  


    
@bot.on_message_updates(filters.is_group,filters.Commands(['ุฏุงููฺฏ','ุตุฏุง'],prefixes='')) 
def send_love(message: Updates):
    if not check_status():
        return
    d=bio_fackt_faz.get_dialog()
    res=random.choice(d)  
    message.reply(res)
    
@bot.on_message_updates(filters.is_group,filters.Commands(['ุฏุงูุณุชู'],prefixes='')) 
def send_love(message: Updates):
    if not check_status():
        return
    d=bio_fackt_faz.get_danestani()
    res=random.choice(d)  
    message.reply(res)
    


@bot.on_message_updates(filters.is_group,filters.Commands(['ุดูุงุฑู'],prefixes=''))
def send_number(message: Updates):
    if not check_status():
        return
    phone_number, operator = generate_phone_number()
    message.reply(f"ุดูุงุฑู ุชุตุงุฏู ุดูุง: {phone_number}\nุงูพุฑุงุชูุฑ: {operator}")

    
    
@bot.on_message_updates(filters.Commands(['ููุฒฺฉ'],prefixes=''), filters.is_group)
async def music(update: Updates):
    if not check_status():
        return
    user_id = update.object_guid

    # ุงฺฏุฑ ฺฉุงุฑุจุฑ ุฏุฑ ุญุงู ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุช ุงุณุชุ ุจู ฺฉุงุฑุจุฑ ุฌุฏุฏ ูพุงุณุฎ ุฏุงุฏู ูุดูุฏ
    if any('style' in user for user in user_data.values()):
        await update.reply("ูุทูุงู ุตุจุฑ ฺฉูุฏุ ฺฉ ฺฉุงุฑุจุฑ ุฏฺฏุฑ ุฏุฑ ุญุงู ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุช ุงุณุช.")
        return

    # ุงุฌุงุฏ ุฏฺฉุดูุฑ ุฌุฏุฏ ุจุฑุง ุฐุฎุฑู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
    user_data[user_id] = {}

    welcome_message = (
        "ุณูุงู! ๐ถ\n"
        "ูู ฺฉ ุฑุจุงุช ุจุฑุง ุณุงุฎุช ุขููฺฏ ูุณุชู. ุจุง ุงุณุชูุงุฏู ุงุฒ ูุณุช ุฒุฑ ูโุชูุงูุฏ ฺฉ ุณุจฺฉ ููุณู ุงูุชุฎุงุจ ฺฉูุฏ.\n\n"
        "ูุทูุงู ุนุฏุฏ ูุฑุชุจุท ุจุง ุณุจฺฉ ููุฑุฏ ูุธุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:\n\n"
    )
    styles = "\n".join(music_styles)
    await update.reply(welcome_message + styles)

# ููุฏูุฑ ุจุฑุง ููุงุด ุฑุงูููุง
@bot.on_message_updates(filters.Commands(['ฺฉูฺฉ'],prefixes=''), filters.is_group)
async def help_command(update: Updates):
    if not check_status():
        return
    help_message = (
        "/ููุฒฺฉ - ุดุฑูุน ู ุงูุชุฎุงุจ ุณุจฺฉ ููุณู\n"
        "/ฺฉูฺฉ - ุฏุฑุงูุช ุฑุงูููุง\n"
        "ูพุณ ุงุฒ ุงูุชุฎุงุจ ุณุจฺฉุ ุงุฒ ุดูุง ุฎูุงุณุชู ูโุดูุฏ ูุชู ุขููฺฏ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ."
    )
    await update.reply(help_message)

# ููุฏูุฑ ุจุฑุง ุฏุฑุงูุช ุณุจฺฉ ู ูุชู ุขููฺฏ
@bot.on_message_updates(filters.is_group)
async def choose_style(update: Updates):
    user_id = update.object_guid
    if not check_status():
        return

    # ููุท ุจู ฺฉุงุฑุจุฑุงู ฺฉู ุฏุณุชูุฑ "/ููุฒฺฉ" ุฑุง ูุฑุณุชุงุฏูโุงูุฏ ูพุงุณุฎ ุจุฏูุฏ
    if user_id not in user_data:
        return

    # ุงฺฏุฑ ฺฉุงุฑุจุฑ ูููุฒ ุณุจฺฉ ุงูุชุฎุงุจ ูฺฉุฑุฏู
    if 'style' not in user_data[user_id]:
        try:
            # ุฏุฑุงูุช ุดูุงุฑู ุงูุชุฎุงุจ ฺฉุงุฑุจุฑ
            style_index = int(update.message.text.strip()) - 1
            if 0 <= style_index < len(music_styles):
                style_name = music_styles[style_index].split("- ")[1]
                user_data[user_id]['style'] = style_name
                await update.reply(f"ุณุจฺฉ {style_name} ุงูุชุฎุงุจ ุดุฏ. ๐ถ\nุญุงูุง ูุชู ุขููฺฏ ุฑู ุงุฑุณุงู ฺฉู:")
            else:
                await update.reply("ูุทูุงู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ุงูุชุฎุงุจ ฺฉูุฏ.")
        except ValueError:
            await update.reply("ูุทูุงู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ุงูุชุฎุงุจ ฺฉูุฏ.")

    # ุฏุฑุงูุช ูุชู ุขููฺฏ
    elif 'text' not in user_data[user_id]:
        user_data[user_id]['text'] = update.message.text.strip()
        await update.reply("ููุชุธุฑ ุจุงุด ุชุง ุขููฺฏุช ุณุงุฎุชู ุจุดู ๐ต...")

        # ุณุงุฎุช ููุณู ุจุง API
        style = user_data[user_id]['style']
        text = user_data[user_id]['text']
        music_url = await create_music(style, text)

        if music_url:
            # ุฏุงูููุฏ ู ุงุฑุณุงู ุขููฺฏ ุจู ฺฉุงุฑุจุฑ
            await send_music(update, music_url)
        else:
            await update.reply("ูุดฺฉู ุฏุฑ ุณุงุฎุช ููุณู ูพุด ุขูุฏ. ูุทูุงู ุฏูุจุงุฑู ุงูุชุญุงู ฺฉูุฏ.")

        # ูพุงฺฉ ฺฉุฑุฏู ุฏุชุง ุจุนุฏ ุงุฒ ุงุฑุณุงู ุขููฺฏ
        del user_data[user_id]

# ุชุงุจุน ุจุฑุง ุณุงุฎุช ููุณู ุจุง API
async def create_music(style, text):
    api_url = "https://api.api-code.ir/c-music/"
    params = {
        "style": style.replace(' ', '').lower(),  # ุชุบุฑ ุณุจฺฉ ุจู ูุฑูุช ููุงุณุจ ุจุฑุง API
        "text": text.replace(' ', '+')  # ุฌุงฺฏุฒู ูุงุตููโูุง ุจุง + ุจุฑุง API
    }
    
    try:
        response = requests.get(api_url, params=params)
        if response.status_code == 200:
            data = response.json()
            if data["status"] == "success":
                return data["music_url"]
        return None
    except Exception as e:
        print(f"Error in API request: {e}")
        return None

# ุชุงุจุน ุจุฑุง ุฏุงูููุฏ ู ุงุฑุณุงู ููุณู
async def send_music(update: Updates, music_url):
    try:
        music_response = requests.get(music_url)
        if music_response.status_code == 200:
            file_name = "music.mp3"
            with open(file_name, "wb") as f:
                f.write(music_response.content)
            await update.reply('ููุชุธุฑุจูุงูุฏ ุชุง ูพุฑุฏุงุฒุด ฺฉูู')
            # ุงุฑุณุงู ูุงู ููุณู ุจู ฺฉุงุฑุจุฑ
            await update.reply_document(file_name, caption="ุงู ูู ุขููฺฏุช ๐ต")
        else:
            await update.reply("ูุดฺฉู ุฏุฑ ุฏุงูููุฏ ููุณู ูพุด ุขูุฏ.")
    except Exception as e:
        print(f"Error in downloading music: {e}")
        await update.reply("ูุดฺฉู ุฏุฑ ุฏุงูููุฏ ููุณู ูพุด ุขูุฏ.")
    


        
    
@bot.on_message_updates(filters.is_group)
async def riazi(update: Updates):
    expression = update.text.replace("ุฑุงุถ", "").strip()
    if not check_status():
        return
    if update.text.startswith("ุฑุงุถ"):
        await update.reply("ุฏุฑุญุงู ูุญุงุณุจู")
        # ุจุฑุฑุณ ูุฌูุฏ ุนูุงูุช ุณุคุงู
        if '?' in expression:
            await update.reply('ูุทูุงู ูุฑูุช ุฏุณุชูุฑ ุฑุง ุจู ุฏุฑุณุช ูุงุฑุฏ ฺฉูุฏ. ูุงููุฏ: `2 + 22` (ุจุฏูู ุนูุงูุช ุณุคุงู)')
            return
        
        # ุจุฑุฑุณ ูุฑูุช ูุฑูุฏ
        if re.match(valid_expression_pattern, expression):
            try:
                # ูุญุงุณุจู ูุชุฌู
                result = eval(expression)  # ูุญุงุณุจู ูุชุฌู
                response = f'ูุชุฌู {expression} ุจุฑุงุจุฑ ุงุณุช ุจุง: {result}'
            except Exception as e:
                response = 'ุฎุทุง ุฏุฑ ูุญุงุณุจู: ูุทูุงู ุนุจุงุฑุช ุฑุงุถ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.'
        else:
            response = 'ูุทูุงู ูุฑูุช ุฏุณุชูุฑ ุฑุง ุจู ุฏุฑุณุช ูุงุฑุฏ ฺฉูุฏ. ูุงููุฏ: `2 + 22`'
        
        await update.reply(response)


    
    
    

 
@bot.on_message_updates(filters.is_group)
async def save_user_bot(update: Updates):
    text = update.text.strip()
    user_id = str(update.author_guid)  # ุงุณุชูุงุฏู ุงุฒ user_id ููุญุตุฑุจูโูุฑุฏ ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ
    if not check_status():
        return
    # ุจุฑุฑุณ ูุฑูุช ูพุงู ฺฉุงุฑุจุฑ
    if text.startswith("ุจุงุช:"):
        name = text.split("ุจุงุช:")[1].strip()  # ุฏุฑุงูุช ูุงู ุงุฒ ูพุงู ฺฉุงุฑุจุฑ
        if name:
            save_user_name(user_id, name)  # ุฐุฎุฑู ูุงู ฺฉุงุฑุจุฑ ููุฑุงู ุจุง user_id
            await update.reply("ูุงู ุดูุง ุจุง ููููุช ุฐุฎุฑู ุดุฏ.")
        else:
            await update.reply("ูุทูุงู ูุงู ุฎูุฏ ุฑุง ุจุง ูุฑูุช ุตุญุญ ูุงุฑุฏ ฺฉูุฏ: ุจุงุช : [ูุงู ุดูุง]")
    elif text == "ุจุงุช":
        name = get_user_name(user_id)  # ุจุงุฒุงุจ ูุงู ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ user_id
        if name:
            
            descriptions = [
    f"{name} ุนุฒุฒุ ุฎูุดโุขูุฏุฏ!",
    f"{name} ุฌุงูุ ุงุฒ ุฏุฏูุช ุฎูุดุญุงูู!",
    f"{name} ฺฏุฑุงูุ ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู!",
    f"ุจู ุฌูุน ูุง ุฎูุดโุขูุฏุฏุ {name} ุฏูุณุช ุนุฒุฒ!",
    f"{name} ูุงุฒููุ ูุฏููุชุงู ุณุฑุดุงุฑ ุงุฒ ูุทู ุงุณุช!",
    f"{name} ฺฏุฑุงูุ ุญุถูุฑุชุงู ููุฌุจ ุงูุชุฎุงุฑ ุงุณุช!",
    f"ุจุงุนุซ ุฎูุดุญุงู ุงุณุช ฺฉู ุดูุง ุฑุง ุงูุฌุง ุฏุงุฑูุ {name} ุนุฒุฒ!",
    f"{name} ุฌุงูุ ุญุถูุฑ ุดูุง ูุงู ุฏูฺฏุฑู ุงุณุช!",
    f"ุฎูุดุญุงูู ฺฉู ููุฑุงู ุดูุง ูุณุชูุ {name} ุนุฒุฒ!",
    f"{name} ุฏูุณุช ูุญุชุฑูุ ุฎูุด ุขูุฏุฏ ู ุฑูุฒ ุฎูุด!",
    f"ฺู ุณุนุงุฏุช ฺฉู ุดูุง ุฑุง ูโุจููุ {name} ฺฏุฑุงู!",
    f"{name} ุจุฒุฑฺฏูุงุฑุ ุญุถูุฑ ุดูุง ุฑุง ฺฏุฑุงู ูโุฏุงุฑู!",
    f"{name} ุฌุงูุ ุจุงุนุซ ุงูุชุฎุงุฑ ุงุณุช ฺฉู ุดูุง ุฑุง ุฏุฑ ฺฉูุงุฑ ุฎูุฏ ุฏุงุฑู!",
    f"ุงุฒ ููุฑุงู ุดูุง ุฎุฑุณูุฏูุ {name} ุนุฒุฒ!",
    f"{name} ูุงุฒููุ ุจู ูุง ุจูพููุฏุฏ ู ูุฐุช ุจุจุฑุฏ!",
    f"{name} ุฌุงูุ ุจุงุนุซ ุฏูฺฏุฑู ูุง ูุณุชุฏ!",
    f"{name} ฺฏุฑุงูุ ูุฏููุชุงู ูุจุงุฑฺฉ ุจุงุดุฏ!",
    f"{name} ุฏูุณุช ุฏูุณุชโุฏุงุดุชูุ ุจู ุงู ุฌูุน ุตูู ุฎูุด ุขูุฏุฏ!",
    f"{name} ุนุฒุฒุ ุญุถูุฑุชุงู ุณุฑุดุงุฑ ุงุฒ ุงูุฑฺ ูุซุจุช ุงุณุช!",
    f"{name} ุฌุงูุ ุงุฒ ุฏุฏุงุฑ ุดูุง ูุฐุช ูโุจุฑู!",
    f"{name} ฺฏุฑุงูุ ููุดู ุฏุฑ ุฎุฏูุช ุดูุง ูุณุชู!",
    f"{name} ูุงุฒููุ ุจู ฺฏุฑู ุงุฒ ุดูุง ุงุณุชูุจุงู ูโฺฉูู!",
    f"{name} ุฌุงูุ ุญุถูุฑุชุงู ุงูุฌุง ุฑุง ููุฑุงู ฺฉุฑุฏู ุงุณุช!",
    f"{name} ฺฏุฑุงูุ ุจู ูุง ุจูพููุฏุฏ ู ุงุฒ ููุฑุงูโุชุงู ุจูุฑู ุจุจุฑู!",
    f"{name} ุฏูุณุช ูุญุชุฑูุ ุฏุฏุงุฑุชุงู ูุงู ุฎูุดููุช ุงุณุช!",
    f"ุฎูุดุญุงูู ฺฉู ุดูุง ุฑุง ฺฉูุงุฑ ุฎูุฏ ุฏุงุฑูุ {name} ุนุฒุฒ!",
    
    f"{name} ุนุฒุฒุ ุจู ูุญูู ูุง ุฎูุด ุขูุฏุฏ. ุฏุนุง ูุง ุจุฑุง ุดูุง ููุดู ุจุฑูุฑุงุฑ ุงุณุช!",
    f"{name} ฺฏุฑุงูุ ุงุฒ ุขูุฏูุชุงู ุฏุฑ ุงู ูฺฉุงู ููุฑุงู ุฎุฑุณูุฏู. ุงูโุดุงุกุงููู ุฑูุฒฺฏุงุฑ ุดูุง ุณุฑุดุงุฑ ุงุฒ ุจุฑฺฉุช ุจุงุดุฏ!",
    f"{name} ุฌุงูุ ูุฌูุฏ ุดูุง ุฏุฑ ุงูุฌุง ูุงู ุจุฑฺฉุช ู ุฑุญูุช ุงุณุช. ุฎุฏุงููุฏ ุดูุง ุฑุง ุญูุธ ฺฉูุฏ!",
    f"ุฎูุด ุขูุฏุฏุ {name} ุจุฒุฑฺฏูุงุฑ! ุงูุฏ ุงุณุช ุงู ุฌูุน ุจุชูุงูุฏ ุงููุงูโุจุฎุด ุดูุง ุจุงุดุฏ.",
    f"{name} ุนุฒุฒุ ุญุถูุฑ ุดูุง ููุฌุจ ุงูุชุฎุงุฑ ูุงุณุช. ุฏุนุงฺฏู ุดูุง ูุณุชู!",
    f"{name} ฺฏุฑุงูุ ุงูุฏ ุฏุงุฑู ฺฉู ุฏุฑ ุงู ุฌูุน ุฑุญูุช ุงูู ุดุงูู ุญุงู ุดูุง ุจุงุดุฏ!",
    f"{name} ูุงุฒููุ ุฎูุดุญุงูู ฺฉู ุฏุฑ ุงู ูุถุง ูุนูู ุจุง ุดูุง ูุณุชู. ุฎุฏุงููุฏ ููุฑุงู ุดูุง ุจุงุดุฏ!",
    f"ุจู ุฌูุน ูุง ุฎูุด ุขูุฏุฏุ {name} ุนุฒุฒ! ุงูโุดุงุกุงููู ุฒูุฏฺฏโุชุงู ูพุฑ ุงุฒ ุฎุฑ ู ุจุฑฺฉุช ุจุงุดุฏ.",
    f"{name} ุฌุงูุ ุงูุฏ ุงุณุช ุงู ุฌูุน ุจู ุดูุง ุขุฑุงูุด ู ุฏูฺฏุฑู ุจุจุฎุดุฏ!",
    f"{name} ุจุฒุฑฺฏูุงุฑุ ุงุฒ ูุฌูุฏ ุดูุง ุฏุฑ ุงูุฌุง ุจุณุงุฑ ุฎุฑุณูุฏู. ุฎุฏุงููุฏ ููุดู ุงุฑ ู ุงูุฑุชุงู ุจุงุดุฏ!",
    f"{name} ฺฏุฑุงูุ ุดูุง ุฑุง ุจู ุฌูุน ุตูู ู ุจุง ูุญุจุช ุฏุนูุช ูโฺฉูู. ุฏุนุง ุฎุฑ ูุง ุจุง ุดูุงุณุช!",
    f"{name} ุนุฒุฒุ ุฎูุดุญุงูู ฺฉู ุฏุฑ ฺฉูุงุฑ ุดูุง ูุณุชู. ุงูุฏูุงุฑู ุงู ุฌูุน ุจุฑุง ุดูุง ุขุฑุงูุดโุจุฎุด ุจุงุดุฏ!",
    f"{name} ุฌุงูุ ุฏุนุง ูุง ููุดู ุฏุฑ ุญู ุดูุง ุฌุงุฑ ุงุณุช. ุงูุฏูุงุฑู ุฑูุฒูุง ุฎูุด ุฏุฑ ูพุด ุฏุงุดุชู ุจุงุดุฏ!",
    f"{name} ุจุฒุฑฺฏูุงุฑุ ุจู ุฌูุน ูุง ุฎูุด ุขูุฏุฏ. ุฏุฑ ฺฉูุงุฑ ูู ุฏุนุงฺฏู ฺฉุฏฺฏุฑ ุฎูุงูู ุจูุฏ.",
    f"{name} ุนุฒุฒุ ุงูุฏูุงุฑู ุงุฒ ูุญุถุฑ ูพุฑ ุจุฑฺฉุช ุงู ุฌูุน ุจูุฑูโููุฏ ุดูุฏ.",
    f"{name} ุฌุงูุ ุงุฒ ุญุถูุฑุชุงู ุฏุฑ ุงู ุฌูุน ูุนูู ุจุณุงุฑ ุฎุฑุณูุฏู. ุฏุนุง ูุง ููุดู ุจุง ุดูุงุณุช!",
    f"{name} ฺฏุฑุงูุ ุดูุง ุฏุฑ ุงูุฌุง ูุงู ุจุฑฺฉุช ูุณุชุฏ. ุฏุนุงฺฏู ุดูุง ุฎูุงูู ุจูุฏ!",
    f"{name} ุนุฒุฒุ ุฎูุดุญุงูู ฺฉู ุฏุฑ ุงู ุฌูุน ูุนูู ุจุง ุดูุง ูุณุชู. ุฏุนุง ูุง ููุดู ุจุง ุดูุงุณุช!",
    f"{name} ุฌุงูุ ุฎูุดุญุงูู ฺฉู ุฏุฑ ฺฉูุงุฑ ุดูุง ูุณุชู. ุงูโุดุงุกุงููู ูููุงุฑู ุฏุฑ ูุณุฑ ููุฑ ู ูุฏุงุช ุจุงุดุฏ!",
    f"{name} ูุงุฒููุ ุจู ุฌูุน ูุง ุฎูุด ุขูุฏุฏ. ุงูุฏูุงุฑู ุงุฒ ูุญุถุฑ ูพุฑ ุจุฑฺฉุช ุงู ุฌูุน ุจูุฑูโููุฏ ุดูุฏ!",
    f"{name} ุนุฒุฒุ ุฏุนุง ูุง ุจุฑุง ุดูุง ุฏุฑ ุงู ุฌูุน ุฌุงุฑ ุงุณุช. ุงูุฏูุงุฑู ุฒูุฏฺฏโุชุงู ูพุฑุจุฑฺฉุช ุจุงุดุฏ!",
    f"{name} ุฌุงูุ ุฎูุดุญุงูู ฺฉู ุฏุฑ ฺฉูุงุฑ ุดูุง ูุณุชู. ุงูโุดุงุกุงููู ูููุงุฑู ุฏุฑ ูุณุฑ ูุฏุงุช ุจุงุดุฏ!",
    f"{name} ุจุฒุฑฺฏูุงุฑุ ุงุฒ ููุฑุงู ุดูุง ุจุณุงุฑ ุฎูุดุญุงูู. ุฎุฏุงููุฏ ุดูุง ุฑุง ููุดู ุฏุฑ ูพูุงู ุฎูุฏ ูฺฏู ุฏุงุฑุฏ!"
]

  

            await update.reply(random.choice(descriptions))
        else:
            await update.reply("ูุทูุงู ุงุจุชุฏุง ูุงู ุฎูุฏ ุฑุง ุจุง ูุฑูุช `ุจุงุช : [ูุงู ุดูุง]` ูุงุฑุฏ ฺฉูุฏ.")       
    elif text.startswith("user"):
        users = get_all_users()  # ุจุงุฒุงุจ ูุณุช ฺฉุงุฑุจุฑุงู
        if users:
            user_list = "\n".join(users)
            await update.reply(f"ฺฉุงุฑุจุฑุงู ุฐุฎุฑูโุดุฏู:\n{user_list}")
        else:
            await update.reply("ูฺ ฺฉุงุฑุจุฑ ุฐุฎุฑู ูุดุฏู ุงุณุช.")  
@bot.on_message_updates(filters.is_group)
async def code_run(update: Updates):
    if not check_status():
        return
    text = update.text.strip()  # ุฏุฑุงูุช ูุชู ูพุงู
    if text.startswith("run:"):
        code = text.replace("run:", "", 1).strip()  # ุญุฐู "run:" ู ูุถุงูุง ุงุถุงู
        await update.reply("ุฏุฑ ุญุงู ุฎุฑูุฌ ฺฏุฑูุชู...")  # ุงุทูุงุน ุจู ฺฉุงุฑุจุฑ

        result = await execute_code(code)  # ุงุฌุฑุง ฺฉุฏ ู ุฏุฑุงูุช ูุชุฌู

        # ุจุฑุฑุณ ุทูู ูุชุฌู
        if len(result) > 4096:  # ุงฺฏุฑ ูุชุฌู ุจุดุชุฑ ุงุฒ 4096 ฺฉุงุฑุงฺฉุชุฑ ุจุงุดุฏ
            await update.reply("ุฎุฑูุฌ ุจุณุงุฑ ุทููุงู ุงุณุชุ ูุทูุงู ฺฉุฏ ุฑุง ฺฉูุชุงูโุชุฑ ฺฉูุฏ.")
        else:
            # ุงุฑุณุงู ูุชุฌู ุจู ฺฉุงุฑุจุฑ
            await update.reply(f"ูุชุฌู:\n{result}\n")
@bot.on_message_updates(filters.is_group,filters.Commands(['ููู'], prefixes=''))
async def lock_group(update: Updates):
    group = update.object_guid
    if not check_status():
        return
    if group and await update.is_admin(user_guid=update.author_guid):
    
        await bot.set_group_default_access(
            group_guid=group,
            access_list=[]  # ุญุฐู ุฏุณุชุฑุณ ุงุฑุณุงู ูพุงู
        )
        await update.reply("โ ฺฏุฑูู ููู ุดุฏ. ฺฉุงุฑุจุฑุงู ููโุชูุงููุฏ ูพุงู ุงุฑุณุงู ฺฉููุฏ.")
    
@bot.on_message_updates(filters.is_group , filters.Commands(['ุจุงุฒ'], prefixes=''))
async def unlock_group(update: Updates):
    group = update.object_guid
    if not check_status():
        return
    if group and await update.is_admin(user_guid=update.author_guid):
        
    
        print("Unlocking group with GUID:", group)  # ุฏุจุงฺฏ GUID
        try:
            await bot.set_group_default_access(
                group_guid=group,
                access_list=["SendMessages"]  # ูุนุงู ฺฉุฑุฏู ุงุฑุณุงู ูพุงู
            )
            await update.reply("๐ ฺฏุฑูู ุจุงุฒ ุดุฏ. ุงฺฉููู ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ูพุงู ุงุฑุณุงู ฺฉููุฏ.")
        except Exception as e:
            print("Error while unlocking group:", e)
            await update.reply("ุฎุทุง ุฏุฑ ุจุงุฒ ฺฉุฑุฏู ฺฏุฑูู. ูุทูุงู ุฏูุจุงุฑู ุงูุชุญุงู ฺฉูุฏ.")
            
            



@bot.on_message_updates(filters.is_group,filters.Commands(['ูุฏุงุญ'],prefixes='')) 
async def send_random_audio(update: Updates):
    
    if not check_status():
        return
    guid =update.object_guid
    url = 'https://kashoob.com/playlist/9GOj9/%D9%85%D8%AF%D8%A7%D8%AD%DB%8C-%D9%87%D8%A7%DB%8C-%D8%AD%D9%85%D8%A7%D8%B3%DB%8C-%D9%85%D8%A8%D8%A7%D8%B1%D8%B2%D9%87-%D8%A8%D8%A7-%D8%A7%D8%B3%D8%B1%D8%A7%D8%A6%DB%8C%D9%84'
    
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    # ูพุฏุง ฺฉุฑุฏู ุชูุงู ุชฺฏโูุง <div> ฺฉู ูฺฺฏ data-url ุฏุงุฑูุฏ
    audio_links = [div['data-url'] for div in soup.find_all('div', {'data-url': True})]
    await update.reply("ุฏุฑุญุงู ูพุฑุฏุงุฒุด ูุณุชู ุจู ุฒูุฏ ุฏุฑูุณฺฉุงู ุงุฌุฑุง ูุดู ..")
    # ุงฺฏุฑ ููฺฉโูุง ููุฌูุฏ ุจุงุดูุฏ
    if audio_links:
        # ุงูุชุฎุงุจ ฺฉ ููฺฉ ุฑูุฏู ุงุฒ ูุณุช
        audio_url = random.choice(audio_links)

        # ุงุฑุณุงู ููฺฉ ุตูุช ุจู ฺุช
        await bot.voice_chat_player(guid,audio_url)
    else:
        await update.reply('ูฺ ูุงู ุตูุช ูพุฏุง ูุดุฏ.')
 
    

@bot.on_chat_updates(filters.text, filters.is_group)
async def check_join_leave(update: Updates):
    if not check_status():
        return

    message_text = update.text.lower()
    user_name = update.author_guid or "ฺฉุงุฑุจุฑ"  # ูุงู ฺฉุงุฑุจุฑ ุง ูพุดโูุฑุถ
    current_time = datetime.now().strftime("%H:%M")  # ุฒูุงู ูุนู ุจูโุตูุฑุช ุณุงุนุช ู ุฏููู

    # ุดูุงุณุง ูุฑูุฏ ฺฉุงุฑุจุฑ
    if match_patterns(message_text, welcome_patterns):
        welcome_message = random.choice(welcome_messages)
        await update.reply(welcome_message.format(name=user_name, time=current_time))

    # ุดูุงุณุง ุฎุฑูุฌ ฺฉุงุฑุจุฑ
    elif match_patterns(message_text, farewell_patterns):
        farewell_message = random.choice(farewell_messages)
        await update.reply(farewell_message.format(name=user_name, time=current_time))

@bot.on_message_updates(filters.text,filters.is_group) 
async def updates_questions(update: Updates):
    message_text = update.text
    questions_and_answers=bio_fackt_faz.get_question()
    global last_question, last_answer
    if not check_status():
        return
    
    message_text = update.text

    if message_text == 'ุฌูุงุจ':
        if last_question and last_answer:
            await update.reply(f"ุณูุงู: {last_question}\nุฌูุงุจ: {last_answer}")
        else:
            random_qa = random.choice(questions_and_answers)
            last_question = random_qa["question"]
            last_answer = random_qa["answer"]
            await update.reply(last_question)
    elif message_text == 'ููููุฏู':
        if last_question and last_answer:
            await update.reply(f"ุณูุงู: {last_question}\nุฌูุงุจ: {last_answer}")
        else:
            await update.reply("ูฺ ุณูุงู ุจุฑุง ูพุงุณุฎ ุฏุงุฏู ูุฌูุฏ ูุฏุงุฑุฏ.")
    elif message_text == 'ุจูพุฑุณ':
        random_qa = random.choice(questions_and_answers)
        last_question = random_qa["question"]
        last_answer = random_qa["answer"]
        await update.reply(last_question)
        
@bot.on_message_updates(filters.text,filters.is_group,filters.Commands(['ุฐฺฉุฑ'],prefixes='')) 
async def send_zeker(update: Updates):
    if not check_status():
        return
    zekr_message = bio_fackt_faz.get_zeker()  # ูุฑุงุฎูุงู ุชุงุจุน ุฐฺฉุฑ
    
    await update.reply(zekr_message)
    
           
           
@bot.on_message_updates(filters.text,filters.is_group)
async def send_music_gapp(update: Updates):
    user_message = update.text.strip()
    if not check_status():
        return
    # ุจุฑุฑุณ ุดุฑูุน ูพุงู ุจุง "ุณุฑฺ"
    if user_message.startswith("ุงุฑุณุงู"):
        await update.reply("ุตุจุฑฺฉูุฏ ูุทูุง ...")
        search_text = user_message[len("ุงุฑุณุงู"):].strip()
        song_info = get_song(search_text)
        
        if "error" in song_info:
            await update.reply(song_info["error"])
        else:
            song_title = song_info["title"]
            song_url = song_info["song"]
            
            # ุงุทูุงุนโุฑุณุงู ู ุงุฑุณุงู ุขููฺฏ ุจุง ูุชุฏ reply_music
            await update.reply(f"ุขููฺฏ ุงูุช ุดุฏ: {song_title}\nุฏุฑ ุญุงู ุงุฑุณุงู ุขููฺฏ...")
            await update.reply_music(song_url, caption=f"ุขููฺฏ ููุฑุฏ ูุธุฑ ุดูุง ุงูุช ุดุฏ:\n{song_title}")


@bot.on_message_updates(filters.text,filters.is_group)
async def send_music_voice_call(update: Updates) :
    if not check_status():
        return
    user_message = update.text.strip()
    guid =update.object_guid
    # ุจุฑุฑุณ ุดุฑูุน ูพุงู ุจุง "ุณุฑฺ"
    bot.leave_group_voice_chat()
    if user_message.startswith("ุณุฑฺ"):
        await update.reply("ุตุจุฑฺฉูุฏ ูุทูุง ...")
        
        search_text = user_message[len("ุณุฑฺ"):].strip()
        song_info = get_song(search_text)
        
        if "error" in song_info:
            await update.reply(song_info["error"])
        else:
            song_title = song_info["title"]
            song_url = song_info["song"]
            
            # ุงุทูุงุนโุฑุณุงู ู ุงุฑุณุงู ุขููฺฏ ุจุง ูุชุฏ reply_music
            await update.reply(f"ุขููฺฏ ุงูุช ุดุฏ: {song_title}\nุฏุฑ ุญุงู ุงุฑุณุงู ุขููฺฏ...")
            await bot.voice_chat_player(guid,song_url)
            await update.reply(f"ุขููฺฏ ููุฑุฏ ูุธุฑ ุดูุง ุงูุช ุดุฏ ูุฏุฑูุณฺฉุงู ูุชููุฏ ฺฏูุด ฺฉูุฏ: \n{song_title}" )
            
            

        
    

    
             
@bot.on_message_updates(filters.text,filters.is_group,filters.Commands(['ุชูุฑ_ููฺฉ','ูููุถ','ููฺฉ_ูููุถ'],prefixes=''))    
async def set_new_group_link(update: Updates):
    if not check_status():
        return
    group_guid=update.object_guid
    if group_guid and await update.is_admin(user_guid=update.author_guid):
        
        new_link =await bot.set_group_link(group_guid)
        await update.reply(f"ููฺฉ ูุบุฑุงูุช ููุจู ูููุถ ุดุฏ!.")
        
    
            
@bot.on_message_updates(filters.text,filters.is_group,filters.Commands(['ุงุณุชุฎุงุฑู'],prefixes=''))  
async def estekhare(update: Updates) :
    if not check_status():
        return
    await update.reply("ุฏุฑุญุงู ุจู ุฏุฑุณุช ุงูุฑุฏู ุงุณุชุฎุงุฑู")
    estekhare_data=fetch_estekhare()
    if estekhare_data:
        result = (
            f"๐ **ูุชุฌู ุงุณุชุฎุงุฑู:**\n\n"
            f"**ุณูุฑู:** {estekhare_data['result']['soreh']}\n"
            f"**ุขู:** {estekhare_data['result']['ayeh']}\n"
            f"**ูุชุฌู:** {estekhare_data['result']['natijeh']}\n"
            f"**ูุชุฌู ฺฉู:** {estekhare_data['result']['natijeh_kolli']}\n"
            f"**ูุชุฌู ุงุฒุฏูุงุฌ:** {estekhare_data['result']['natijeh_ezdevaj']}\n"
            f"**ูุชุฌู ูุนุงููู:** {estekhare_data['result']['natijeh_moameleh']}\n"
        )
        await update.reply(result)  # ุงุฑุณุงู ูุชุฌู ุจู ฺฉุงุฑุจุฑ
    else:
        await update.reply("โ๏ธ ูุดฺฉู ุฏุฑ ุฏุฑุงูุช ุงุทูุงุนุงุช ุงุณุชุฎุงุฑู ูพุด ุขูุฏ. ูุทูุง ูุฌุฏุฏุง ุชูุงุด ฺฉูุฏ.")

@bot.on_message_updates(filters.text , filters.is_group)
async def phone_info(update: Updates):
    if not check_status():
        return
    text = update.text.strip()

    # ุจุฑุฑุณ ุงูฺฉู ุขุง ูุชู ุจุง "number" ุดุฑูุน ูโุดูุฏ ุง ูู
    if text.startswith("number"):
        phone_number = text[len("number"):].strip()  # ุญุฐู "number" ู ูุถุง ุฎุงู
        if phone_number:  # ุจุฑุฑุณ ุงูฺฉู ุขุง ุดูุงุฑูโุง ูุฌูุฏ ุฏุงุฑุฏ
            await update.reply("ุฏุฑ ุญุงู ุงูุชู ุงุทูุงุนุงุช ุดูุงุฑู...")
            res = get_phone_info(phone_number)  # ุฏุฑุงูุช ุงุทูุงุนุงุช ุดูุงุฑู
            await update.reply(res)  # ุงุฑุณุงู ุงุทูุงุนุงุช ุจู ฺฉุงุฑุจุฑ
        else:
            await update.reply("ูุทูุงู ุดูุงุฑู ุชููู ุฑุง ูุงุฑุฏ ฺฉูุฏ. ูุซุงู: `number: +989123456789`")


@bot.on_message_updates(filters.text , filters.is_group)
async def send_qr_code(update: Updates):
    user_input = update.text.strip()
    if not check_status():
        return
    if user_input.startswith("qr:"):
        user_input =user_input.replace("qr","")
        await update.reply("ุฏุฑ ุญุงู ุงุฌุงุฏ ฺฉุฏ QR ุงุฒ ุฏุงุฏู ุดูุง...")

        # ุงุฌุงุฏ ฺฉุฏ QR ู ุฏุฑุงูุช ูุณุฑ ุชุตูุฑ
        img_path = create_qr_code(user_input)
        
        # ุงุฑุณุงู ุชุตูุฑ ฺฉุฏ QR ุจู ฺฉุงุฑุจุฑ
        await update.reply_photo(photo=img_path)

        # ุญุฐู ุชุตูุฑ ุจุนุฏ ุงุฒ ุงุฑุณุงู
        if os.path.exists(img_path):
            os.remove(img_path)

@bot.on_message_updates(filters.text , filters.is_group)          
async def find_emoji(update: Updates):
    if not check_status():
        return
    text = update.text
    response = find_emoji_response(text)

    if response:
        await update.reply(response)          
          
       
@bot.on_message_updates(filters.text , filters.is_group)
async def ip_addr(update: Updates):
    if not check_status():
        return
    text =update.text.strip()
    
    if text.startswith("ip:"):
        await update.reply("ุฏุฑุญุงู ุจู ุฏุณุช ุงูุฑุฏู  ุงูพ ุณุงุช")
        text =text.replace("ip:","")
        
        res=get_ip_address(text)
        await update.reply(f"ุจูุฑูุงุฏ ุงูู ุงุฒ ุงูพ ุงู ุณุงุช :\n{text}\n ip :{res}")
        
        
@bot.on_message_updates(filters.text , filters.is_group,filters.Commands(['ุงุฎุจุงุฑ'],prefixes=''))
async def send_news(update: Updates):
    if not check_status():
        return
    # ุงฺฏุฑ ฺฉุงุฑุจุฑ "ุงุฎุจุงุฑ" ุงุฑุณุงู ฺฉูุฏ
    await update.reply("ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุงุฎุจุงุฑ...")

    # ุฏุฑุงูุช ุงุฎุจุงุฑ
    news = fetch_latest_news()

    # ุขูุงุฏู ฺฉุฑุฏู ูพุงู ุจุฑุง ุงุฑุณุงู
    if news:
        message = "๐ข ุฌุฏุฏุชุฑู ุงุฎุจุงุฑ:\n\n"
        for idx, news_item in enumerate(news, 1):
            message += f"{idx}. {news_item['title']}\n๐ {news_item['url']}\n\n"
        
        # ุชูุณู ูพุงู ุจู ุจุฎุดโูุง ฺฉูฺฺฉุชุฑ
        message_parts = split_message(message)

        # ุงุฑุณุงู ูุฑ ุจุฎุด ุฌุฏุงฺฏุงูู
        for part in message_parts:
            await update.reply(part)
    else:
        await update.reply("ูฺ ุฎุจุฑ ุจุฑุง ููุงุด ูุฌูุฏ ูุฏุงุฑุฏ.")     
    
@bot.on_message_updates(filters.music,filters.is_group)
async def handle_music_(update: Updates):
    if not check_status():
        return
    await update.reply("ุฏุฑุงูุช ุดุฏ")
    guid =update.object_guid
    # ุฏุงูููุฏ ู ุฐุฎุฑู ููุฒฺฉ
    file_path = await update.download(save_as="downloaded_music.mp3")
    await update.reply("ููุฒฺฉ ุดูุง ุฏุงูููุฏ ู ุจู ูุณฺฉุงู ุงุฑุณุงู ุดุฏ")
    
    # ุงุฑุณุงู ููุฒฺฉ ุจู ฺุช
    with open("downloaded_music.mp3","rb") as m :
        # await bot.send_music(guid,'downloaded_music.mp3')
        await bot.voice_chat_player(guid,'downloaded_music.mp3')
@bot.on_message_updates(filters.text , filters.is_group,filters.Commands(['ฺฏูุฏู','ุดูุงุณู_ุฎูุฏู'],prefixes=''))
async def send_guid_man(update: Updates): 
    if not check_status():
        return
    user_id = update.author_guid  # ุดูุงุณู ฺฉุงุฑุจุฑ ูุฑุณุชูุฏู ูพุงู
    message_text = update.text.strip()  # ูุชู ูพุงู
    
    await update.reply(f"ุจูุฑูุงุฏ ุงูู ุดูุงุณู ุดูุง :\n{user_id}")
    

@bot.on_message_updates(filters.text , filters.is_group)
async def to_world(update: Updates):
    num_text = update.text
    if not check_status():
        return
    # ุจุฑุฑุณ ุงูฺฉู ุขุง ูพุงู ุจุง "ุญุฑูู" ุดุฑูุน ูโุดูุฏ
    if num_text.startswith("ุญุฑูู"):
        await update.reply("ุฏุฑุญุงู ุชุจุฏู ุจู ุญุฑูู...")
        
        # ุญุฐู ฺฉููู "ุญุฑูู" ุงุฒ ูุชู
        num_text = num_text.replace("ุญุฑูู", "").strip()
        
        # ุจุฑุฑุณ ุงูฺฉู ุขุง ููุฏุงุฑ ุจุงูโูุงูุฏู ฺฉ ุนุฏุฏ ุงุณุช
        if num_text.isdigit():
            num = int(num_text)
            world = num2words(num, lang='fa')
            await update.reply(f"ุนุฏุฏ ุดูุง ุจู ุญุฑูู:\n{world}")
        else:
            
            await update.reply("ูุทูุงู ฺฉ ุนุฏุฏ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.")
    



async def manage_voice_chat(action: str, group_guid: str, user_guid: str, update: Updates):
    """
    ูุฏุฑุช ูุณ ฺุช (ุงุฌุงุฏ ุง ุฎุฑูุฌ).
    
    Args:
        action (str): "start" ุจุฑุง ุงุฌุงุฏ ุง "leave" ุจุฑุง ุฎุฑูุฌ.
        group_guid (str): ุขุฏ ฺฏุฑูู.
        user_guid (str): ุขุฏ ฺฉุงุฑุจุฑ ุงุฑุณุงูโฺฉููุฏู ุฏุณุชูุฑ.
        update (Updates): ุขุจุฌฺฉุช ุขูพุฏุช ุจุฑุง ุงุฑุณุงู ูพุงู ูพุงุณุฎ.
    """
    try:
        # ุงุทููุงู ุงุฒ ุงูฺฉู ฺฉุงุฑุจุฑ ูุฏุฑ ุงุณุช
        if not await update.is_admin(user_guid=user_guid):
            await update.reply("โ ุดูุง ุฏุณุชุฑุณ ูุงุฒู ุจุฑุง ุงู ุนููุงุช ุฑุง ูุฏุงุฑุฏ.")
            return
        
        if action == "start":
            # ุงุฌุงุฏ ูุณ ฺุช
            result = await bot.create_group_voice_chat(group_guid=group_guid)
            voice_chat_id = result["group_voice_chat_update"]["voice_chat_id"]
            
            # ุฐุฎุฑู ุขุฏ ูุณ ฺุช
            active_voice_chats[group_guid] = voice_chat_id
            await update.reply("๐ ูุณ ฺุช ุจุง ููููุช ุงุฌุงุฏ ุดุฏ.")
        
        elif action == "leave":
            # ุจุฑุฑุณ ูุฌูุฏ ูุณ ฺุช ูุนุงู
            voice_chat_id = active_voice_chats.get(group_guid)
            if not voice_chat_id:
                await update.reply("โ ูุณ ฺุช ูุนุงู ุจุฑุง ุฎุฑูุฌ ุงูุช ูุดุฏ.")
                return
            
            # ุฎุฑูุฌ ุงุฒ ูุณ ฺุช
            await bot.leave_group_voice_chat(group_guid=group_guid, voice_chat_id=voice_chat_id)
            await update.reply("๐ ูุณ ฺุช ุจุง ููููุช ูุทุน ุดุฏ.")
            
            # ุญุฐู ุขุฏ ูุณ ฺุช ุงุฒ ุฏฺฉุดูุฑ
            del active_voice_chats[group_guid]
        
        else:
            await update.reply("โ ุฏุณุชูุฑ ูุงูุนุชุจุฑ. ูุทูุงู ุงุฒ ุฏุณุชูุฑุงุช ุตุญุญ ุงุณุชูุงุฏู ฺฉูุฏ.")
    
    except Exception as e:
        await update.reply(f"โ ุฎุทุง ุฑุฎ ุฏุงุฏู ุงุณุช: {e}")

# ุฏุณุชูุฑ ุจุฑุง ุงุฌุงุฏ ูุณ ฺุช
@bot.on_message_updates(filters.text , filters.Commands(['CALL', 'call', 'ฺฉุงู'], prefixes=''))
async def start_voice_chat(update: Updates):
    if not check_status():
        return
    group = update.object_guid
    if group:
        await manage_voice_chat(action="start", group_guid=group, user_guid=update.author_guid, update=update)

# ุฏุณุชูุฑ ุจุฑุง ุฎุฑูุฌ ุงุฒ ูุณ ฺุช
@bot.on_message_updates(filters.text , filters.Commands(['ูุทุน'], prefixes=''))
async def leave_voice_chat(update: Updates):
    if not check_status():
        return
    group = update.object_guid
    if group:
        await manage_voice_chat(action="leave", group_guid=group, user_guid=update.author_guid, update=update)

    
    
    
    
  
       
@bot.on_message_updates(filters.text , filters.is_group,filters.Commands(['ฺฏูุฏ_ฺฏูพ','ุดูุงุณู_ฺฏุฑูู'],prefixes=''))
async def send_guid_gapp(update: Updates):
    guid =update.object_guid
    if not check_status():
        return
    await update.reply(f"ุดูุงุณู ฺฏูพ ูุนู ุดูุง :\n{guid }")

@bot.on_message_updates(filters.text , filters.is_group , filters.Commands(['ฺฉููพ','ูุฏู'], prefixes=''))
async def send_clip(update: Updates):
    if not check_status():
        return
    await update.reply("ุฏุฑุญุงู  ุงุฑุณุงู ูุฏู")
    video_url, caption = fetch_video()
    if video_url:
        await update.reply_video(video_url,caption=caption or "ูุฏู ุงุฒ API")
    else :
        await update.reply("โ ูุชุฃุณูุงูู ูุงุฏุฑ ุจู ุฏุฑุงูุช ูุฏู ูุณุชู. ูุทูุงู ูุฌุฏุฏุงู ุชูุงุด ฺฉูุฏ.")


@bot.on_message_updates(filters.is_group , filters.Commands(['ูพุฑููุงู'], prefixes=''))
async def send_profile(update: Updates):
    r_prof =fetch_prof()
    if not check_status():
        return
    if r_prof:
        await update.reply_photo(r_prof,caption="ูพุฑููุงู ุดูุง ")
    
    
@bot.on_message_updates(filters.is_group, filters.Commands(['ุชุงุณ'], prefixes=''))
async def send_dice(update: Updates):
    if not check_status():
        
        return
    # ุชููุฏ ฺฉ ุนุฏุฏ ุชุตุงุฏู ุจู 1 ุชุง 6 ุจู ุนููุงู ูุชุฌู ุชุงุณ
    dice_result = random.randint(1, 6)
    
    # ุชุนุฑู ูพุงูโูุง ูุฎุชูู ุจุฑ ุงุณุงุณ ูุชุฌูโ ุชุงุณ
    dice_messages = {
        1: "๐ฒ ุชุงุณ ุฑู ุงูุฏุงุฎุช ู ุนุฏุฏ **1** ุงููุฏ! ุจู ูุธุฑ ูุงุฏ ุดุงูุณ ุงูุฑูุฒ ุจุงูุงุช ููุฑุงู ูุณุช! ๐",
        2: "๐ฒ ุชุงุณ ุงูุฏุงุฎุช ู ุนุฏุฏ **2** ุดุฏ! ุดุงุฏ ุฏูุนูโ ุจุนุฏ ุฎูุดโุดุงูุณโุชุฑ ุจุงุด! ๐ค",
        3: "๐ฒ ูุชุฌู ุชุงุณ **3** ุดุฏ! ูุงููโุฑู ูุณุชุ ุดุงูุณ ุจุง ุชู ููู ููุฑุงูู! ๐",
        4: "๐ฒ ุงู ุจุงุฑ ูุชุฌู ุชุงุณ **4** ุดุฏ! ุจุฏ ูุณุชุ ุงูุง ูููุฒ ุฌุง ุจุฑุง ุจูุชุฑ ุดุฏู ูุณุช! ๐",
        5: "๐ฒ ุฎูุดโุดุงูุณ ุจูุฏ! ูุชุฌู **5** ุดุฏ! ู ูุฏู ูููุฏู ุชุง ุนุงู! ๐",
        6: "๐ฒ ูุงุงุงุง! ุชุงุณ ุนุฏุฏ **6** ุงููุฏ! ุดุงูุณ ฺฉุงูู ุจุง ุชูุณุชุ ุนุงู ุจูุฏ! ๐๐ฅณ"
    }
    
    # ฺฏุฑูุชู ูพุงู ูุชูุงุณุจ ุจุง ูุชุฌู ุชุงุณ
    message = dice_messages[dice_result]
    
    # ุงุฑุณุงู ูพุงู ูุชุฌูโ ุชุงุณ ุจู ฺฏุฑูู
    await update.reply(message)
            
             
            
        
@bot.on_message_updates(filters.is_group, filters.Commands(['ุฎุงุทุฑู'], prefixes='')) 
async def send_khaterh(update: Updates):
    if not check_status():
        
        return
    k =bio_fackt_faz.khatere()
    
    res =random.choice(k)
    await update.reply(res)

   
    
@bot.on_message_updates(filters.is_group , filters.text)
async def add_filter(update: Updates):
    if not check_status():
        
        return
    # ุจุฑุฑุณ ุดุฑูุน ูพุงู ุจุง "ููุชุฑ:"
    if update.text.startswith("ููุชุฑ:"):
        if not await update.is_admin(user_guid=update.author_guid):  # ฺฺฉ ฺฉุฑุฏู ุฏุณุชุฑุณ ุงุฏูู
            await update.reply("โ ุดูุง ุงุฌุงุฒู ุงู ฺฉุงุฑ ุฑุง ูุฏุงุฑุฏ!")
            return

        # ุงุณุชุฎุฑุงุฌ ฺฉููู ุง ุนุจุงุฑุช ุจุฑุง ููุชุฑ
        phrase_to_filter = update.text.split("ููุชุฑ:", 1)[1].strip()
        
        if phrase_to_filter:  # ุจุฑุฑุณ ุฎุงู ูุจูุฏู ุนุจุงุฑุช
            filtered_phrases.add(phrase_to_filter)
            await update.reply(f"โ ุนุจุงุฑุช '{phrase_to_filter}' ุจู ูุณุช ููุชุฑ ุงุถุงูู ุดุฏ.")
        else:
            await update.reply("โ๏ธ ูุทูุงู ฺฉ ุนุจุงุฑุช ุจุฑุง ููุชุฑ ฺฉุฑุฏู ูุงุฑุฏ ฺฉูุฏ.")

# ููุงุด ฺฉููุงุช ููุชุฑุดุฏู ุจุง ูุฑูุงู "ูุณุช_ููุชุฑ"
@bot.on_message_updates(filters.is_group , filters.Commands(['ูุณุช_ููุชุฑ'], prefixes=''))
async def list_filtered_phrases(update: Updates):
    if not check_status():
        
        return
    if not await update.is_admin(user_guid=update.author_guid):  # ฺฺฉ ฺฉุฑุฏู ุฏุณุชุฑุณ ุงุฏูู
        await update.reply("โ ุดูุง ุงุฌุงุฒู ุงู ฺฉุงุฑ ุฑุง ูุฏุงุฑุฏ!")
        return

    # ููุงุด ฺฉููุงุช ููุชุฑุดุฏู
    if filtered_phrases:
        filtered_list = "\n".join([f"- {phrase}" for phrase in filtered_phrases])
        await update.reply(f"๐ ูุณุช ฺฉููุงุช ููุชุฑ ุดุฏู:\n\n{filtered_list}")
    else:
        await update.reply("โน๏ธ ูุณุช ููุชุฑูุง ุฎุงู ุงุณุช.")

# ูพุงฺฉโุณุงุฒ ูุณุช ููุชุฑูุง
@bot.on_message_updates(filters.is_group , filters.Commands(['ูพุงฺฉ_ูุณุช'], prefixes=''))
async def clear_filters(update: Updates):
    if not check_status():
        
        return
    if not await update.is_admin(user_guid=update.author_guid):
        await update.reply("โ ุดูุง ุงุฌุงุฒู ุงู ฺฉุงุฑ ุฑุง ูุฏุงุฑุฏ!")
        return

    filtered_phrases.clear()
    await update.reply("๐งน ูุณุช ููุชุฑูุง ูพุงฺฉ ุดุฏ.")

# ุญุฐู ูพุงูโูุง ุญุงู ฺฉููุงุช ููุชุฑ ุดุฏู ู ูุญุฏูุฏ ฺฉุฑุฏู ฺฉุงุฑุจุฑ
@bot.on_message_updates(filters.is_group , filters.text)
async def filter_messages(update: Updates):
    if not check_status():
        
        return
    if any(phrase in update.text for phrase in filtered_phrases):
        await update.delete_messages()  # ุญุฐู ูพุงู
        
        await update.reply("โ ูพุงู ุดูุง ุญุงู ฺฉููุงุช ููุชุฑ ุดุฏู ุจูุฏ ู ุญุฐู ุดุฏ.")
    
                    
@bot.on_message_updates(filters.is_group , filters.Commands(['ูพุด ุจู','ูพุด_ุจู','ุงูุฏู_ูฺฏุฑ'], prefixes=''))   
async def send_predictions(update: Updates):
    if not check_status():
        
        return
    prediction_keywords = re.compile(r"(ูพุด[ _-]*ุจู|ุขูุฏู[ _-]*ูฺฏุฑ|ุทุงูุน[ _-]*ุจู)", re.IGNORECASE)
    category = random.choice(list(predictions.keys()))
    # ุงูุชุฎุงุจ ฺฉ ูพุดโุจู ุชุตุงุฏู ุงุฒ ุฏุณุชู ุงูุชุฎุงุจโุดุฏู
    prediction = random.choice(predictions[category])
    if prediction_keywords.search(update.text):
        
    # ุงุฑุณุงู ูพุดโุจู ุจู ฺฉุงุฑุจุฑ
        await update.reply(f"ูพุดโุจู ุดูุง ุจุฑุง ุงูุฑูุฒ (ุฏุณุชู: {category}):\n{prediction}")
    
        
        
        
            
@bot.on_message_updates(filters.is_group , filters.Commands(['ุชุฑููุฏ','ุงููุฒุด'], prefixes=''))
async def send_tarfand(update: Updates):
    if not check_status():
        
            
        return
    t =bio_fackt_faz.tips()
    res =random.choice(t)
    await update.reply(res) 
           
           
@bot.on_message_updates(filters.is_group , filters.Commands(['ููุช_ูพูู','ูพูู'], prefixes=''))
async def send_money(update: Updates):
    if not check_status():
        
            
        return
    response = requests.get("https://pybot.info/api/money.php")
    if response.status_code == 200 and response.json().get("ok"):
        await update.reply("ุฏุฑุญุงู ุจู ุฏุณุช ุงูุฑุฏู ููุช ..")
        # Parse the JSON data
        data = response.json()["result"]
        
        # Extract and format the currency data
        message = (
            f"๐ต ููุช  ูพูู ูุง :\n\n"
            f"ุฏูุงุฑ: {data['dolar']} ุฑุงู\n"
            f"ูุฑู: {data['euro']} ุฑุงู\n"
            f"ูพููุฏ: {data['pond']} ุฑุงู\n"
            f"ุฏุฑูู: {data['derham']} ุฑุงู\n"
            f"ูุฑ: {data['lir']} ุฑุงู\n"
            
        )
        
        
        await update.reply(message)
    else:
        await update.reply("โ ุฏุฑุงูุช ุงุทูุงุนุงุช ุงุฑุฒ ุจุง ูุดฺฉู ููุงุฌู ุดุฏ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.")


@bot.on_message_updates(filters.is_group)
async def chatbot_man(update: Updates):
    if not check_status():
        
            
        return
    user_message = update.text  # ูพุงู ุฏุฑุงูุช ุงุฒ ฺฉุงุฑุจุฑ
    chatbot_response = chatbot.respond(user_message)  # ูพุงุณุฎ ุงุฒ ฺุชโุจุงุช NLTK
    await update.reply(chatbot_response) 

@bot.on_message_updates(filters.is_group , filters.Commands(['ุจูุฏุงุดุช','ุชูุตู_ุจูุฏุงุดุช'], prefixes=''))
async def send_health_tips(update: Updates):
    if not check_status():
        
            
        return
    category, tip = get_random_health_tip()
    await update.reply(f"๐น ุชูุตู ุจูุฏุงุดุช ุงูุฑูุฒ ({category}):\n{tip}")
    
    
@bot.on_message_updates(filters.is_group)
async def send_voice_man_and_wommen(update: Updates):
    if not check_status():
            
            
        return
    message_text = update.text.lower()
    
    # ฺฺฉ ฺฉุฑุฏู ููุน ุตุฏุง ุจุฑุงุณุงุณ ุฏุณุชูุฑ ูุฑูุฏ
    if message_text.startswith("ูุณ ูุฑุฏ"):
        await update.reply("ุฏุฑุญุงู ูพุฑุฏุงุฒุด ูุณุงุฎุช ูุณ ุดูุง ูุณุชู ูุทูุง ฺฉู ุตุจุฑฺฉูุฏ .....")
        text = message_text.replace("ูุณ ูุฑุฏ", "").strip()
        audio_path = fetch_audio(text, "male")
        
        if audio_path:
            await update.reply("ุงูุงูู ฺฉู ุงุฑุณุงู ุจุดู ูุณ ูุฐฺฉุฑ ุดูุง")
            
            await update.reply_voice(audio_path,caption=f"ูุชู ุชุจุฏู ุดุฏู ุดูุง  ุจู ูุณ ูุฐฺฉุฑ \n{message_text}")
           
        else:
            await update.reply("ุฎุทุง ุฏุฑ ุชููุฏ ูุงู ุตูุช ุฑุฎ ุฏุงุฏู ุงุณุช.")

    elif message_text.startswith("ูุณ ุฒู"):
        text = message_text.replace("ูุณ ุฒู", "").strip()
        audio_path = fetch_audio(text, "female")
        
        if audio_path:
            await update.reply("ุงูุงูู ฺฉู ุงุฑุณุงู ุจุดู ูุณ ูููุซ ุดูุง ุงุฑุณุงู ุดูุฏ.")
            await update.reply_voice(audio_path,caption=f"ูุชู ุชุจุฏู ุดุฏู ุดูุง ุจู ูููุซ :\n{message_text}")
        else:
            await update.reply("ุฎุทุง ุฏุฑ ุชููุฏ ูุงู ุตูุช ุฑุฎ ุฏุงุฏู ุงุณุช.")
    
@bot.on_message_updates(filters.is_group)
async def handle_gender_commands(update: Updates):
    message_text = update.text.strip()
    if not check_status():
            
            
        return
    # ุงฺฏุฑ ูพุงู ุจุง #ูุฑุฏ ุดุฑูุน ูโุดูุฏ
    if message_text.startswith("#ูุฑุฏ"):
        await update.reply("๐ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู... ฺฉู ุดฺฉุจุง ุจุงุดุฏ ูุทูุงู.")
        
        # ุญุฐู #ูุฑุฏ ุงุฒ ูุชู ู ูพุฑุฏุงุฒุด ุจุงูโูุงูุฏู
        user_query = message_text.replace("#ูุฑุฏ", "").strip()
        
        # ูพุฑุฏุงุฒุด ุณูุงู
        chatbot_response = get_chatbot_response(user_query)
        if chatbot_response:
            await update.reply("ุตุจุฑฺฉูุฏ ุชุง ุจุฑุงุชูู ุชูุถุญุงุช ุฑุง ุฏุฑูุณ ุจฺฏู..")
            
            # ุชููุฏ ูุงู ุตูุช ูพุงุณุฎ (ุตุฏุง ูุฑุฏุงูู)
            audio_path = fetch_audio(chatbot_response, "male")
            if audio_path:
                await update.reply("**ุงูุงู ุญุงุถุฑูุดู**")
                await update.reply_voice(audio_path, caption=f"ูพุงุณุฎ: {chatbot_response}")
                os.remove(audio_path)  # ุญุฐู ูุงู ูพุณ ุงุฒ ุงุฑุณุงู
            else:
                await update.reply("ุฎุทุง ุฏุฑ ุชููุฏ ูุงู ุตูุช ุฑุฎ ุฏุงุฏู ุงุณุช.")
        else:
            await update.reply("ูพุงุณุฎ ุงูุช ูุดุฏ.")
    
    # ุงฺฏุฑ ูพุงู ุจุง #ุฒู ุดุฑูุน ูโุดูุฏ
    elif message_text.startswith("#ุฒู"):
        await update.reply("๐ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู... ฺฉู ุดฺฉุจุง ุจุงุดุฏ ูุทูุงู.")
        
        # ุญุฐู #ุฒู ุงุฒ ูุชู ู ูพุฑุฏุงุฒุด ุจุงูโูุงูุฏู
        user_query = message_text.replace("#ุฒู", "").strip()
        
        # ูพุฑุฏุงุฒุด ุณูุงู
        chatbot_response = get_chatbot_response(user_query)
        if chatbot_response:
            await update.reply("ุตุจุฑฺฉูุฏ ุชุง ุจุฑุงุชูู ุชูุถุญุงุช ุฑุง ุฏุฑูุณ ุจฺฏู..")
            
            # ุชููุฏ ูุงู ุตูุช ูพุงุณุฎ (ุตุฏุง ุฒูุงูู)
            audio_path = fetch_audio(chatbot_response, "female")
            if audio_path:
                await update.reply("**ุงูุงู ุญุงุถุฑูุดู**")
                await update.reply_voice(audio_path, caption=f"ูพุงุณุฎ: {chatbot_response}")
                os.remove(audio_path)  # ุญุฐู ูุงู ูพุณ ุงุฒ ุงุฑุณุงู
            else:
                await update.reply("ุฎุทุง ุฏุฑ ุชููุฏ ูุงู ุตูุช ุฑุฎ ุฏุงุฏู ุงุณุช.")
        else:
            await update.reply("ูพุงุณุฎ ุงูุช ูุดุฏ.")

   
@bot.on_message_updates(filters.is_group , filters.Commands(['play'], prefixes='')) 
async def raundom_music(update: Updates):
    if not check_status():
            
            
        return
    guid =update.object_guid
    song_url = get_random_music_link()
    if song_url:
        await update.reply(f"๐ถ ุขููฺฏ ุชุตุงุฏู ุดูุง:\n{song_url}")
        await bot.voice_chat_player(guid, song_url)
    else:
        await update.reply("ุขููฺฏ ุงูุช ูุดุฏ.")
@bot.on_message_updates(filters.is_group , filters.Commands(['music'], prefixes='')) 
async def send_music_ranudom(update: Updates):
    if not check_status():
            
            
        return
    song_url = get_random_music_link()
    if song_url:
        await update.reply(f"๐ถ ุขููฺฏ ุชุตุงุฏู ุดูุง:\n{song_url}")
        await update.reply_music(song_url,caption=f"๐ถ ุขููฺฏ ุชุตุงุฏู ุดูุง:\n{song_url}")
    else:
        await update.reply("ุขููฺฏ ุงูุช ูุดุฏ.")
    
    
@bot.on_message_updates(filters.is_group , filters.Commands(['ุญููุช'], prefixes='')) 
async def send_haqiqt(update: Updates):
    if not check_status():
            
            
        return
    haqiqat_choice = random.choice(haqiqat)
    await update.reply(haqiqat_choice)
@bot.on_message_updates(filters.is_group , filters.Commands(['ุฌุฑุนุช'], prefixes=''))
async def send_joret(update: Updates):
    if not check_status():
            
            
        return
    jorat_choice = random.choice(joraat)
    await update.reply(f"ุฌุฑุฃุช: {jorat_choice}") 
@bot.on_message_updates(filters.is_group , filters.Commands(['ุงุดูพุฒ','ุฏุณุชูพุฎุช'], prefixes='')) 
async def send_food(update: Updates):
    if not check_status():
            
            
        return
    food, category = bio_fackt_faz.suggest_food()
    
    await update.reply(f"๐ฝ๏ธ ูพุดููุงุฏ ูุง: {food}\n๐ ุฏุณุชูโุจูุฏ: {category}") 


@bot.on_message_updates(filters.is_group) 
async def send_bmi(update: Updates):
    if not check_status():
            
            
        return
    message_text = update.text
    if message_text.startswith("bmi:"):
        
        weight, height, error_message = validate_input(message_text)
        await update.reply("ุฏุฑุญุงู ูพุฑุฏุงุฒุด bmiุดูุง ...")

        if error_message:
            await update.reply(f"๐จ ุฎุทุง: {error_message}\n\nููููู ูุฑูุช: bmi:w=70,h=1.75")
            return

        bmi = calculate_bmi(weight, height)
        if bmi is None:
            await update.reply("๐ซ ุฎุทุง: ูุฑูุฏ ูุงูุนุชุจุฑ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.")
            return

        advice = get_bmi_advice(bmi)
        
        # ูพุงุณุฎ ุฒุจุง ู ุฏูู ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณุชุงู HTML
        await update.reply(f"๐ข ูุญุงุณุจู BMI ุดูุง:\n\n"
                        f"โ BMI: {bmi}\n\n"
                        f"๐ ุชูุตูโูุง ูพุฒุดฺฉ:\n\n"
                        f"{advice}\n\n"
                        f"๐ ูฺฉุชู: ููุดู ูุจู ุงุฒ ุดุฑูุน ูุฑ ุจุฑูุงูู ูุฑุฒุด ุง ุฑฺู ุบุฐุง ุจุง ฺฉ ูพุฒุดฺฉ ูุดูุฑุช ฺฉูุฏ.")
        
@bot.on_message_updates(filters.is_group) 
async def send_tourist_spots(update: Updates):
    if not check_status():
            
            
        return
    if update.text.startswith("ฺฏุฑุฏุดฺฏุฑ:"):
        
        city = update.text.split(":")[1].strip()  # ุงุณุชุฎุฑุงุฌ ูุงู ุดูุฑ ุงุฒ ูุชู
        
        if city in tourist_spots:
            spots = '\n'.join(tourist_spots[city])
            await update.reply(f"ูฺฉุงูโูุง ุฏุฏู ุฏุฑ {city}:\n{spots}")
        else:
            await update.reply("ุดูุฑ ูุงุฑุฏ ุดุฏู ูุงูุนุชุจุฑ ุงุณุช. ูุทูุงู ูุงู ฺฉ ุดูุฑ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.")
    # ุฏุณุชูุฑ "ูุณุช_ุดูุฑ" ุจุฑุง ููุงุด ุดูุฑูุง ูพุดุชุจุงู ุดุฏู
    elif update.text == "ุดูุฑูุง":
        available_cities = '\n'.join(tourist_spots.keys())
        await update.reply(f"ุดูุฑูุง ูพุดุชุจุงู ุดุฏู:\n{available_cities}")
@bot.on_message_updates(filters.is_group , filters.Commands(['ุตููุงุช'], prefixes=''))  
async def send_salavat(update: Updates):
    if not check_status():
            
            
        return
    
    await update.reply("**ุงูููููููู ุตูููู ุนูููู ููุญููููุฏู ูู ุขูู ููุญููููุฏู ูู ุนูุฌูููู ููุฑูุฌููููู ๐ธโจ**")
    
@bot.on_message_updates(filters.is_group , filters.Commands(['ุฏุนุง'], prefixes=''))
async def send_doeah(update: Updates):
    if not check_status():
            
            
        return
    duas=bio_fackt_faz.duse()
    dua = random.choice(duas)
    response = (
        "๐ **ุฏุนุง ุงูุฑูุฒ** ๐\n\n"
        f"๐ **ุนุฑุจ:** {dua['arabic']}\n"
        f"๐ **ุชุฑุฌูู:** {dua['persian']}"
    )
    await update.reply(response)
    
@bot.on_message_updates(filters.is_group)
async def lerneing_botgap(update: Updates):
    chat_id = update.author_guid
    sender_id = update.author_guid
    message = update.text.strip()
    if not check_status():
            
            
        return
    # ูุฏุฑุช ุฏุณุชูุฑุงุช ูุฎุตูุต ูุงูฺฉ
    if sender_id == owners:
        if message.lower() == "ุงุฏฺฏุฑ_ูุนุงู":
            set_learning_enabled(True)
            await update.reply("โ ุญุงูุช ุงุฏฺฏุฑ ูุนุงู ุดุฏ.")
            return
        elif message.lower() == "ุงุฏฺฏุฑ_ุฎุงููุด":
            set_learning_enabled(False)
            await update.reply("๐ซ ุญุงูุช ุงุฏฺฏุฑ ุบุฑูุนุงู ุดุฏ.")
            return
        elif message.lower() == "ูุณุช_ุฐุฎุฑู":
            qa_list = get_all_questions_answers()
            if qa_list:
                response = "๐ **ูุณุช ุณูุงูุงุช ู ูพุงุณุฎโูุง:**\n\n"
                for idx, (question, answer) in enumerate(qa_list, 1):
                    response += f"{idx}. **ุณูุงู:** {question}\n   **ูพุงุณุฎ:** {answer}\n\n"
                await update.reply(response)
            else:
                await update.reply("โ๏ธ ูฺ ุณูุงู ุฐุฎุฑู ูุดุฏู ุงุณุช.")
            return
        elif message.lower() == "ูพุงฺฉ_ุงุฏฺฏุฑ":
            clear_knowledge_base()
            await update.reply("๐๏ธ ุชูุงู ุงุทูุงุนุงุช ุงุฏฺฏุฑ ูพุงฺฉ ุดุฏูุฏ.")
            return

    # ุจุฑุฑุณ ูุถุนุช ุงุฏฺฏุฑ
    learning_enabled = is_learning_enabled()

    # ุจุฑุฑุณ ูุฑูุช ุขููุฒุด ุชฺฉ ุฎุท (ุณูุงู=ูพุงุณุฎ)
    if "=" in message:
        parts = message.split("=", 1)
        if len(parts) == 2:
            question, answer = parts[0].strip(), parts[1].strip()
            if question and answer:
                if learning_enabled:
                    save_question_answer(question, answer)
                    await update.reply(f"โ ุงุฏ ฺฏุฑูุชู: **{question}** = **{answer}**")
                else:
                    await update.reply("๐ซ ุญุงูุช ุงุฏฺฏุฑ ุบุฑูุนุงู ุงุณุช.")
            else:
                await update.reply("โ๏ธ ูุฑูุช ุตุญุญ ูุณุช. ุจุงุฏ ุจู ุตูุฑุช `ุณูุงู=ูพุงุณุฎ` ุจุงุดุฏ.")
        else:
            await update.reply("โ๏ธ ูุฑูุช ุตุญุญ ูุณุช.")
    else:
        # ุจุฑุฑุณ ุงฺฏุฑ ุณูุงู ุฏุฑ ุฏุชุงุจุณ ููุฌูุฏ ุจุงุดุฏ
        answer = get_answer(message)
        if answer:
            await update.reply(answer)
        # ุงฺฏุฑ ุณูุงู ูุจุงุดุฏุ ูฺ ูพุงุณุฎ ุฏุงุฏู ููโุดูุฏ
        else:
            pass  # ูฺ ูพุงุณุฎ ุฏุงุฏู ููโุดูุฏ
        
@bot.on_message_updates(filters.is_group)
async def send_loc(update: Updates):
    if not check_status():
            
            
        return
    if update.text.startswith("loc"):
        
        
        location_name = update.text.replace('loc','').strip()
        await update.reply("ุฏุฑุญุงู ูพุฑุฏุงุฒุด ูฺฉุงู ุดูุง ...")
        
        # ุฏุฑุงูุช ููฺฉ ฺฏูฺฏู ููพุณ
        google_maps_url = get_location_map(location_name)
        
        
        # ุงุฑุณุงู ููฺฉ ุจู ฺฉุงุฑุจุฑ
        await update.reply(f"ููฺฉ ูฺฉุงู ุดูุง :\n{google_maps_url}")


@bot.on_message_updates(filters.is_group,filters.Commands(['pin','ุณูุฌุงู'],prefixes=''))
async def pin_message_by_admin(update: Updates):
    
    group = update.object_guid  # GUID ฺฏุฑูู
    if not check_status():
                
                
            return
    try:
        # ุจุฑุฑุณ ุงูฺฉู ฺฉุงุฑุจุฑ ุงุฏูู ุงุณุช
        if group and await update.is_admin(user_guid=update.author_guid):
            # ุจุฑุฑุณ ุงูฺฉู ูพุงู ุฑูพูุง ุดุฏู ูุฌูุฏ ุฏุงุฑุฏ
            if update.reply_message_id:
                # ุณูุฌุงู ฺฉุฑุฏู ูพุงู
                await update.client.set_pin(object_guid=group, message_id=update.reply_message_id)
                await update.reply("๐ ูพุงู ููุฑุฏ ูุธุฑ ุจุง ููููุช ุณูุฌุงู ุดุฏ.")
            else:
                await update.reply("๐ซ ูุทูุงู ุฑู ูพุงู ฺฉู ูโุฎูุงูุฏ ุณูุฌุงู ุดูุฏ ุฑูพูุง ฺฉูุฏ.")
        else:
            await update.reply("๐ซ ููุท ุงุฏููโูุง ูโุชูุงููุฏ ูพุงูโูุง ุฑุง ุณูุฌุงู ฺฉููุฏ.")

    except exceptions.InvalidInput:
        await update.reply("๐ซ ุฎุทุง ุฏุฑ ุงุทูุงุนุงุช ูุฑูุฏ ุฑุฎ ุฏุงุฏู ุงุณุช.")
    except Exception as e:
        await update.reply(f"๐ซ ุฎุทุง ุบุฑููุชุธุฑู ุฑุฎ ุฏุงุฏ: {str(e)}")




@bot.on_message_updates(filters.is_group,filters.Commands(['ุดูุงุณู ุงุด','ฺฏูุฏุด'],prefixes='')) 
async def get_guid_by_admin(update:Updates):
    group = update.object_guid  # GUID ฺฏุฑูู
   
    if not check_status():
            
            
        return
    try:
        # ุจุฑุฑุณ ุงูฺฉู ฺฉุงุฑุจุฑ ุงุฏูู ุงุณุช
        if group and await update.is_admin(user_guid=update.author_guid):
            # ุจุฑุฑุณ ุงูฺฉู ูพุงู ุฑูพูุง ุดุฏู ูุฌูุฏ ุฏุงุฑุฏ
            if update.reply_message_id:
                # ุฏุฑุงูุช ูพุงู ุฑูพูุงโุดุฏู
                replied_message = await update.get_messages(message_ids=update.reply_message_id)
                sender_guid = replied_message.messages[0].author_object_guid
                
                # ุงุฑุณุงู ุดูุงุณู GUID
                await update.reply(f"๐ค ุดูุงุณู GUID ฺฉุงุฑุจุฑ ุฑูพูุงโุดุฏู: `{sender_guid}`")
            else:
                await update.reply("๐ซ ูุทูุงู ุฑู ูพุงู ฺฉู ูโุฎูุงูุฏ GUID ุขู ุฏุฑุงูุช ุดูุฏ ุฑูพูุง ฺฉูุฏ.")
        else:
            await update.reply("๐ซ ููุท ุงุฏููโูุง ูโุชูุงููุฏ ุงู ุฏุณุชูุฑุงุช ุฑุง ุงุฌุฑุง ฺฉููุฏ.")

    except exceptions.InvalidInput:
        await update.reply("๐ซ ุฎุทุง ุฏุฑ ุงุทูุงุนุงุช ูุฑูุฏ ุฑุฎ ุฏุงุฏู ุงุณุช.")
    except Exception as e:
        await update.reply(f"๐ซ ุฎุทุง ุบุฑููุชุธุฑู ุฑุฎ ุฏุงุฏ: {str(e)}")

@bot.on_message_updates(filters.is_group,filters.Commands(['ฺุณุชุงู'],prefixes=''))
async def send_chistan(update:Updates):
    if not check_status():
        
            
            
        return
    ch =bio_fackt_faz.riddles()
    random_riddle = random.choice(ch)
    await update.reply(f"ฺุณุชุงู: {random_riddle['question']}\n ุฌูุงุจ: {random_riddle['answer']}")
@bot.on_message_updates(filters.is_group,filters.Commands(['ุนููุง','ุฏุงูุดููุฏ'],prefixes='')) 
async def send_bozorgan_shia(update:Updates):
    if not check_status():
        
            
            
        return
    await update.reply("ููุชุธุฑูพุงุณุฎ ุจุงุดุฏ....")
    quote = get_random_quote()
    # ุงุฑุณุงู ูพุงุณุฎ ุจู ฺฉุงุฑุจุฑ
    await update.reply(quote)  

@bot.on_message_updates(filters.is_group)
async def generate_logo_ai(update: Updates):
    if not check_status():
        
            
            
        return
    if update.text.startswith("ูฺฏู"):
        
        await update.reply("ุฏุฑุญุงู ุณุงุฎุช ูฺฏู ุงุฒ ูุจ ุณุฑูุณ")
        # ุงุณุชุฎุฑุงุฌ ูุชู ุงุฒ ูพุงู (ุจุนุฏ ุงุฒ "ููฺฏู ")
        text = update.text[4:].strip()
        id = random.randint(1, 140)  # ุงูุชุฎุงุจ ุชุตุงุฏู ฺฉ ุดูุงุณู ุจุฑุง ููฺฏู
        
        # ุณุงุฎุช URL ุฏุฑุฎูุงุณุช ุจุฑุง ุชููุฏ ููฺฏู
        image_url = f"https://api.fast-creat.ir/logo?apikey=6285658042:kHq1WRiE3YeOKI5@Api_ManagerRoBot&type=logo&id={id}&text={text}"
        
        # ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจุง ุงุณุชูุงุฏู ุงุฒ requests
        response = requests.get(image_url)
        
        if response.status_code == 200:
            # ุฐุฎุฑู ูุงู ุชุตูุฑ ููฺฏู ุฏุฑ ุณุณุชู
            with open('logo.png', 'wb') as file:
                file.write(response.content)
            
            # ุงุฑุณุงู ุนฺฉุณ ุจู ฺฏุฑูู
            await bot.send_photo(update.object_guid, "logo.png", caption=f"ููฺฏู ุดูุง ุขูุงุฏู ุดุฏ\n\nยป ูุชู ููฺฏู: {text}", reply_to_message_id=update.message.message_id)
            
            # ุญุฐู ูุงู ููฺฏู ูพุณ ุงุฒ ุงุฑุณุงู
            os.remove("logo.png")
        else:
            # ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉูุ ุงุฑุณุงู ูพุงู ุฎุทุง
            await update.reply("ุฎุทุง ุฏุฑ ุฏุฑุฎูุงุณุช ุจู ูุจ.")

        


@bot.on_message_updates(filters.is_group)
async def join_chat_admin(update: Updates):
    if not check_status():
        
            
            
        return
    if update.author_guid == owners:
        # ุฏุณุชูุฑ join ุฑุง ููุท ูุงูฺฉ ูโุชูุงูุฏ ุงุฌุฑุง ฺฉูุฏ
        if update.text.startswith("ุฌูู:"):
            # ุฏุฑุงูุช ููฺฉ ฺฏุฑูู
            group_link = update.message.text.replace("ุฌูู:", "").strip()
            if group_link:
                try:
                    await bot.join_chat(group_link)
                    await update.reply("ุฑุจุงุช ุจุง ููููุช ุนุถู ฺฏุฑูู ุดุฏ.")
                except Exception as e:
                    await update.reply(f"ุฎุทุง ุฏุฑ ุนุถูุช ุฏุฑ ฺฏุฑูู: {e}")
            else:
                await update.reply("ููฺฉ ฺฏุฑูู ูุนุชุจุฑ ูุณุช. ูุทูุง ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.")
        elif update.text =="ููุช":
            await bot.leave_group(update.object_guid)

@bot.on_message_updates(filters.is_private)
async def join_chat_admin(update: Updates):
    if not check_status():
        
            
            
        return
    if update.author_guid == owners:
        # ุฏุณุชูุฑ join ุฑุง ููุท ูุงูฺฉ ูโุชูุงูุฏ ุงุฌุฑุง ฺฉูุฏ
        if update.text.startswith("ุฌูู:"):
            # ุฏุฑุงูุช ููฺฉ ฺฏุฑูู
            group_link = update.message.text.replace("ุฌูู:", "").strip()
            if group_link:
                try:
                    await bot.join_chat(group_link)
                    await update.reply("ุฑุจุงุช ุจุง ููููุช ุนุถู ฺฏุฑูู ุดุฏ.")
                except Exception as e:
                    await update.reply(f"ุฎุทุง ุฏุฑ ุนุถูุช ุฏุฑ ฺฏุฑูู: {e}")
            else:
                await update.reply("ููฺฉ ฺฏุฑูู ูุนุชุจุฑ ูุณุช. ูุทูุง ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.")
        elif update.text =="ููุช":
            await bot.leave_group(update.object_guid)
            
            
  
   
       

@bot.on_message_updates(filters.is_group,filters.Commands(['ุงุณู ฺฏุฑูู','ุงุณู ฺฏูพ'],prefixes=''))
async def get_name_gap(update: Updates):
    if not check_status():
            
            
            
        return
    gap =update.object_guid
    res =await bot.get_group_info(gap)
    data =res["group"]["group_title"]    
    await update.reply(data)
    
  
@bot.on_message_updates(filters.is_group)
async def search_myket_(update: Updates):
    if not check_status():
            
            
            
        return
    query = update.text
    if query.startswith('ูุงฺฉุช'):
        query =query.replace("ูุงฺฉุช","")
        await update.reply("ุฏุฑ ุญุงู ุฌุณุชุฌู ูุทูุง ุตุจุฑ ฺฉูุฏ...")
        result = await search_myket(query)
        if result:
            # ุงุฑุณุงู ุนฺฉุณ ู ุชูุถุญุงุช ุจู ุตูุฑุช ฺฉูพุดู (ุจุฏูู ูุฑูุช HTML)
            caption = f"ุนููุงู: {result['title']}\n"
            caption += f"ููฺฉ ุฏุงูููุฏ: {result['download']}\n"
            caption += f"ููฺฉ ูุงฺฉุช: {result['link']}"
            
            # ุงุฑุณุงู ุนฺฉุณ ููุฑุงู ุจุง ุชูุถุญุงุช (ฺฉูพุดู)
            await update.reply_photo(photo=result['photo'], caption=caption)
        else:
            await update.reply("โ ูุชุงุณูุงูู ูุชุงุฌ ูพุฏุง ูุดุฏ.")
      
    

    


@bot.on_message_updates(filters.text ,filters.is_group)
async def remove_user_chat(update: Updates):
    if not check_status():
            
            
            
        return
    group =update.object_guid
    
    if group and await update.is_admin(user_guid=update.author_guid):
        
        if update.text.startswith("ุฑู:@"):
            # ุงุณุชุฎุฑุงุฌ ูุงู ฺฉุงุฑุจุฑ ุงุฒ ูุชู ูพุงู
            username = update.text.split("@")[1].strip()

            try:
                # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ ูุงู ฺฉุงุฑุจุฑ
                user = await bot.get_object_by_username(username)
                
                if user:
                    # ุงุณุชุฎุฑุงุฌ user_guid ุงุฒ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
                    user_guid = user['user'].get('user_guid')
                    print(user_guid)
                    
                    if user_guid:
                        # ุญุฐู ฺฉุงุฑุจุฑ ุงุฒ ฺฏุฑูู
                        await bot.ban_member(update.object_guid,user_guid)
                        await update.reply(f"ฺฉุงุฑุจุฑ @{username} ุจุง ููููุช ุฑูู ุดุฏ.")
                    else:
                        await update.reply("ุดูุงุณู ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ.")
                else:
                    await update.reply("ฺฉุงุฑุจุฑ ููุฑุฏูุธุฑ ุงูุช ูุดุฏ.")
                    
            except Exception as e:
                await update.reply(f"ูุดฺฉู ูพุด ุขูุฏ: {str(e)}")
@bot.on_message_updates(filters.is_group)
async def manage_admin(update: Updates):
    if not check_status():
            
            
            
        return
    group =update.object_guid
    if group and await update.is_admin(user_guid=update.author_guid):
        if update.text.startswith("ุงุฏูู:@"):
            # ุงุณุชุฎุฑุงุฌ ูุงู ฺฉุงุฑุจุฑ ุงุฒ ูุชู ูพุงู
            username = update.text.split("@")[1].strip()

            try:
                # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ ูุงู ฺฉุงุฑุจุฑ
                user = await bot.get_object_by_username(username)
                
                if user:
                    # ุงุณุชุฎุฑุงุฌ user_guid ุงุฒ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
                    user_guid = user['user'].get('user_guid')
                    print(f"User GUID: {user_guid}")
                    
                    if user_guid:
                        # ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุจู ุนููุงู ูุฏุฑ ุจุง ุฏุณุชุฑุณ ูุญุฏูุฏ (ููุท ุงุฑุณุงู ูพุงู)
                        group_guid = update.object_guid  # ฺฏุฑูู ฺฉู ูพุงู ุฏุฑ ุขู ุงุฑุณุงู ุดุฏู
                        # ุฏุณุชุฑุณ ูุญุฏูุฏ ุจู ุงุฑุณุงู ูพุงู
                        await bot.set_group_admin(group_guid, user_guid, action="SetAdmin")
                        await update.reply(f"ฺฉุงุฑุจุฑ @{username} ุจุง ููููุช ุจู ุนููุงู ูุฏุฑ ุจุง ุฏุณุชุฑุณ ูุญุฏูุฏ ุชุนู ุดุฏ.")
                    else:
                        await update.reply("ุดูุงุณู ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ.")
                else:
                    await update.reply("ฺฉุงุฑุจุฑ ููุฑุฏูุธุฑ ุงูุช ูุดุฏ.")
                    
            except Exception as e:
                await update.reply(f"ูุดฺฉู ูพุด ุขูุฏ: {str(e)}")
        
        elif update.text.startswith("ุงุฏูู2:@"):
            # ุงุณุชุฎุฑุงุฌ ูุงู ฺฉุงุฑุจุฑ ุงุฒ ูุชู ูพุงู
            username = update.text.split("@")[1].strip()

            try:
                # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ ูุงู ฺฉุงุฑุจุฑ
                user = await bot.get_object_by_username(username)
                
                if user:
                    # ุงุณุชุฎุฑุงุฌ user_guid ุงุฒ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
                    user_guid = user['user'].get('user_guid')
                    print(f"User GUID: {user_guid}")
                    
                    if user_guid:
                        # ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุจู ุนููุงู ูุฏุฑ ุจุง ุฏุณุชุฑุณ ฺฉุงูู
                        group_guid = update.object_guid  # ฺฏุฑูู ฺฉู ูพุงู ุฏุฑ ุขู ุงุฑุณุงู ุดุฏู
                        await bot.set_group_admin(group_guid, user_guid, action="SetAdmin")
                        await update.reply(f"ฺฉุงุฑุจุฑ @{username} ุจุง ููููุช ุจู ุนููุงู ูุฏุฑ ุจุง ุฏุณุชุฑุณ ฺฉุงูู ุชุนู ุดุฏ.")
                    else:
                        await update.reply("ุดูุงุณู ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ.")
                else:
                    await update.reply("ฺฉุงุฑุจุฑ ููุฑุฏูุธุฑ ุงูุช ูุดุฏ.")
                    
            except Exception as e:
                await update.reply(f"ูุดฺฉู ูพุด ุขูุฏ: {str(e)}")

        elif update.text.startswith("ุจุฑฺฉูุงุฑ:@"):
            # ุงุณุชุฎุฑุงุฌ ูุงู ฺฉุงุฑุจุฑ ุงุฒ ูุชู ูพุงู
            username = update.text.split("@")[1].strip()

            try:
                # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุจุฑ ุงุณุงุณ ูุงู ฺฉุงุฑุจุฑ
                user = await bot.get_object_by_username(username)
                
                if user:
                    # ุงุณุชุฎุฑุงุฌ user_guid ุงุฒ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
                    user_guid = user['user'].get('user_guid')
                    print(f"User GUID: {user_guid}")
                    
                    if user_guid:
                        # ุญุฐู ฺฉุงุฑุจุฑ ุงุฒ ุญุงูุช ูุฏุฑ
                        group_guid = update.object_guid  # ฺฏุฑูู ฺฉู ูพุงู ุฏุฑ ุขู ุงุฑุณุงู ุดุฏู
                        await bot.set_group_admin(group_guid, user_guid, action="UnsetAdmin")
                        await update.reply(f"ฺฉุงุฑุจุฑ @{username} ุงุฒ ุญุงูุช ูุฏุฑ ุญุฐู ุดุฏ.")
                    else:
                        await update.reply("ุดูุงุณู ฺฉุงุฑุจุฑ ุงูุช ูุดุฏ.")
                else:
                    await update.reply("ฺฉุงุฑุจุฑ ููุฑุฏูุธุฑ ุงูุช ูุดุฏ.")
                    
            except Exception as e:
                await update.reply(f"ูุดฺฉู ูพุด ุขูุฏ: {str(e)}")
    


@bot.on_message_updates(filters.is_group)
async def generate_image_from_text_rubino(update: Updates):
    if not check_status():
            
            
            
        return
    get_guid_user =await get_guid()
    if update.author_guid == owners:

        if update.text.startswith('ุฑูุจูู'):
            input_image = update.text.replace('ุฑูุจูู', '').strip()
            await update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. ๐")
            try:
                r = photo_ai(input_image, 'downloaded_image_ai.jpg')
                with open('downloaded_image_ai.jpg', 'rb') as photo:
                    await update.reply("ุงูุงู ุงุฑุณุงู ูุดู ุฑูุจูู")
                    await rubino.add_picture(get_guid_user,'downloaded_image_ai.jpg',caption="ุณุงุฎุชู ุดุฏู ุจุง ููุด ูุตููุน ")
                    await update.reply("ุงุฑุณุงู ุดุฏ")
            except Exception as e:
                await update.reply(f"ุฎุทุง: {e}")

        elif update.text.startswith("post"):
            user_text = update.text.replace('post', '').strip()
            await update.reply("ูุทูุงู ฺฉู ุตุจุฑ ฺฉูุฏุ ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ุดูุง ูุณุชู. ๐")
            try:
                # ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจู ูุจโุณุฑูุณ
                url = f"https://api.api-code.ir/image-gen/?text={user_text}"
                response = requests.get(url)
                if response.status_code == 200:
                    data = response.json()
                    image_url = data['image_url']

                    # ุฏุงูููุฏ ุชุตูุฑ ุงุฒ URL
                    image_response = requests.get(image_url)
                    if image_response.status_code == 200:
                        image = Image.open(BytesIO(image_response.content))
                        image_path = f"{user_text}.png"
                        image.save(image_path)

                        # ุงุฑุณุงู ุชุตูุฑ ุจู ฺฉุงุฑุจุฑ
                        with open(image_path, 'rb') as photo:
                           await rubino.add_picture(get_guid_user,photo,caption="ุนฺฉุณ ุดูุง ุชูุณุท ููุด ูุตููุน ุณุงุฎุชู ุดุฏ")
                    else:
                        await update.reply('ุฎุทุง ุฏุฑ ุฏุงูููุฏ ุชุตูุฑ.')
                else:
                    await update.reply('ุฎุทุง ุฏุฑ ุฏุฑุงูุช URL ุชุตูุฑ.')
            except Exception as p:
                await update.reply(f"ุฎุทุง: {p}")  


        
    
@bot.on_message_updates(filters.is_group)
async def check_bug_messages(update: Updates):
    text = update.text
    if not check_status():
            
            
            
        return
    # ุจุฑุฑุณ ูุฑ ุงูฺฏู ุจุงฺฏ ุฏุฑ ูุชู ูพุงู
    for pattern in bug_patterns:
        if re.search(pattern, text):
            await update.delete_messages()  # ุญุฐู ูพุงู ุจุงฺฏโุฏุงุฑ
            await update.ban_member()  # ุฑูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุงุฒ ฺฏุฑูู
            await update.reply("๐จ ูพุงู ุจุงฺฏโุฏุงุฑ ุดูุงุณุง ู ฺฉุงุฑุจุฑ ุญุฐู ุดุฏ!")  # ูพุงู ูุดุฏุงุฑ
            break  # ุฌููฺฏุฑ ุงุฒ ฺูุฏู ุจุฑุฑุณ ููุฒูุงู

bot.run()




    
    
          
# ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช               






